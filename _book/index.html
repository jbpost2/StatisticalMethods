<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Statistical Methods</title>
  <meta name="description" content="Applied statistical methods book." />
  <meta name="generator" content="bookdown 0.17.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Statistical Methods" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Applied statistical methods book." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Statistical Methods" />
  
  <meta name="twitter:description" content="Applied statistical methods book." />
  

<meta name="author" content="Post, Avery, Osborne" />


<meta name="date" content="2020-04-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="sampling-schemes-and-experimental-design.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-the-book"><i class="fa fa-check"></i><b>1.1</b> About the book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i><b>1.2</b> Software</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>1.3</b> R</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>1.3.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#using-rstudio"><i class="fa fa-check"></i><b>1.3.2</b> Using RStudio</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#r-objects-and-classes"><i class="fa fa-check"></i><b>1.3.3</b> R Objects and Classes</a></li>
<li class="chapter" data-level="1.3.4" data-path="index.html"><a href="index.html#data-objects"><i class="fa fa-check"></i><b>1.3.4</b> Data Objects</a></li>
<li class="chapter" data-level="1.3.5" data-path="index.html"><a href="index.html#accessing-common-data-objects"><i class="fa fa-check"></i><b>1.3.5</b> Accessing Common Data Objects</a></li>
<li class="chapter" data-level="1.3.6" data-path="index.html"><a href="index.html#basics-of-r-recap"><i class="fa fa-check"></i><b>1.3.6</b> Basics of R Recap</a></li>
<li class="chapter" data-level="1.3.7" data-path="index.html"><a href="index.html#reading-data-basics"><i class="fa fa-check"></i><b>1.3.7</b> Reading Data Basics</a></li>
<li class="chapter" data-level="1.3.8" data-path="index.html"><a href="index.html#quick-aside-rstudio-project"><i class="fa fa-check"></i><b>1.3.8</b> Quick Aside: RStudio Project</a></li>
<li class="chapter" data-level="1.3.9" data-path="index.html"><a href="index.html#quick-aside-factors"><i class="fa fa-check"></i><b>1.3.9</b> Quick Aside: Factors</a></li>
<li class="chapter" data-level="1.3.10" data-path="index.html"><a href="index.html#quick-aside-r-packages"><i class="fa fa-check"></i><b>1.3.10</b> Quick Aside: R Packages</a></li>
<li class="chapter" data-level="1.3.11" data-path="index.html"><a href="index.html#reading-delimited-data"><i class="fa fa-check"></i><b>1.3.11</b> Reading Delimited Data</a></li>
<li class="chapter" data-level="1.3.12" data-path="index.html"><a href="index.html#excel-data"><i class="fa fa-check"></i><b>1.3.12</b> Excel data</a></li>
<li class="chapter" data-level="1.3.13" data-path="index.html"><a href="index.html#sas-data"><i class="fa fa-check"></i><b>1.3.13</b> SAS Data</a></li>
<li class="chapter" data-level="1.3.14" data-path="index.html"><a href="index.html#spss-data"><i class="fa fa-check"></i><b>1.3.14</b> SPSS Data</a></li>
<li class="chapter" data-level="1.3.15" data-path="index.html"><a href="index.html#json"><i class="fa fa-check"></i><b>1.3.15</b> JSON</a></li>
<li class="chapter" data-level="1.3.16" data-path="index.html"><a href="index.html#xml"><i class="fa fa-check"></i><b>1.3.16</b> XML</a></li>
<li class="chapter" data-level="1.3.17" data-path="index.html"><a href="index.html#databases"><i class="fa fa-check"></i><b>1.3.17</b> Databases</a></li>
<li class="chapter" data-level="1.3.18" data-path="index.html"><a href="index.html#apis"><i class="fa fa-check"></i><b>1.3.18</b> APIs</a></li>
<li class="chapter" data-level="1.3.19" data-path="index.html"><a href="index.html#data-manipulation-ideas"><i class="fa fa-check"></i><b>1.3.19</b> Data Manipulation Ideas</a></li>
<li class="chapter" data-level="1.3.20" data-path="index.html"><a href="index.html#documenting-with-markdown"><i class="fa fa-check"></i><b>1.3.20</b> Documenting with Markdown</a></li>
<li class="chapter" data-level="1.3.21" data-path="index.html"><a href="index.html#logical-statements"><i class="fa fa-check"></i><b>1.3.21</b> Logical Statements</a></li>
<li class="chapter" data-level="1.3.22" data-path="index.html"><a href="index.html#dplyr"><i class="fa fa-check"></i><b>1.3.22</b> <code>dplyr</code></a></li>
<li class="chapter" data-level="1.3.23" data-path="index.html"><a href="index.html#reshaping-data"><i class="fa fa-check"></i><b>1.3.23</b> Reshaping Data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#sas"><i class="fa fa-check"></i><b>1.4</b> SAS</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#basics-of-sas"><i class="fa fa-check"></i><b>1.4.1</b> Basics of SAS</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#reading-data-with-sas"><i class="fa fa-check"></i><b>1.4.2</b> Reading Data with SAS</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#manipulating-data-with-sas"><i class="fa fa-check"></i><b>1.4.3</b> Manipulating Data with SAS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html"><i class="fa fa-check"></i><b>2</b> Sampling Schemes and Experimental Design</a><ul>
<li class="chapter" data-level="2.1" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#data-in-the-wild"><i class="fa fa-check"></i><b>2.1</b> Data in the Wild</a><ul>
<li class="chapter" data-level="2.1.1" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#data-from-experiments"><i class="fa fa-check"></i><b>2.1.1</b> Data from Experiments</a></li>
<li class="chapter" data-level="2.1.2" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#data-from-observational-studies"><i class="fa fa-check"></i><b>2.1.2</b> Data from Observational Studies</a></li>
<li class="chapter" data-level="2.1.3" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#observational-vs-experimental-studies"><i class="fa fa-check"></i><b>2.1.3</b> Observational vs Experimental Studies</a></li>
<li class="chapter" data-level="2.1.4" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#the-role-of-statistics"><i class="fa fa-check"></i><b>2.1.4</b> The Role of Statistics</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#motivating-example-sampling---farmers-market"><i class="fa fa-check"></i><b>2.2</b> Motivating Example: Sampling - Farmer’s Market</a><ul>
<li class="chapter" data-level="2.2.1" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#define-objective-background"><i class="fa fa-check"></i><b>2.2.1</b> Define Objective &amp; Background</a></li>
<li class="chapter" data-level="2.2.2" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#select-response"><i class="fa fa-check"></i><b>2.2.2</b> Select Response</a></li>
<li class="chapter" data-level="2.2.3" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#determine-sources-of-variation"><i class="fa fa-check"></i><b>2.2.3</b> Determine Sources of Variation</a></li>
<li class="chapter" data-level="2.2.4" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#select-design"><i class="fa fa-check"></i><b>2.2.4</b> Select Design</a></li>
<li class="chapter" data-level="2.2.5" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#do-study"><i class="fa fa-check"></i><b>2.2.5</b> Do Study</a></li>
<li class="chapter" data-level="2.2.6" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#do-statistical-analysis"><i class="fa fa-check"></i><b>2.2.6</b> Do Statistical Analysis</a></li>
<li class="chapter" data-level="2.2.7" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#draw-conclusions-communicate"><i class="fa fa-check"></i><b>2.2.7</b> Draw Conclusions &amp; Communicate</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#motivating-example-design---student-assessment-volunteers"><i class="fa fa-check"></i><b>2.3</b> Motivating Example: Design - Student Assessment Volunteers</a><ul>
<li class="chapter" data-level="2.3.1" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#define-objective-background-1"><i class="fa fa-check"></i><b>2.3.1</b> Define Objective &amp; Background</a></li>
<li class="chapter" data-level="2.3.2" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#select-response-1"><i class="fa fa-check"></i><b>2.3.2</b> Select Response</a></li>
<li class="chapter" data-level="2.3.3" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#determine-sources-of-variation-1"><i class="fa fa-check"></i><b>2.3.3</b> Determine Sources of Variation</a></li>
<li class="chapter" data-level="2.3.4" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#select-design-1"><i class="fa fa-check"></i><b>2.3.4</b> Select Design</a></li>
<li class="chapter" data-level="2.3.5" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#do-study-1"><i class="fa fa-check"></i><b>2.3.5</b> Do Study</a></li>
<li class="chapter" data-level="2.3.6" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#do-statistical-analysis-1"><i class="fa fa-check"></i><b>2.3.6</b> Do Statistical Analysis</a></li>
<li class="chapter" data-level="2.3.7" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#draw-conclusions-communicate-1"><i class="fa fa-check"></i><b>2.3.7</b> Draw Conclusions &amp; Communicate</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#statistical-ideas-and-concepts"><i class="fa fa-check"></i><b>2.4</b> Statistical Ideas and Concepts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#obtaining-a-representative-sample"><i class="fa fa-check"></i><b>2.4.1</b> Obtaining a Representative Sample</a></li>
<li class="chapter" data-level="2.4.2" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#fundamentals-of-designed-experiments"><i class="fa fa-check"></i><b>2.4.2</b> Fundamentals of Designed Experiments</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#references-and-readings"><i class="fa fa-check"></i><b>2.5</b> References and Readings</a></li>
<li class="chapter" data-level="2.6" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#software-1"><i class="fa fa-check"></i><b>2.6</b> Software</a><ul>
<li class="chapter" data-level="2.6.1" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#r-1"><i class="fa fa-check"></i><b>2.6.1</b> R</a></li>
<li class="chapter" data-level="2.6.2" data-path="sampling-schemes-and-experimental-design.html"><a href="sampling-schemes-and-experimental-design.html#sas-1"><i class="fa fa-check"></i><b>2.6.2</b> SAS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="summarizing-data.html"><a href="summarizing-data.html"><i class="fa fa-check"></i><b>3</b> Summarizing Data</a><ul>
<li class="chapter" data-level="3.1" data-path="summarizing-data.html"><a href="summarizing-data.html#motivating-example-summarizing-data---california-health-interview-survey"><i class="fa fa-check"></i><b>3.1</b> Motivating Example: Summarizing Data - California Health Interview Survey</a><ul>
<li class="chapter" data-level="3.1.1" data-path="summarizing-data.html"><a href="summarizing-data.html#define-objective-background-2"><i class="fa fa-check"></i><b>3.1.1</b> Define Objective &amp; Background</a></li>
<li class="chapter" data-level="3.1.2" data-path="summarizing-data.html"><a href="summarizing-data.html#select-response-2"><i class="fa fa-check"></i><b>3.1.2</b> Select Response</a></li>
<li class="chapter" data-level="3.1.3" data-path="summarizing-data.html"><a href="summarizing-data.html#determine-sources-of-variation-2"><i class="fa fa-check"></i><b>3.1.3</b> Determine Sources of Variation</a></li>
<li class="chapter" data-level="3.1.4" data-path="summarizing-data.html"><a href="summarizing-data.html#select-design-2"><i class="fa fa-check"></i><b>3.1.4</b> Select Design</a></li>
<li class="chapter" data-level="3.1.5" data-path="summarizing-data.html"><a href="summarizing-data.html#do-study-2"><i class="fa fa-check"></i><b>3.1.5</b> Do Study</a></li>
<li class="chapter" data-level="3.1.6" data-path="summarizing-data.html"><a href="summarizing-data.html#do-statistical-analysis-2"><i class="fa fa-check"></i><b>3.1.6</b> Do Statistical Analysis</a></li>
<li class="chapter" data-level="3.1.7" data-path="summarizing-data.html"><a href="summarizing-data.html#draw-conclusions-communicate-2"><i class="fa fa-check"></i><b>3.1.7</b> Draw Conclusions &amp; Communicate</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="summarizing-data.html"><a href="summarizing-data.html#statistical-ideas-and-concepts-1"><i class="fa fa-check"></i><b>3.2</b> Statistical Ideas and Concepts</a><ul>
<li class="chapter" data-level="3.2.1" data-path="summarizing-data.html"><a href="summarizing-data.html#parameters-and-statistics"><i class="fa fa-check"></i><b>3.2.1</b> Parameters and Statistics</a></li>
<li class="chapter" data-level="3.2.2" data-path="summarizing-data.html"><a href="summarizing-data.html#scales-types-of-data"><i class="fa fa-check"></i><b>3.2.2</b> Scales (Types) of Data:</a></li>
<li class="chapter" data-level="3.2.3" data-path="summarizing-data.html"><a href="summarizing-data.html#numerical-summaries"><i class="fa fa-check"></i><b>3.2.3</b> Numerical Summaries</a></li>
<li class="chapter" data-level="3.2.4" data-path="summarizing-data.html"><a href="summarizing-data.html#graphical-summaries"><i class="fa fa-check"></i><b>3.2.4</b> Graphical Summaries</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="summarizing-data.html"><a href="summarizing-data.html#suggestions-for-further-readings"><i class="fa fa-check"></i><b>3.3</b> Suggestions for Further Readings</a></li>
<li class="chapter" data-level="3.4" data-path="summarizing-data.html"><a href="summarizing-data.html#software-2"><i class="fa fa-check"></i><b>3.4</b> Software</a><ul>
<li class="chapter" data-level="3.4.1" data-path="summarizing-data.html"><a href="summarizing-data.html#r-2"><i class="fa fa-check"></i><b>3.4.1</b> R</a></li>
<li class="chapter" data-level="3.4.2" data-path="summarizing-data.html"><a href="summarizing-data.html#sas-2"><i class="fa fa-check"></i><b>3.4.2</b> SAS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="point-estimates.html"><a href="point-estimates.html"><i class="fa fa-check"></i><b>4</b> Point Estimates</a><ul>
<li class="chapter" data-level="4.1" data-path="point-estimates.html"><a href="point-estimates.html#estiamte-with-means"><i class="fa fa-check"></i><b>4.1</b> Estiamte with means</a><ul>
<li class="chapter" data-level="4.1.1" data-path="point-estimates.html"><a href="point-estimates.html#experiment-background"><i class="fa fa-check"></i><b>4.1.1</b> Experiment background</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="point-estimates.html"><a href="point-estimates.html#estimate-with-quantiles"><i class="fa fa-check"></i><b>4.2</b> Estimate with quantiles</a><ul>
<li class="chapter" data-level="4.2.1" data-path="point-estimates.html"><a href="point-estimates.html#experiment-background-1"><i class="fa fa-check"></i><b>4.2.1</b> Experiment background</a></li>
<li class="chapter" data-level="4.2.2" data-path="point-estimates.html"><a href="point-estimates.html#define-the-object-of-the-experiment"><i class="fa fa-check"></i><b>4.2.2</b> Define the object of the experiment</a></li>
<li class="chapter" data-level="4.2.3" data-path="point-estimates.html"><a href="point-estimates.html#select-appropriate-response-variables"><i class="fa fa-check"></i><b>4.2.3</b> Select appropriate response variables</a></li>
<li class="chapter" data-level="4.2.4" data-path="point-estimates.html"><a href="point-estimates.html#identify-sources-of-variation"><i class="fa fa-check"></i><b>4.2.4</b> IDentify sources of variation</a></li>
<li class="chapter" data-level="4.2.5" data-path="point-estimates.html"><a href="point-estimates.html#choose-an-experimental-design"><i class="fa fa-check"></i><b>4.2.5</b> Choose an experimental design</a></li>
<li class="chapter" data-level="4.2.6" data-path="point-estimates.html"><a href="point-estimates.html#perform-the-test"><i class="fa fa-check"></i><b>4.2.6</b> Perform the test</a></li>
<li class="chapter" data-level="4.2.7" data-path="point-estimates.html"><a href="point-estimates.html#statistically-analyze-the-data"><i class="fa fa-check"></i><b>4.2.7</b> Statistically analyze the data</a></li>
<li class="chapter" data-level="4.2.8" data-path="point-estimates.html"><a href="point-estimates.html#draw-conclusions"><i class="fa fa-check"></i><b>4.2.8</b> Draw conclusions</a></li>
<li class="chapter" data-level="4.2.9" data-path="point-estimates.html"><a href="point-estimates.html#discussion"><i class="fa fa-check"></i><b>4.2.9</b> Discussion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="accounting-for-uncertainty.html"><a href="accounting-for-uncertainty.html"><i class="fa fa-check"></i><b>5</b> Accounting for Uncertainty</a><ul>
<li class="chapter" data-level="5.1" data-path="accounting-for-uncertainty.html"><a href="accounting-for-uncertainty.html#example-one"><i class="fa fa-check"></i><b>5.1</b> Example one</a></li>
<li class="chapter" data-level="5.2" data-path="accounting-for-uncertainty.html"><a href="accounting-for-uncertainty.html#example-two"><i class="fa fa-check"></i><b>5.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="CI.html"><a href="CI.html"><i class="fa fa-check"></i><b>6</b> Inference via Confidence Intervals for One Sample</a><ul>
<li class="chapter" data-level="6.1" data-path="CI.html"><a href="CI.html#the-normal-approximation"><i class="fa fa-check"></i><b>6.1</b> The normal approximation</a><ul>
<li class="chapter" data-level="6.1.1" data-path="CI.html"><a href="CI.html#analog-ci"><i class="fa fa-check"></i><b>6.1.1</b> Analog CI</a></li>
<li class="chapter" data-level="6.1.2" data-path="CI.html"><a href="CI.html#easy-mode"><i class="fa fa-check"></i><b>6.1.2</b> Easy mode</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="CI.html"><a href="CI.html#other-types-of-binomial-confidence-intervals"><i class="fa fa-check"></i><b>6.2</b> Other types of binomial confidence intervals</a><ul>
<li class="chapter" data-level="6.2.1" data-path="CI.html"><a href="CI.html#exact-cis-aka-clopper-pearson"><i class="fa fa-check"></i><b>6.2.1</b> Exact CIs, aka Clopper-Pearson</a></li>
<li class="chapter" data-level="6.2.2" data-path="CI.html"><a href="CI.html#bayesian-intervals"><i class="fa fa-check"></i><b>6.2.2</b> Bayesian intervals</a></li>
<li class="chapter" data-level="6.2.3" data-path="CI.html"><a href="CI.html#a-good-general-use-ci"><i class="fa fa-check"></i><b>6.2.3</b> A good general-use CI</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="HT.html"><a href="HT.html"><i class="fa fa-check"></i><b>7</b> Inference via Hypothesis Tests for One Sample</a><ul>
<li class="chapter" data-level="7.1" data-path="HT.html"><a href="HT.html#example-detection-probability"><i class="fa fa-check"></i><b>7.1</b> Example: Detection Probability</a><ul>
<li class="chapter" data-level="7.1.1" data-path="HT.html"><a href="HT.html#understanding-system-performance"><i class="fa fa-check"></i><b>7.1.1</b> Understanding system performance</a></li>
<li class="chapter" data-level="7.1.2" data-path="HT.html"><a href="HT.html#data-analysis"><i class="fa fa-check"></i><b>7.1.2</b> Data Analysis</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="HT.html"><a href="HT.html#hypothesis-testing"><i class="fa fa-check"></i><b>7.2</b> Hypothesis testing</a><ul>
<li class="chapter" data-level="7.2.1" data-path="HT.html"><a href="HT.html#wald-tests"><i class="fa fa-check"></i><b>7.2.1</b> Wald tests</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="twocategorical.html"><a href="twocategorical.html"><i class="fa fa-check"></i><b>8</b> Inference for Two Categorical Variables</a></li>
<li class="chapter" data-level="9" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>9</b> One-Way ANOVA</a><ul>
<li class="chapter" data-level="9.1" data-path="anova.html"><a href="anova.html#motivating-example"><i class="fa fa-check"></i><b>9.1</b> Motivating example</a></li>
<li class="chapter" data-level="9.2" data-path="anova.html"><a href="anova.html#simple-model-for-the-data"><i class="fa fa-check"></i><b>9.2</b> Simple model for the data</a></li>
<li class="chapter" data-level="9.3" data-path="anova.html"><a href="anova.html#exploratory-analysis"><i class="fa fa-check"></i><b>9.3</b> exploratory analysis</a></li>
<li class="chapter" data-level="9.4" data-path="anova.html"><a href="anova.html#sources-of-variation-1"><i class="fa fa-check"></i><b>9.4</b> sources of variation</a></li>
<li class="chapter" data-level="9.5" data-path="anova.html"><a href="anova.html#statistical-model-and-analysis"><i class="fa fa-check"></i><b>9.5</b> statistical model and analysis</a></li>
<li class="chapter" data-level="9.6" data-path="anova.html"><a href="anova.html#compare-analyses"><i class="fa fa-check"></i><b>9.6</b> compare analyses</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="multiway.html"><a href="multiway.html"><i class="fa fa-check"></i><b>10</b> Multi-way ANOVA</a></li>
<li class="chapter" data-level="11" data-path="block.html"><a href="block.html"><i class="fa fa-check"></i><b>11</b> Block Designs</a></li>
<li class="chapter" data-level="12" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>12</b> Regression Models</a></li>
<li class="chapter" data-level="13" data-path="glm.html"><a href="glm.html"><i class="fa fa-check"></i><b>13</b> The General Linear Model</a></li>
<li class="chapter" data-level="14" data-path="mixedmodels.html"><a href="mixedmodels.html"><i class="fa fa-check"></i><b>14</b> Mixed Models</a></li>
<li class="chapter" data-level="15" data-path="repeatedmeasures.html"><a href="repeatedmeasures.html"><i class="fa fa-check"></i><b>15</b> Split Plot and Repeated Measures Designs</a></li>
<li class="chapter" data-level="16" data-path="logistic.html"><a href="logistic.html"><i class="fa fa-check"></i><b>16</b> Logistic Regression and Generalized Linear Models</a><ul>
<li class="chapter" data-level="16.1" data-path="logistic.html"><a href="logistic.html#stuff-here"><i class="fa fa-check"></i><b>16.1</b> Stuff here</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="glmm.html"><a href="glmm.html"><i class="fa fa-check"></i><b>17</b> Generalized Linear Mixed Models</a></li>
<li class="chapter" data-level="18" data-path="learningobj.html"><a href="learningobj.html"><i class="fa fa-check"></i><b>18</b> Appendix - Learning Objectives</a><ul>
<li class="chapter" data-level="18.1" data-path="learningobj.html"><a href="learningobj.html#book-level"><i class="fa fa-check"></i><b>18.1</b> Book-level</a></li>
<li class="chapter" data-level="18.2" data-path="learningobj.html"><a href="learningobj.html#topic-level"><i class="fa fa-check"></i><b>18.2</b> Topic-level</a><ul>
<li class="chapter" data-level="18.2.1" data-path="learningobj.html"><a href="learningobj.html#chapter-2---sampling-design-and-exploratory-data-analysis"><i class="fa fa-check"></i><b>18.2.1</b> Chapter 2 - Sampling, Design, and Exploratory Data Analysis</a></li>
<li class="chapter" data-level="18.2.2" data-path="learningobj.html"><a href="learningobj.html#chapter-3---point-estimation"><i class="fa fa-check"></i><b>18.2.2</b> Chapter 3 - Point Estimation</a></li>
<li class="chapter" data-level="18.2.3" data-path="learningobj.html"><a href="learningobj.html#chapter-4---accounting-for-uncertainty-in-estimation"><i class="fa fa-check"></i><b>18.2.3</b> Chapter 4 - Accounting for Uncertainty in Estimation</a></li>
<li class="chapter" data-level="18.2.4" data-path="learningobj.html"><a href="learningobj.html#chapter-5---inference-via-hypothesis-testing-for-a-proportion-or-mean"><i class="fa fa-check"></i><b>18.2.4</b> Chapter 5 - Inference via Hypothesis Testing for a Proportion or Mean</a></li>
<li class="chapter" data-level="18.2.5" data-path="learningobj.html"><a href="learningobj.html#chapter-6---inference-via-confidence-intervals-for-a-proportion-or-mean"><i class="fa fa-check"></i><b>18.2.5</b> Chapter 6 - Inference via Confidence Intervals for a Proportion or Mean</a></li>
<li class="chapter" data-level="18.2.6" data-path="learningobj.html"><a href="learningobj.html#chapter-7---inference-on-two-categorical-variables"><i class="fa fa-check"></i><b>18.2.6</b> Chapter 7 - Inference on Two Categorical Variables</a></li>
<li class="chapter" data-level="18.2.7" data-path="learningobj.html"><a href="learningobj.html#chapter-8---inference-for-multiple-means"><i class="fa fa-check"></i><b>18.2.7</b> Chapter 8 - Inference for Multiple Means</a></li>
<li class="chapter" data-level="18.2.8" data-path="learningobj.html"><a href="learningobj.html#chapter-9---multiway-anova"><i class="fa fa-check"></i><b>18.2.8</b> Chapter 9 - Multiway ANOVA</a></li>
<li class="chapter" data-level="18.2.9" data-path="learningobj.html"><a href="learningobj.html#chapter-10---block-designs"><i class="fa fa-check"></i><b>18.2.9</b> Chapter 10 - Block Designs</a></li>
<li class="chapter" data-level="18.2.10" data-path="learningobj.html"><a href="learningobj.html#chapter-11---regression"><i class="fa fa-check"></i><b>18.2.10</b> Chapter 11 - Regression</a></li>
<li class="chapter" data-level="18.2.11" data-path="learningobj.html"><a href="learningobj.html#chapter-12---the-general-linear-model"><i class="fa fa-check"></i><b>18.2.11</b> Chapter 12 - The General Linear Model</a></li>
<li class="chapter" data-level="18.2.12" data-path="learningobj.html"><a href="learningobj.html#chapter-13---mixed-models"><i class="fa fa-check"></i><b>18.2.12</b> Chapter 13 - Mixed Models</a></li>
<li class="chapter" data-level="18.2.13" data-path="learningobj.html"><a href="learningobj.html#chapter-14---repeated-measures-and-split-plot-designs"><i class="fa fa-check"></i><b>18.2.13</b> Chapter 14 - Repeated Measures and Split Plot Designs</a></li>
<li class="chapter" data-level="18.2.14" data-path="learningobj.html"><a href="learningobj.html#chapter-15---logistic-regression-and-generalized-linear-models"><i class="fa fa-check"></i><b>18.2.14</b> Chapter 15 - Logistic Regression and Generalized Linear Models</a></li>
<li class="chapter" data-level="18.2.15" data-path="learningobj.html"><a href="learningobj.html#chapter-16---generalized-linear-mixed-models"><i class="fa fa-check"></i><b>18.2.15</b> Chapter 16 - Generalized Linear Mixed Models</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="learningobj.html"><a href="learningobj.html#from-st512"><i class="fa fa-check"></i><b>18.3</b> From ST512</a></li>
<li class="chapter" data-level="18.4" data-path="learningobj.html"><a href="learningobj.html#for-point-estimates-chapter"><i class="fa fa-check"></i><b>18.4</b> For Point Estimates Chapter</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="19" data-path="notation.html"><a href="notation.html"><i class="fa fa-check"></i><b>19</b> Appendix - Notation</a><ul>
<li class="chapter" data-level="19.1" data-path="notation.html"><a href="notation.html#standard-notation"><i class="fa fa-check"></i><b>19.1</b> Standard notation</a></li>
<li class="chapter" data-level="19.2" data-path="notation.html"><a href="notation.html#mixed-models"><i class="fa fa-check"></i><b>19.2</b> Mixed models</a></li>
<li class="chapter" data-level="19.3" data-path="notation.html"><a href="notation.html#effects-model-representation"><i class="fa fa-check"></i><b>19.3</b> Effects model representation</a></li>
<li class="chapter" data-level="19.4" data-path="notation.html"><a href="notation.html#estimators-vs.-estimates"><i class="fa fa-check"></i><b>19.4</b> Estimators vs. Estimates</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistical Methods</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Statistical Methods</h1>
<p class="author"><em>Post, Avery, Osborne</em></p>
<p class="date"><em>2020-04-15</em></p>
</div>
<div id="introduction" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Introduction</h1>
<div id="about-the-book" class="section level2">
<h2><span class="header-section-number">1.1</span> About the book</h2>
<p>The goal in creating this book is to provide a thorough treatment of applied statistical methodologies geared toward analyzing designed experiments. Our approach emphasizes the problems researchers encounter rather than providing a litany of solutions with only modest context. We discuss a real scientific problem, thoughtfully consider the data that could be used to answer that problem, investigate experimental designs that would be useful, and pursue statistical models to make informed decisions in the context of how the data was collected. The focus of the book is on the statistical modeling portion but problems are viewed holistically. We purposefully introduce the linear model framework in matrix form early on and place most of the methodologies under that umbrella. This helps the reader to see the methods as a part of a general framework as opposed to a set of tools within a toolbox. We believe that the book should be appropriate for a graduate level student that has some comfort in mathematics, particularly linear algebra. Both SAS and R are used throughout to make sure the book works for a wide audience of practitioners.</p>
</div>
<div id="software" class="section level2">
<h2><span class="header-section-number">1.2</span> Software</h2>
<p>At this point, software is a requirement for statistics in practice. There are many available software solutions ranging from point and click to full on programming. We’ve decided to focus on R and SAS for this book.</p>
<ul>
<li><p>R is an open source, platform agnostic, software that is widely used by statisticians. We’ll use the RStudio interactive development environment to write and execute our R code.</p></li>
<li><p>SAS is an extremely powerful and widely used software for modelling and analysis. It requires a license, but for those without one, SAS University Edition can be installed for free and is also platform agnostic. We’ll use the SAS Studio environment that comes with University Edition.</p></li>
</ul>
<p>As we progress through the book we’ll include graphs, descriptive statistics, and analyses from R and/or SAS. At the end of each chapter a section explaining how to create these in both R and SAS is included. The following sections give a brief introduction to each software that should prepare you for what’s ahead!</p>
<p>You’ll also notice a certain style to the way our code is written. Good programming practices (GPPs) are essential for improving productivity and collaborating with others - including future you! There are a lot of guidelines and resources about GPPs available. We’ll cover just a few of the essentials here.</p>
<ul>
<li><p>Include a header at the top of the program that gives the author, date, and purpose of the program.</p></li>
<li><p>Place comments throughout the program explaining the purpose of different chunks of code as well as your thought process.</p></li>
<li><p>Spacing and indentation should be used throughout for readability of the program.</p></li>
<li><p>Group sections of your code that serve a certain purpose together.</p></li>
<li><p>Use a consistent naming scheme such as camelCase or underscores_between_words.</p></li>
</ul>
<p>Many of these and other GPPs can be taken care of by programming in a notebook environment such as JUPYTER (which can include SAS) or R Markdown. Also using a version control software such as Git and Github is really useful!</p>
</div>
<div id="r" class="section level2">
<h2><span class="header-section-number">1.3</span> R</h2>
<p>The general workflow for programming in R involves taking raw data and importing it into R. Once that data is imported we often create numerical and graphical summaries of the data. An appropriate model and statistical methods are then applied.</p>
<p><img src="img/RWorkFlow.png" width="80%" style="display: block; margin: auto;" /></p>
<p>At the end of this section the reader should be able to do the following:</p>
<ul>
<li>install R and RStudio<br />
</li>
<li>read and write basic R programs<br />
</li>
<li>import well-formatted data into R</li>
<li>do basic data manipulation in R</li>
</ul>
<p>As the book progresses the steps of summarizing and analyzing the data will be covered. Let’s get started!</p>
<div id="installing-r-and-rstudio" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Installing R and RStudio</h3>
<p>The R software itself can be downloaded and installed by visiting the <a href="https://cran.r-project.org/">Comprehensive R Archive Network (Cran) website</a>. Here there are links to install R for Linux, Mac, and Windows-based machines.</p>
<ul>
<li><p>For Windows users, follow the initial ‘Download R for Windows’ link and then click ‘install R for the first time.’ From here you should now see a Download R X.x.x for Windows link that will download a .exe file. Once downloaded run that file and follow the prompts.</p></li>
<li><p>For Mac users, follow the initial ‘Download R for (Mac) OS X’ link and click on the link near the ‘Latest Release’ section similar to R-x.x.x.pkg. Once downloaded, you should be able to install by double clicking on the file.</p></li>
<li><p>For Linux users, follow the initial ‘Download R for Linux’ link. Choose your OS and instructions are given on how to download R.</p></li>
</ul>
<p>Once you’ve installed R you’ll want to install RStudio. RStudio is a well-developed environment that makes programming in R much easier! To download head to <a href="https://rstudio.com/products/rstudio/download/">RStudio’s download page</a>. From here choose RStudio Desktop (Open Source License) and a page with appropriate links to install are provided.</p>
</div>
<div id="using-rstudio" class="section level3">
<h3><span class="header-section-number">1.3.2</span> Using RStudio</h3>
<p>To program in R you’ll want to open RStudio. RStudio will submit R code for you so you never actually need to open R itself.</p>
<p>There are four main ‘areas’ of the RStudio IDE:</p>
<ul>
<li><p>Console (&amp; Terminal)</p></li>
<li><p>Scripting and Viewing Window</p></li>
<li><p>Plots/Help (&amp; Files/Packages)</p></li>
<li><p>Environment (&amp; Connections/Git)</p></li>
</ul>
<p>You may wish to rearrange the panes. This can be done via the menus at the top. Choose “Tools –&gt; Global Options”.</p>
<p><img src="img/panes.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Other useful global options to change are under the appearance tab (font size, theme) and under the code tab (editing –&gt; soft-wrap, display –&gt; show whitespace).</p>
<div id="console" class="section level4">
<h4><span class="header-section-number">1.3.2.1</span> Console</h4>
<p>To evaluate code you can type directly into the <strong>console</strong>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co">#simple math operations</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># &lt;-- is a comment - code not evaluated</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">7</span></a></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co">#exp is exponential function</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="dv">10</span> <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 200.8554</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co">#log is the natural logarithm (base exp(1)) by default</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#pi is the built-in constant</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">log</span>(pi<span class="op">^</span><span class="dv">2</span>) </a></code></pre></div>
<pre><code>## [1] 2.28946</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">mean</span>(cars<span class="op">$</span>speed)</a></code></pre></div>
<pre><code>## [1] 15.4</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">hist</span>(cars<span class="op">$</span>speed)</a></code></pre></div>
<p><img src="StatisticalMethods_files/figure-html/unnamed-chunk-35-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>In the R sections of the book we spend much of our time learning the R syntax needed to create the appropriate summaries or analysis.</p>
</div>
<div id="scripting-and-viewing-window" class="section level4">
<h4><span class="header-section-number">1.3.2.2</span> Scripting and Viewing Window</h4>
<p>Usually you don’t want to type code directly into the console because there isn’t an easy way to get the code for later use. Instead code is usually written in an R ‘script’ which is then saved.</p>
<p>From an R script you can send code to console via:</p>
<ul>
<li><p>“Run” button (runs current line)</p></li>
<li><p>CTRL+Enter (PC and Linux) or Command+Enter (MAC)</p></li>
<li><p>Highlight section and do above</p></li>
</ul>
<p>To create a new R script you can use the menus at the top and go to File –&gt; New File –&gt; R Script. Take a moment and do this! Type the following into your script:</p>
<ul>
<li><p><code>View(cars)</code> (note capital <code>V</code>)</p></li>
<li><p><code>plot(cars)</code></p></li>
</ul>
<p>Submit it to the console using a button or hot key!</p>
</div>
<div id="plotshelp" class="section level4">
<h4><span class="header-section-number">1.3.2.3</span> Plots/Help</h4>
<p>Created plots are stored in the <code>Plots</code> tab. This is a nice feature that allows you to cycle through past plots and easily save plots via menus.</p>
<p>In this pane there is also a <code>Help</code> tab that will enable you to learn about R functions. In the console type <code>help(hist)</code> for instance. Information about the <code>hist</code> function is presented. Being able to parse these types of help files is a really useful skill!</p>
<p>For every R function there are a few sections:</p>
<ul>
<li><p>Description - What the function is intended for.</p></li>
<li><p>Usage - How to call the function, inputs required, and which inputs have default arguments.</p>
<ul>
<li>Here we see <code>hist(x, ...)</code>. This implies there is only one required input, <code>x</code>, and there is no default. The ellipsis <code>(...)</code> is an important tool that gives a function (say A) that calls another function (say B) the flexibility to supply arguments specific to function B when calling function A. We’ll learn more about this in later chapters.<br />
</li>
<li>Below you see a more detailed call to <code>hist</code> that includes other inputs. Each of these inputs has an equal sign with a value after it. This is the default value for that input (since there is a default value you don’t have to specify it when you call). For instance, the <code>breaks = "Sturges"</code> input implies that the “Sturges” method is the default for determining how the bins of the histogram are created.</li>
</ul></li>
<li><p>Arguments - Describes the input requirements in more detail.</p></li>
<li><p>Details - Information about how the function works.</p></li>
<li><p>Values - Information about what is returned to the user.</p></li>
<li><p>References</p></li>
<li><p>See Also - Related functions.</p></li>
<li><p>Examples - Highly useful section giving code you can copy and paste to see an example of how the function can be used.</p></li>
</ul>
</div>
<div id="environment" class="section level4">
<h4><span class="header-section-number">1.3.2.4</span> Environment</h4>
<p>R stores <strong>data/info/functions/etc.</strong> in R objects. An object is a data structure having attributes and methods (more on this shortly). You can create an R object via <code>&lt;-</code> (recommended) or <code>=</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co">#save for later</span></a>
<a class="sourceLine" id="cb10-2" title="2">avg &lt;-<span class="st"> </span>(<span class="dv">5</span> <span class="op">+</span><span class="st"> </span><span class="dv">7</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>) <span class="op">/</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#call avg object</span></a>
<a class="sourceLine" id="cb10-4" title="4">avg</a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co">#strings (text) can be saved as well</span></a>
<a class="sourceLine" id="cb12-2" title="2">words &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Hello there!&quot;</span>, <span class="st">&quot;How are you?&quot;</span>)</a>
<a class="sourceLine" id="cb12-3" title="3">words</a></code></pre></div>
<pre><code>## [1] &quot;Hello there!&quot; &quot;How are you?&quot;</code></pre>
<p>Notice that when you send the line <code>avg &lt;- (5+ 7 + 6) / 3</code> to the console (i.e. create the object <code>avg</code>) that nothing prints out. This is common behavior when storing the object. The output or information is saved for later use in the object. To see the output or information you then simply call the object (a default printing method is used to display it).</p>
<p>You can look at all current objects with <code>ls()</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">ls</span>()</a></code></pre></div>
<pre><code>## [1] &quot;avg&quot;   &quot;words&quot;</code></pre>
<p>Use <code>rm()</code> to remove an object.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">rm</span>(avg)</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">ls</span>()</a></code></pre></div>
<pre><code>## [1] &quot;words&quot;</code></pre>
<p>Built-in objects exist like <code>letters</code> and <code>cars</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">letters</a></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">head</span>(cars, <span class="dt">n =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre><code>##   speed dist
## 1     4    2
## 2     4   10
## 3     7    4</code></pre>
<p>The function <code>data()</code> shows available built-in datasets.</p>
<p>You should now be roughly familiar with the four main ‘areas’ of the RStudio IDE:</p>
<ul>
<li><p>Console (&amp; Terminal)</p></li>
<li><p>Scripting and Viewing Window</p></li>
<li><p>Plots/Help (&amp; Files/Packages)</p></li>
<li><p>Environment (&amp; Connections/Git)</p></li>
</ul>
</div>
</div>
<div id="r-objects-and-classes" class="section level3">
<h3><span class="header-section-number">1.3.3</span> R Objects and Classes</h3>
<p>R has strong <strong>O</strong>bject <strong>O</strong>riented <strong>P</strong>rogramming (OOP) tools.</p>
<ul>
<li><p>Object: data structure with attributes (class)</p></li>
<li><p>Method: procedures (functions) that act on object based on attributes</p></li>
</ul>
<p>R functions like <code>print()</code> or <code>plot()</code> act differently depending on an object’s class.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">class</span>(cars)</a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">plot</span>(cars)</a></code></pre></div>
<p><img src="StatisticalMethods_files/figure-html/unnamed-chunk-41-1.png" width="75%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">class</span>(exp)</a></code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">plot</span>(exp)</a></code></pre></div>
<p><img src="StatisticalMethods_files/figure-html/unnamed-chunk-43-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Many R functions exist to help understand an R Object.</p>
<ul>
<li><code>str()</code> (structure)</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">str</span>(cars)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    50 obs. of  2 variables:
##  $ speed: num  4 4 7 7 8 9 10 10 10 11 ...
##  $ dist : num  2 10 4 22 16 10 18 26 34 17 ...</code></pre>
<ul>
<li><code>class()</code></li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">class</span>(cars)</a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<ul>
<li><code>typeof()</code></li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">typeof</span>(cars)</a></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>We’ll use these functions later to help us know how to extract information from an R object.</p>
<p>Recall that we can create an R object via <code>&lt;-</code> (recommended) or <code>=</code>. This allocates computer memory to the object. The object’s attributes depend on how you created it.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb34-2" title="2"><span class="kw">class</span>(vec)</a></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1">fit &lt;-<span class="st"> </span><span class="kw">lm</span>(dist <span class="op">~</span><span class="st"> </span>speed, <span class="dt">data =</span> cars)</a>
<a class="sourceLine" id="cb36-2" title="2"><span class="kw">class</span>(fit)</a></code></pre></div>
<pre><code>## [1] &quot;lm&quot;</code></pre>
</div>
<div id="data-objects" class="section level3">
<h3><span class="header-section-number">1.3.4</span> Data Objects</h3>
<p>To understand how to use R for data analysis we need to understand commonly used data structures:</p>
<ol style="list-style-type: decimal">
<li>Atomic Vector (1D)<br />
</li>
<li>Matrix (2D)<br />
</li>
<li>Array (nd) (not covered)<br />
</li>
<li>Data Frame (2D)<br />
</li>
<li>List (1D)</li>
</ol>
<div id="atomic-vector" class="section level4">
<h4><span class="header-section-number">1.3.4.1</span> Atomic Vector</h4>
<p>Let’s start with the most basic object and work our way up. An atomic vector is a 1D group of elements with an ordering. Two examples of atomic vectors are given below:</p>
<p><img src="img/vectorVisualF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>All of the elements must be same ‘type’. Types include numeric (integer or double), character, or logical. We create an atomic vector with the <code>c()</code> function (‘combine’).</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="co">#vectors (1 dimensional) objects</span></a>
<a class="sourceLine" id="cb38-2" title="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">17</span>, <span class="dv">22</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">-3</span>)</a>
<a class="sourceLine" id="cb38-3" title="3">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;bird&quot;</span>, <span class="st">&quot;frog&quot;</span>)</a>
<a class="sourceLine" id="cb38-4" title="4">x</a></code></pre></div>
<pre><code>## [1] 17 22  1  3 -3</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1">y</a></code></pre></div>
<pre><code>## [1] &quot;cat&quot;  &quot;dog&quot;  &quot;bird&quot; &quot;frog&quot;</code></pre>
<p>In addition, many ‘functions’ output a numeric vector. Functions are at the heart of R so it is vital to understand them. The concept of a function is that the function takes an input or inputs and maps those inputs to some output(s).</p>
<p><img src="img/funVisual1F.png" width="80%" style="display: block; margin: auto;" /></p>
<p>As an example, one function that outputs a numeric vector is the <code>seq</code> or sequence function. To know about a function you need to know about the inputs and ouputs. For <code>seq</code> we have the following:</p>
<pre><code>+ Inputs = from, to, by (among others)  

+ Output = a sequence of numbers</code></pre>
<p><img src="img/funVisual2F.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">v &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">5</span>, <span class="dt">by =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb43-2" title="2">v</a></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">str</span>(v)</a></code></pre></div>
<pre><code>##  num [1:5] 1 2 3 4 5</code></pre>
<p><code>str</code> tells about the object <code>v</code>:</p>
<ul>
<li><p><code>num</code> says it is numeric</p></li>
<li><p><code>[1:5]</code> implies one dimensional with elements 1, 2, 3, 4, 5</p></li>
</ul>
<p>If the order of the function arguments is known, they do not need to be named when invoking the function as R uses positional matching to determine the inputs. Also, if you name some arguments but not others, R will use positional matching for the remaining inputs. For example, the calls below are all equivalent:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">5</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb47-2" title="2"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb47-3" title="3"><span class="kw">seq</span>(<span class="dt">to =</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb47-4" title="4"><span class="kw">seq</span>(<span class="dt">by =</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span>)</a></code></pre></div>
<p>The <code>seq</code> function is used quite a bit. There is a shorthand way to create an integer sequence using <code>:</code>.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">20</span> </a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</code></pre>
<p>It is also important to know how R does math on its objects. R does elementwise addition/subtraction and multiplication/division to vectors, matrices, and data frames. (The matrix multiplicaiton operator is <code>%*%</code>.).</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">20</span><span class="op">/</span><span class="dv">20</span></a></code></pre></div>
<pre><code>##  [1] 0.05 0.10 0.15 0.20 0.25 0.30 0.35 0.40 0.45 0.50 0.55 0.60 0.65 0.70 0.75
## [16] 0.80 0.85 0.90 0.95 1.00</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">20</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a></code></pre></div>
<pre><code>##  [1]  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21</code></pre>
<p>As we mentioned earlier, understanding help files is really critical to being able to program in R. As functions are ubiquitous in R we often need to learn about their inputs (or arguments) and we can do so using <code>help</code>.</p>
<p>To recap, our first commonly used R object for storing data is an atomic vector. This is a 1D group of elements with an ordering where all of the elements are of the same type. Generally vectors are useful to know about but not usually useful for a storing a dataset exactly. They can often be considered as the ‘building blocks’ for other data types.</p>
</div>
<div id="matrix" class="section level4">
<h4><span class="header-section-number">1.3.4.2</span> Matrix</h4>
<p>A Matrix is a 2D data structure in R whose elements are all of the same type. The first dimension refers to the rows and the second dimension refers to the columns. A 2D data object is very common. The rows often represent the <em>observations</em> and the columns represent the <em>variables</em>. Although not technically right, it is useful to think of the columns of a matrix as vectors of the same <strong>type and length</strong>.</p>
<p><img src="img/matrixVisualF.png" width="75%" style="display: block; margin: auto;" /></p>
<p>For instance, consider the three vectors created here:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1"><span class="co">#populate vectors</span></a>
<a class="sourceLine" id="cb54-2" title="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">17</span>, <span class="dv">3</span>, <span class="dv">13</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb54-3" title="3">y &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dt">times =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb54-4" title="4">z &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></a></code></pre></div>
<p>These are all of the same type. This can be checked with an <code>is.</code> (read as ‘is dot’) function.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="co">#check &#39;type&#39;</span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="kw">is.numeric</span>(x)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="kw">is.numeric</span>(y)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="kw">is.numeric</span>(z)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Not only are these three objects the same type but they are also the same length. This can be checked using the <code>length</code> function.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1"><span class="co">#check &#39;length&#39;</span></a>
<a class="sourceLine" id="cb61-2" title="2"><span class="kw">length</span>(x)</a></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1"><span class="kw">length</span>(y)</a></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1"><span class="kw">length</span>(z)</a></code></pre></div>
<pre><code>## [1] 4</code></pre>
</div>
<p>Again, it is useful to visualize the columns of a potential matrix as these vectors. We can create the matrix using the <code>matrix</code> function. The <code>matrix</code> function requires us to give the data as one vector. We can combine the <code>x</code>, <code>y</code>, and <code>z</code> objects into one vector using the <code>c</code> funciton. This is the first argument to the <code>matrix</code> function. The only other argument required is to either specify the number of rows (<code>nrow =</code>) or the number of columns (<code>ncol =</code>) (R will attempt to figure out the one that is not given using the total length of the specified data vector).</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1"><span class="co">#combine in a matrix</span></a>
<a class="sourceLine" id="cb67-2" title="2"><span class="kw">matrix</span>(<span class="kw">c</span>(x, y, z), <span class="dt">ncol =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   17   -3    1
## [2,]    3   -3    2
## [3,]   13   -3    3
## [4,]   11   -3    4</code></pre>
<p>A matrix can also store character data as well. An example of this is given below and the number of rows is specified rather than the number of columns. Note the use of <code>is.character</code> from the <code>is.</code> family of functions.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Hi&quot;</span>, <span class="st">&quot;There&quot;</span>, <span class="st">&quot;!&quot;</span>)</a>
<a class="sourceLine" id="cb69-2" title="2">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</a>
<a class="sourceLine" id="cb69-3" title="3">z &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;One&quot;</span>, <span class="st">&quot;Two&quot;</span>, <span class="st">&quot;Three&quot;</span>)</a>
<a class="sourceLine" id="cb69-4" title="4"><span class="kw">is.character</span>(x)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="kw">matrix</span>(<span class="kw">c</span>(x, y, z), <span class="dt">nrow =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre><code>##      [,1]    [,2] [,3]   
## [1,] &quot;Hi&quot;    &quot;a&quot;  &quot;One&quot;  
## [2,] &quot;There&quot; &quot;b&quot;  &quot;Two&quot;  
## [3,] &quot;!&quot;     &quot;c&quot;  &quot;Three&quot;</code></pre>
<p>To recap, a Matrix is a 2D data structure where we can think of the columns as vectors of the same <strong>type and length</strong>. These are useful for some datasets but most datasets have some numeric and some character variables.</p>
<p><img src="img/dataset.PNG" width="80%" style="display: block; margin: auto;" /></p>
<p>Another 2D object called a data frame is perfect for this type of data!</p>
</div>
<div id="data-frame" class="section level4">
<h4><span class="header-section-number">1.3.4.3</span> Data Frame</h4>
<p>A Data Frame is a 2D data structure where elements within a column must be of the same type but the columns themselves can differ in type. When thinking of a data frame, consider them as a collection (list) of vectors of the same <strong>length</strong>.</p>
<p><img src="img/dfVisualF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>A data frame can be created with the <code>data.frame</code> function.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>)</a>
<a class="sourceLine" id="cb73-2" title="2">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">-1</span>, <span class="dv">5</span>, <span class="dv">6</span>)</a>
<a class="sourceLine" id="cb73-3" title="3">z &lt;-<span class="st"> </span><span class="dv">10</span><span class="op">:</span><span class="dv">15</span></a>
<a class="sourceLine" id="cb73-4" title="4"><span class="kw">data.frame</span>(x, y, z)</a></code></pre></div>
<pre><code>##   x  y  z
## 1 a  1 10
## 2 b  3 11
## 3 c  4 12
## 4 d -1 13
## 5 e  5 14
## 6 f  6 15</code></pre>
<p>You can also easily name the columns during creation.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">data.frame</span>(<span class="dt">char =</span> x, <span class="dt">data1 =</span> y, <span class="dt">data2 =</span> z)</a></code></pre></div>
<pre><code>##   char data1 data2
## 1    a     1    10
## 2    b     3    11
## 3    c     4    12
## 4    d    -1    13
## 5    e     5    14
## 6    f     6    15</code></pre>
<p>Notice that char, data1, and data2 become the variable names for the data frame.</p>
<p>To recap, consider a data frame as a collection (list) of vectors of the same <strong>length</strong>. Tis type of data structure is perfect for most data sets! Most functions that read 2D data into R store it as a data frame.</p>
</div>
<div id="list" class="section level4">
<h4><span class="header-section-number">1.3.4.4</span> List</h4>
<p>A List is a 1D group of objects with ordering. Really it is a vector that can have differing elements. Think of this in a similar way to the atomic vector previously discussed except the elements are really flexible.</p>
<p><img src="img/listVisualF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>A list can be created with the <code>list</code> function. You specify the elements you want to include, separated by commas.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1"><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">rnorm</span>(<span class="dv">2</span>), <span class="kw">c</span>(<span class="st">&quot;!&quot;</span>, <span class="st">&quot;?&quot;</span>))</a></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1]  0.4899896 -2.2668136
## 
## [[3]]
## [1] &quot;!&quot; &quot;?&quot;</code></pre>
<p>Similar to a data frame, you can add names to the list elements during creation.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1"><span class="kw">list</span>(<span class="dt">seq =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">normVals =</span> <span class="kw">rnorm</span>(<span class="dv">2</span>), <span class="dt">punctuation =</span> <span class="kw">c</span>(<span class="st">&quot;!&quot;</span>, <span class="st">&quot;?&quot;</span>))</a></code></pre></div>
<pre><code>## $seq
## [1] 1 2 3
## 
## $normVals
## [1] -0.3953431 -1.1120228
## 
## $punctuation
## [1] &quot;!&quot; &quot;?&quot;</code></pre>
<p>To recap, a list is a very flexible 1D object. It is really useful for more complex types of data.</p>
<p>The table below gives a summary of the data objects we’ve covered. For most data analysis you’ll use data frames.</p>
<table>
<thead>
<tr class="header">
<th>Dimension</th>
<th>Homogeneous</th>
<th>Heterogeneous</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1d</td>
<td>Atomic Vector</td>
<td>List</td>
</tr>
<tr class="even">
<td>2d</td>
<td>Matrix</td>
<td>Data Frame</td>
</tr>
</tbody>
</table>
<p>Next we look at how to access or change parts of these common data objects.</p>
</div>
</div>
<div id="accessing-common-data-objects" class="section level3">
<h3><span class="header-section-number">1.3.5</span> Accessing Common Data Objects</h3>
<p>When we are dealing with a data object (1D or 2D) we may want to extract a single element, certain columns, or certain rows. In this section we’ll look at how to subset or extract information from each of the common data objects covered in the previous section.</p>
<div id="atomic-vector-1d" class="section level4">
<h4><span class="header-section-number">1.3.5.1</span> Atomic Vector (1D)</h4>
<p>For atomic vectors (and lists, see later) you can return elements using square brackets <code>[]</code>. You may notice that when R prints a vector to the console you often see <code>[1]</code> next to the first element and perhaps a <code>[#]</code> where R has to break and move to the next line of the console. The <code>[1]</code> implies the element printed next is the first element of the vector (R starts its counting at 1 not 0 like some other languages). The <code>[#]</code> implies that the element printed to the right is the <code>#</code> element of the vector. This is a good reminder of how to extract values from an atomic vector.</p>
<p>As an example, here we extract from a built-in R object called letters that is a vector of length 26 containing the letters of the alphabet.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1">letters <span class="co">#built-in vector</span></a></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1">letters[<span class="dv">1</span>] <span class="co">#R starts counting at 1!</span></a></code></pre></div>
<pre><code>## [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1">letters[<span class="dv">26</span>]</a></code></pre></div>
<pre><code>## [1] &quot;z&quot;</code></pre>
<p>To obtain more than one element you can ‘feed’ in a vector of indices to that you’d like to return.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1">letters[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]</a></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1">letters[<span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>)]</a></code></pre></div>
<pre><code>## [1] &quot;e&quot; &quot;j&quot; &quot;o&quot; &quot;t&quot; &quot;y&quot;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb91-2" title="2">letters[x]</a></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;e&quot;</code></pre>
<p>If you’d like to return all values except a certain subset, you can use negative indices.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1">letters[<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)]</a></code></pre></div>
<pre><code>##  [1] &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot;
## [20] &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb95-2" title="2">letters[<span class="op">-</span>x]</a></code></pre></div>
<pre><code>##  [1] &quot;c&quot; &quot;d&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;u&quot; &quot;v&quot;
## [20] &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
</div>
<div id="matrices-2d" class="section level4">
<h4><span class="header-section-number">1.3.5.2</span> Matrices (2D)</h4>
<p>For rectangular data like a matrix you can return rectangular subsets using square brackets with a comma <code>[ , ]</code>. Notice default row and column names when R prints a matrix!</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1">mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">20</span><span class="op">:</span><span class="dv">17</span>), <span class="dt">ncol =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb97-2" title="2">mat</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1   20
## [2,]    2   19
## [3,]    3   18
## [4,]    4   17</code></pre>
<p>This is a nice reminder of how to index a matrix. The value prior to the columns represents which row(s) you want to return and the value after the comma which column(s). If an index is left blank then all of that corresponding dimension (row or column) is returned.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" title="1">mat[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>), ]</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    2   19
## [2,]    4   17</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" title="1">mat[, <span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1">mat[<span class="dv">2</span>, ]</a></code></pre></div>
<pre><code>## [1]  2 19</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1">mat[<span class="dv">2</span>, <span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Notice that R simplifies the result where possible. That is, returns an atomic vector if you have only 1 dimension and a matrix if two. This can be changed by adding an additional argument to the <code>[</code> function.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1">mat[ , <span class="dv">1</span>, drop =<span class="st"> </span><span class="ot">FALSE</span>]</a></code></pre></div>
<pre><code>##      [,1]
## [1,]    1
## [2,]    2
## [3,]    3
## [4,]    4</code></pre>
<p>Also, if you only give a single value in the <code>[]</code> then R uses the count of the value in the matrix. Counts go down columns first.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1">mat[<span class="dv">5</span>]</a></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>If your matrix has column names associated with it, you can also use those to return columns of interest. To add column names we can look run <code>help(matrix)</code> to learn how! Notice the <code>dimnames</code> argument. You can specify names for the rows and columns by using a list with two vectors. The first vector indicating row names and the second column names. If we don’t want to give row names we can give a NULL (a special value in R that is used for undefined values - here giving no specification of row names). We can do this and give a character vector for the column names.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" title="1">mat&lt;-<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">20</span><span class="op">:</span><span class="dv">17</span>), <span class="dt">ncol =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb111-2" title="2">            <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="ot">NULL</span>, <span class="kw">c</span>(<span class="st">&quot;First&quot;</span>, <span class="st">&quot;Second&quot;</span>))</a>
<a class="sourceLine" id="cb111-3" title="3">            )</a>
<a class="sourceLine" id="cb111-4" title="4">mat</a></code></pre></div>
<pre><code>##      First Second
## [1,]     1     20
## [2,]     2     19
## [3,]     3     18
## [4,]     4     17</code></pre>
<p>Now we can request columns be using a single name or a character vector of names.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" title="1">mat[, <span class="st">&quot;First&quot;</span>]</a></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<p>To return all but certain parts of a matrix you can still use negative indices but note that this won’t work with column names.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" title="1">mat[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="op">-</span><span class="st">&quot;First&quot;</span>]</a></code></pre></div>
<pre><code>## Error in -&quot;First&quot;: invalid argument to unary operator</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" title="1">mat[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="st">&quot;First&quot;</span>]</a></code></pre></div>
<pre><code>## [1] 2 4</code></pre>
</div>
<div id="data-frames-2d" class="section level4">
<h4><span class="header-section-number">1.3.5.3</span> Data Frames (2D)</h4>
<p>Since a data frame is also a rectangular data object you can return rectangular subsets using square brackets with a comma <code>[ , ]</code>!</p>
<p>As an example, we’ll subset the built-in <code>iris</code> data frame. To get an idea about this object we can run <code>str(iris)</code>.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" title="1"><span class="kw">str</span>(iris)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>We can see this is a data frame with a few columns, four are numeric and one is a factor (a special type of character vector essentially - these will be covered when we discuss plotting).</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1">iris[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]</a></code></pre></div>
<pre><code>##   Sepal.Width Petal.Length Petal.Width
## 1         3.5          1.4         0.2
## 2         3.0          1.4         0.2
## 3         3.2          1.3         0.2
## 4         3.1          1.5         0.2</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" title="1">iris[<span class="dv">1</span>, ]</a></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" title="1">iris[, <span class="dv">1</span>]</a></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7
##  [ reached getOption(&quot;max.print&quot;) -- omitted 50 entries ]</code></pre>
<p>Notice the simplification done when a single column is selected. R will simplify to a vector unless <code>drop = FALSE</code> is included as done in the matrix section. (The simplification doesn’t occur when a single row is selected because data frames are actually lists - we’ll discuss this more in the list section!)</p>
<p>You can use columns names to subset as well.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" title="1">iris[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span> , <span class="kw">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>, <span class="st">&quot;Species&quot;</span>)]</a></code></pre></div>
<pre><code>##    Sepal.Length Species
## 1           5.1  setosa
## 2           4.9  setosa
## 3           4.7  setosa
## 4           4.6  setosa
## 5           5.0  setosa
## 6           5.4  setosa
## 7           4.6  setosa
## 8           5.0  setosa
## 9           4.4  setosa
## 10          4.9  setosa</code></pre>
<p>The most common way to access a single column is to use the dollar sign operator.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" title="1">iris<span class="op">$</span>Sepal.Length</a></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7
##  [ reached getOption(&quot;max.print&quot;) -- omitted 50 entries ]</code></pre>
<p>A nice benefit of using RStudio is that column names will be filled in automatically as you type. In your console do the following:</p>
<ul>
<li>Type <code>iris$</code><br />
</li>
<li>If no choices - hit tab</li>
<li>Scroll up and down or continue typing to highlight the column of interest<br />
</li>
<li>Hit tab again to choose</li>
</ul>
</div>
<div id="lists-1d" class="section level4">
<h4><span class="header-section-number">1.3.5.4</span> Lists (1D)</h4>
<p>As a list is a 1D data object we can use single square brackets <code>[ ]</code> for multiple list elements.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" title="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;HI&quot;</span>, <span class="kw">c</span>(<span class="dv">10</span><span class="op">:</span><span class="dv">20</span>), <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb131-2" title="2">x</a></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;HI&quot;
## 
## [[2]]
##  [1] 10 11 12 13 14 15 16 17 18 19 20
## 
## [[3]]
## [1] 1</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" title="1">x[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [[1]]
##  [1] 10 11 12 13 14 15 16 17 18 19 20
## 
## [[2]]
## [1] 1</code></pre>
<p>We can use double square brackets <code>[[ ]]</code> (or <code>[ ]</code>) to return a single list element. The major difference is in whether or not a list with the element chosen is returned or just the element itself. <code>[[</code> will return just the element requested.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" title="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;HI&quot;</span>, <span class="kw">c</span>(<span class="dv">10</span><span class="op">:</span><span class="dv">20</span>), <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb135-2" title="2">x[<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;HI&quot;</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1">x[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>## [1] &quot;HI&quot;</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" title="1">x[[<span class="dv">2</span>]]</a></code></pre></div>
<pre><code>##  [1] 10 11 12 13 14 15 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" title="1">x[[<span class="dv">2</span>]][<span class="dv">4</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>## [1] 13 14</code></pre>
<p>Recall we could name our list elements. If they are named we can use the <code>$</code> similar to a data frame.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" title="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;HI&quot;</span>, <span class="kw">c</span>(<span class="dv">10</span><span class="op">:</span><span class="dv">20</span>), <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb143-2" title="2"><span class="kw">str</span>(x)</a></code></pre></div>
<pre><code>## List of 3
##  $ : chr &quot;HI&quot;
##  $ : int [1:11] 10 11 12 13 14 15 16 17 18 19 ...
##  $ : num 1</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" title="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">First =</span> <span class="st">&quot;Hi&quot;</span>, <span class="dt">Second =</span> <span class="kw">c</span>(<span class="dv">10</span><span class="op">:</span><span class="dv">20</span>), <span class="dt">Third =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb145-2" title="2">x<span class="op">$</span>Second</a></code></pre></div>
<pre><code>##  [1] 10 11 12 13 14 15 16 17 18 19 20</code></pre>
<p>Under the hood a data frame is just a <em>list</em> of equal length vectors!</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" title="1"><span class="kw">str</span>(x)</a></code></pre></div>
<pre><code>## List of 3
##  $ First : chr &quot;Hi&quot;
##  $ Second: int [1:11] 10 11 12 13 14 15 16 17 18 19 ...
##  $ Third : num 1</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" title="1"><span class="kw">str</span>(iris)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" title="1"><span class="kw">typeof</span>(x)</a></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" title="1"><span class="kw">typeof</span>(iris)</a></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>This means we can index a data frame in a similar way to how we index a list if we want.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" title="1">iris[[<span class="dv">2</span>]]</a></code></pre></div>
<pre><code>##   [1] 3.5 3.0 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 3.7 3.4 3.0 3.0 4.0 4.4 3.9 3.5
##  [19] 3.8 3.8 3.4 3.7 3.6 3.3 3.4 3.0 3.4 3.5 3.4 3.2 3.1 3.4 4.1 4.2 3.1 3.2
##  [37] 3.5 3.6 3.0 3.4 3.5 2.3 3.2 3.5 3.8 3.0 3.8 3.2 3.7 3.3 3.2 3.2 3.1 2.3
##  [55] 2.8 2.8 3.3 2.4 2.9 2.7 2.0 3.0 2.2 2.9 2.9 3.1 3.0 2.7 2.2 2.5 3.2 2.8
##  [73] 2.5 2.8 2.9 3.0 2.8 3.0 2.9 2.6 2.4 2.4 2.7 2.7 3.0 3.4 3.1 2.3 3.0 2.5
##  [91] 2.6 3.0 2.6 2.3 2.7 3.0 2.9 2.9 2.5 2.8
##  [ reached getOption(&quot;max.print&quot;) -- omitted 50 entries ]</code></pre>
<p>Lastly, one nice thing about lists (and data frames) is that you can use partial matching with <code>[[</code> and <code>$</code>. That is, you don’t need to specify the full column name as long as you’ve specified enough characters as to be clear which column you are referring to.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" title="1">iris<span class="op">$</span>Sp[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>##  [1] setosa setosa setosa setosa setosa setosa setosa setosa setosa setosa
## Levels: setosa versicolor virginica</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" title="1">iris[[<span class="st">&quot;Petal.Len&quot;</span>, exact =<span class="st"> </span><span class="ot">FALSE</span>]]</a></code></pre></div>
<pre><code>##   [1] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 1.5 1.6 1.4 1.1 1.2 1.5 1.3 1.4
##  [19] 1.7 1.5 1.7 1.5 1.0 1.7 1.9 1.6 1.6 1.5 1.4 1.6 1.6 1.5 1.5 1.4 1.5 1.2
##  [37] 1.3 1.4 1.3 1.5 1.3 1.3 1.3 1.6 1.9 1.4 1.6 1.4 1.5 1.4 4.7 4.5 4.9 4.0
##  [55] 4.6 4.5 4.7 3.3 4.6 3.9 3.5 4.2 4.0 4.7 3.6 4.4 4.5 4.1 4.5 3.9 4.8 4.0
##  [73] 4.9 4.7 4.3 4.4 4.8 5.0 4.5 3.5 3.8 3.7 3.9 5.1 4.5 4.5 4.7 4.4 4.1 4.0
##  [91] 4.4 4.6 4.0 3.3 4.2 4.2 4.2 4.3 3.0 4.1
##  [ reached getOption(&quot;max.print&quot;) -- omitted 50 entries ]</code></pre>
<p>This is less important now that RStudio can auto-complete long column names.</p>
</div>
</div>
<div id="basics-of-r-recap" class="section level3">
<h3><span class="header-section-number">1.3.6</span> Basics of R Recap</h3>
<ul>
<li><p>RStudio IDE (Integrated Development Environment)</p></li>
<li><p>R Objects and Classes</p></li>
<li><p>Data Objects &amp; Basic Manipulation</p></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Dimension</th>
<th>Homogeneous</th>
<th>Heterogeneous</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1d</td>
<td>Atomic Vector</td>
<td>List</td>
</tr>
<tr class="even">
<td>2d</td>
<td>Matrix</td>
<td>Data Frame</td>
</tr>
</tbody>
</table>
<p>Basic access via</p>
<ul>
<li><p>Atomic vectors - <code>x[ ]</code></p></li>
<li><p>Matrices - <code>x[ , ]</code></p></li>
<li><p>Data Frames - <code>x[ , ]</code> or <code>x$name</code></p></li>
<li><p>Lists - <code>x[ ]</code>, <code>x[[ ]]</code>, or <code>x$name</code></p></li>
</ul>
</div>
<div id="reading-data-basics" class="section level3">
<h3><span class="header-section-number">1.3.7</span> Reading Data Basics</h3>
<p>When it comes to reading in data, where do we start? Our plan for this section is as follows:</p>
<ul>
<li><p>Look at common raw data formats</p></li>
<li><p>Take a few quick asides: R projects, <code>factors</code>, and R packages</p></li>
<li><p>Read ‘clean’ delimited data</p></li>
<li><p>Read Excel, SAS, &amp; SPSS data</p></li>
<li><p>Resources for JSON data, XML data, databases, and APIs</p></li>
</ul>
<p><strong>How to read in data depends on raw/external data type!</strong></p>
<p>We’ll start by focusing on delimited data.</p>
<ul>
<li>Delimiter - Character (such as a<code>,</code>) that separates data entries</li>
</ul>
<p><img src="img/delimitedData.png" width="80%" style="display: block; margin: auto;" /></p>
<p>To read in data we’ll need functions to do so. When you open R a few <code>packages</code> are loaded.</p>
<p><img src="img/loadR.PNG" width="20%" style="display: block; margin: auto;" /></p>
<p>R Packages:</p>
<ul>
<li><p>Collection of functions/datasets/etc. in one place</p></li>
<li><p>Packages exist to do almost anything</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">List of CRAN</a> approved packages on R’s website</p></li>
<li><p>Plenty of other packages on places like GitHub</p></li>
</ul>
<p>The <code>utils</code> package that automatically loads has a <em>family</em> of <code>read.</code> functions ready for use! Reading data with these functions is often referred to as reading with a standard R or base R method.</p>
<p>Function and purpose:</p>
<table>
<thead>
<tr class="header">
<th>Type of Delimeter</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Comma</td>
<td><code>read.csv()</code></td>
</tr>
<tr class="even">
<td>Semicolon (<code>,</code> for decimal)</td>
<td><code>read.csv2()</code></td>
</tr>
<tr class="odd">
<td>Tab</td>
<td><code>read.delim()</code></td>
</tr>
<tr class="even">
<td>White Space/General</td>
<td><code>read.table(sep = "")</code></td>
</tr>
</tbody>
</table>
<p>Each of these functions requires a <strong>path</strong> to the file in order to read it in. Let’s read in the ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv">neuralgia.csv</a>’ file. This is a comma separated value file (.csv). This requires the <code>read.csv</code> function.</p>
<p>R locates the file by the path you give it. You can give <em>full path name</em>. For example,</p>
<ul>
<li>ex: C:/Users/jbpost2/repos/StatisticalMethods/datasets/neuralgia.csv<br />
</li>
<li>ex: C:\\Users\\jbpost2\\repos\\StatisticalMethods\\datasets\\neuralgia.csv</li>
</ul>
<p><img src="img/pathVis.PNG" width="80%" style="display: block; margin: auto;" /></p>
<p>Notice that a double <code>\</code> is needed because <code>\</code> is an escape character in R so <code>\\</code> is really read as <code>\</code>.</p>
<p>Ok, let’s read in the neuralgia csv file using <code>read.csv</code>.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" title="1">neuralgiaData &lt;-<span class="st"> </span><span class="kw">read.csv</span>(</a>
<a class="sourceLine" id="cb161-2" title="2">           <span class="st">&quot;C:/Users/jbpost2/repos/StatisticalMethods/datasets/neuralgia.csv&quot;</span></a>
<a class="sourceLine" id="cb161-3" title="3">           )</a></code></pre></div>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" title="1"><span class="kw">head</span>(neuralgiaData)</a></code></pre></div>
<pre><code>##   Treatment Sex Age Duration Pain
## 1         P   F  68        1   No
## 2         B   M  74       16   No
## 3         P   F  67       30   No
## 4         P   M  66       26  Yes
## 5         B   F  67       28   No
## 6         B   F  77       16   No</code></pre>
<p>Pretty simple if the data is nicely formatted! Using a full local path is not recommended though! Doing so makes it difficult to share code without having to go in and change the paths. Instead, you can change the <em>working directory</em> R is using. That is, the folder by default R is ‘looking’ for files. Then we can supply a <strong>relative</strong> path. As long as other users have the same folder structure as you (say if you are using a github repo), no changes need to be made for them to run the code!</p>
<p>We can determine the working directory using <code>getwd</code>.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" title="1"><span class="kw">getwd</span>()</a></code></pre></div>
<pre><code>## [1] &quot;C:/Users/jbpost2/repos/StatisticalMethods/software/R&quot;</code></pre>
<p>This can be changed using <code>setwd</code>.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" title="1"><span class="kw">setwd</span>(<span class="st">&quot;C:/Users/jbpost2/repos/StatisticalMethods/datasets&quot;</span>)</a>
<a class="sourceLine" id="cb166-2" title="2"><span class="co">#or</span></a>
<a class="sourceLine" id="cb166-3" title="3"><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">jbpost2</span><span class="ch">\\</span><span class="st">repos</span><span class="ch">\\</span><span class="st">StatisticalMethods</span><span class="ch">\\</span><span class="st">datasets&quot;</span>)</a></code></pre></div>
<p>The working directory can also be changed via the menus in RStudio.</p>
<p><img src="img/setwd.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Another way to supply a path is via a URL. This is really handy if you have a place to host your datasets!</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" title="1">neuralgiaData &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv&quot;</span>)</a></code></pre></div>
<p>To recap, to read a csv file you can</p>
<ul>
<li><p>Use full local path (not recommended)</p></li>
<li><p>Use relative path</p>
<ul>
<li>set working directory with <code>setwd()</code></li>
</ul></li>
<li><p>Pull from a URL</p></li>
</ul>
</div>
<div id="quick-aside-rstudio-project" class="section level3">
<h3><span class="header-section-number">1.3.8</span> Quick Aside: RStudio Project</h3>
<p>Often we have many files associated with an analysis. When working on multiple undertakings things get cluttered in R… With each analysis we may want to associate different</p>
<pre><code>+ environments  
+ histories  
+ working directories  
+ source documents.  </code></pre>
<p>The “Project” feature in R Studio allows us to easily do this! To create you can use the drop down menus.</p>
<p><img src="img/project.PNG" width="80%" style="display: block; margin: auto;" /></p>
<p>Now you can easily switch between analyses by using “File –&gt; Open Project” or by using the little drop down menu in the top right of RStudio.</p>
</div>
<div id="quick-aside-factors" class="section level3">
<h3><span class="header-section-number">1.3.9</span> Quick Aside: Factors</h3>
<p>As mentioned above there are <code>read.</code> functions for many different types of delimited data. These functions work really well but there are a few areas they could be improved.</p>
<ul>
<li>A poor default function behavior as strings are read as <code>factors</code></li>
</ul>
<p>Understanding factors is important enough to warrant a quick discussion. Let’s look at the structure of our neuralgiaData object we read in with <code>read.csv</code>.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" title="1"><span class="kw">str</span>(neuralgiaData)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    60 obs. of  5 variables:
##  $ Treatment: Factor w/ 3 levels &quot;A&quot;,&quot;B&quot;,&quot;P&quot;: 3 2 3 3 2 2 1 2 2 1 ...
##  $ Sex      : Factor w/ 2 levels &quot;F&quot;,&quot;M&quot;: 1 2 1 2 1 1 1 1 1 2 ...
##  $ Age      : int  68 74 67 66 67 77 71 72 76 71 ...
##  $ Duration : int  1 16 30 26 28 16 12 50 9 17 ...
##  $ Pain     : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 2 1 1 1 1 2 2 ...</code></pre>
<p>We can see that all of the character variables are <code>Factor</code> vectors. A factor is a special class of vector with a <code>levels</code> attribute. The levels define all possible values for that variable. This is a great concept for a variable that can only take on certain values such as <code>Day</code> (Monday, Tuesday, …, Sunday). However, if you have a variable like <code>Name</code> that you will eventually add new values (levels) to factors become a bit of a nuisance.</p>
<p>For example, in the neuralgia dataset we may have a fourth treatment we want to add to the <code>Treatment</code> variable. Let’s try to assign the first observation value with a ‘new’ treatment called ‘M’.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" title="1">neuralgiaData<span class="op">$</span>Treatment</a></code></pre></div>
<pre><code>##  [1] P B P P B B A B B A A A B A P A P A P B B A A A B P B B P P A A B B B A P B
## [39] B P P P A B A P P A B P P P B A P A P A B A
## Levels: A B P</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" title="1">neuralgiaData<span class="op">$</span>Treatment[<span class="dv">1</span>] &lt;-<span class="st"> &quot;M&quot;</span></a></code></pre></div>
<pre><code>## Warning in `[&lt;-.factor`(`*tmp*`, 1, value = structure(c(NA, 2L, 3L, 3L, :
## invalid factor level, NA generated</code></pre>
<p>We can see this throws an error because ‘M’ is not one of the levels defined for the variable. To add the new value we have to alter the <code>levels</code> attribute of the factor.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" title="1"><span class="co">#overwrite with another possible level</span></a>
<a class="sourceLine" id="cb175-2" title="2"><span class="kw">levels</span>(neuralgiaData<span class="op">$</span>Treatment) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">levels</span>(neuralgiaData<span class="op">$</span>Treatment), <span class="st">&quot;M&quot;</span>)</a>
<a class="sourceLine" id="cb175-3" title="3"><span class="kw">levels</span>(neuralgiaData<span class="op">$</span>Treatment)</a></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;M&quot;</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" title="1">neuralgiaData<span class="op">$</span>Treatment[<span class="dv">1</span>] &lt;-<span class="st"> &quot;M&quot;</span></a></code></pre></div>
<p>Factors are very useful for plotting as we’ll see later.</p>
<p>For the other issues with the <code>read.</code> family we can look at useful functions from other R packages. R packages deserve a brief discussion as well!</p>
</div>
<div id="quick-aside-r-packages" class="section level3">
<h3><span class="header-section-number">1.3.10</span> Quick Aside: R Packages</h3>
<p>An R package is a collection of functions in one place. There are tons of packages to do most anything. In particular a group of packages called the “<a href="http://tidyverse.org/">TidyVerse</a>” has modernized the use of R for a larger audience. The tidyverse is a package that is a collection of eight R packages that share common philosophies and are designed to work together! One of these packages, <code>readr</code>, is extremely useful for reading in data and remedies the concerns mentioned above about the <code>read.</code> family of functions.</p>
<p>The first time using a package you must ‘install’ the package (download the files). You can do this</p>
<ul>
<li>Using code:</li>
</ul>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</a>
<a class="sourceLine" id="cb178-2" title="2"><span class="co">#can do multiple packages at once</span></a>
<a class="sourceLine" id="cb178-3" title="3"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;readr&quot;</span>, <span class="st">&quot;readxl&quot;</span>, <span class="st">&quot;haven&quot;</span>, <span class="st">&quot;DBI&quot;</span>, <span class="st">&quot;httr&quot;</span>))</a></code></pre></div>
<ul>
<li>Using menus:</li>
</ul>
<p><img src="img/packages.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Note that you can also install packages from local sources (such as a downloaded .zip or .tar) but that isn’t usually required unless you are behind a firewall or R updates and the packages haven’t been updated for that version of R.</p>
<p>The good thing is that you only need to install the packages once! However, this doesn’t mean you have direct access to your package functions or datasets in your R session. <strong>Each R session</strong> you open you need to read in the package using <code>library()</code> or <code>require()</code>.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" title="1"><span class="kw">library</span>(<span class="st">&quot;readr&quot;</span>)</a></code></pre></div>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 3.6.2</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" title="1"><span class="kw">require</span>(<span class="st">&quot;haven&quot;</span>)</a></code></pre></div>
<pre><code>## Loading required package: haven</code></pre>
<pre><code>## Warning: package &#39;haven&#39; was built under R version 3.6.2</code></pre>
<p>These functions are very similar; they both give you direct access to the functions or data in your R session. The difference is that if you try to load a package that doesn’t exist <code>library</code> throws an error where <code>require()</code> returns <code>FALSE</code>.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" title="1"><span class="kw">library</span>(<span class="st">&quot;notAPackage&quot;</span>)</a></code></pre></div>
<pre><code>## Error in library(&quot;notAPackage&quot;): there is no package called &#39;notAPackage&#39;</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" title="1"><span class="kw">require</span>(<span class="st">&quot;notAPackage&quot;</span>)</a></code></pre></div>
<pre><code>## Loading required package: notAPackage</code></pre>
<pre><code>## Warning in library(package, lib.loc = lib.loc, character.only = TRUE,
## logical.return = TRUE, : there is no package called &#39;notAPackage&#39;</code></pre>
<p>Now is a good time to install the <code>tidyverse</code> package if you haven’t already.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</a></code></pre></div>
<p>The functions in the <code>tidyverse</code> generally have</p>
<ul>
<li><p>Fast code</p></li>
<li><p>Easy syntax</p></li>
<li><p>Good default settings on functions</p></li>
<li><p>A nice set of examples and vignettes</p></li>
</ul>
<p>Read the package into your R session.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" title="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 3.6.2</code></pre>
<pre><code>## -- Attaching packages --------</code></pre>
<pre><code>## v ggplot2 3.2.1     v dplyr   0.8.3
## v tibble  2.1.3     v stringr 1.4.0
## v tidyr   1.0.0     v forcats 0.4.0
## v purrr   0.3.3</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.6.2</code></pre>
<pre><code>## Warning: package &#39;tibble&#39; was built under R version 3.6.2</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 3.6.2</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 3.6.2</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.6.2</code></pre>
<pre><code>## Warning: package &#39;stringr&#39; was built under R version 3.6.2</code></pre>
<pre><code>## Warning: package &#39;forcats&#39; was built under R version 3.6.2</code></pre>
<pre><code>## -- Conflicts -----------------
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>You’ll likely see a message about functions being masked. This implies that one of the functions just loaded has a function under the same name as a function that already exists. If you type <code>help(filter)</code>, R will now give you an option of which <code>filter</code> to look at. R uses the most recently loaded function and “masks” the old ones. You can access specific package’s functions using <code>::</code>. This allows you to call functions without loading a full library.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" title="1">readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Treatment = col_character(),
##   Sex = col_character(),
##   Age = col_double(),
##   Duration = col_double(),
##   Pain = col_character()
## )</code></pre>
<pre><code>## # A tibble: 60 x 5
##   Treatment Sex     Age Duration Pain 
##   &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;
## 1 P         F        68        1 No   
## 2 B         M        74       16 No   
## 3 P         F        67       30 No   
## 4 P         M        66       26 Yes  
## 5 B         F        67       28 No   
## # ... with 55 more rows</code></pre>
</div>
<div id="reading-delimited-data" class="section level3">
<h3><span class="header-section-number">1.3.11</span> Reading Delimited Data</h3>
<p>Again the <code>read.</code> functions exist to read in many different types of delimited data. These functions work really well but there are a few areas they could be improved.</p>
<ul>
<li><p>A poor default function behavior as strings are read as <code>factors</code></p></li>
<li><p>Raw data row &amp; column names can be troublesome</p></li>
<li><p>Slow processing (relatively speaking)</p></li>
<li><p>(Slightly) different behavior on different computers</p></li>
</ul>
<p>Functions from the <code>tidyverse</code> (and <code>readr</code> in particular) remedy all of these!</p>
<table>
<thead>
<tr class="header">
<th>Type of Delimeter</th>
<th><code>utils</code> Function</th>
<th><code>readr</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Comma</td>
<td><code>read.csv()</code></td>
<td><code>read_csv()</code></td>
</tr>
<tr class="even">
<td>Semicolon (<code>,</code> for decimal)</td>
<td><code>read.csv2()</code></td>
<td><code>read_csv2()</code></td>
</tr>
<tr class="odd">
<td>Tab</td>
<td><code>read.delim()</code></td>
<td><code>read_tsv()</code></td>
</tr>
<tr class="even">
<td>General</td>
<td><code>read.table(sep = "")</code></td>
<td><code>read_delim()</code></td>
</tr>
<tr class="odd">
<td>White Space</td>
<td><code>read.table(sep = "")</code></td>
<td><code>read_table()</code> <code>read_table2()</code></td>
</tr>
</tbody>
</table>
<p>Let’s reread the ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv">neuralgia.csv</a>’ file using <code>read_csv</code> from the <code>readr</code> package.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" title="1">neuralgiaData &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Treatment = col_character(),
##   Sex = col_character(),
##   Age = col_double(),
##   Duration = col_double(),
##   Pain = col_character()
## )</code></pre>
<p>You can see that the package displays a bit of information about how the data was parsed.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb207-1" title="1">neuralgiaData</a></code></pre></div>
<pre><code>## # A tibble: 60 x 5
##   Treatment Sex     Age Duration Pain 
##   &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;
## 1 P         F        68        1 No   
## 2 B         M        74       16 No   
## 3 P         F        67       30 No   
## 4 P         M        66       26 Yes  
## 5 B         F        67       28 No   
## # ... with 55 more rows</code></pre>
<p>You’ll also notice the fancy printing. This gives a quick check for the column type you have, which is a basic data validation step. The <code>tidyverse</code> has a special class of data frames called <code>tibbles</code>.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" title="1"><span class="kw">class</span>(neuralgiaData)</a></code></pre></div>
<pre><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;         &quot;data.frame&quot;</code></pre>
<p>The behavior of <code>tibbles</code> is slightly different than that of a standard <code>data frame</code>. One is the printing method. The other major difference is that <code>tibbles</code> don’t simplify.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" title="1">neuralgiaData[,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## # A tibble: 60 x 1
##   Treatment
##   &lt;chr&gt;    
## 1 P        
## 2 B        
## 3 P        
## 4 P        
## 5 B        
## # ... with 55 more rows</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" title="1"><span class="kw">as.data.frame</span>(neuralgiaData)[,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>##  [1] &quot;P&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [20] &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;B&quot;
## [39] &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [58] &quot;A&quot; &quot;B&quot; &quot;A&quot;</code></pre>
<p>As this behavior can cause some issues with functions that are expecting a vector it is useful to force simplification sometimes. You can either use the <code>pull</code> function or the <code>$</code> operator to return a column as a vector.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" title="1"><span class="kw">pull</span>(neuralgiaData, <span class="dv">1</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;P&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [20] &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;B&quot;
## [39] &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [58] &quot;A&quot; &quot;B&quot; &quot;A&quot;</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" title="1">neuralgiaData<span class="op">$</span>Treatment </a></code></pre></div>
<pre><code>##  [1] &quot;P&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [20] &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;B&quot;
## [39] &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [58] &quot;A&quot; &quot;B&quot; &quot;A&quot;</code></pre>
<p>One question you may have about the column types is, how did R determine the column types? The help file for <code>read_csv</code> tells us that it checks the first 1000 rows of data and uses those to figure out the type of data. You can of course override this default behavior.</p>
<p>Some useful inputs you may want to change when reading in data are</p>
<ul>
<li><p><code>skip = 0</code></p></li>
<li><p><code>col_names = TRUE</code></p></li>
<li><p><code>na = c("", "NA")</code></p></li>
</ul>
<p>These allow you to skip lines of data, specify column names, and define what represents a missing value in the raw data (<code>NA</code> is the missing data indicator in R).</p>
<p>Generally, reading <em>clean</em> delimited data is pretty easy with the <code>read_</code> family of functions! Let’s go through a few examples.</p>
<p>First, let’s read in the space delimited file ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/chemical.txt">chemical.txt</a>’. Since this is space delimited we’ll use <code>read_table</code>.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" title="1"><span class="kw">read_table</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/chemical.txt&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   `temp conc time percent` = col_character()
## )</code></pre>
<pre><code>## # A tibble: 19 x 1
##    `temp conc time percent`
##    &lt;chr&gt;                   
##  1 -1 -1 -1 45.9           
##  2 1 -1 -1 60.6            
##  3 -1 1 -1 57.5            
##  4 1 1 -1 58.6             
##  5 -1 -1 1 53.3            
##  6 1 -1 1 58               
##  7 -1 1 1 58.8             
##  8 1 1 1 52.4              
##  9 -2 0 0 46.9             
## 10 2 0 0 55.4              
## 11 0 -2 0 55               
## 12 0 2 0 57.5              
## 13 0 0 -2 56.3             
## 14 0 0 2 58.9              
## 15 0 0 0 56.9              
## 16 2 -3 0 61.1             
## 17 2 -3 0 62.9             
## 18 -1.4 2.6 0.7 60         
## 19 -1.4 2.6 0.7 60.6</code></pre>
<p>Next, let’s read in the tab delimited file ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/crabs.txt">crabs.txt</a>’. Since this is tab delimited we’ll use <code>read_tsv</code>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb222-1" title="1"><span class="kw">read_tsv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/crabs.txt&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   color = col_double(),
##   spine = col_double(),
##   width = col_double(),
##   satell = col_double(),
##   weight = col_double(),
##   y = col_double()
## )</code></pre>
<pre><code>## # A tibble: 173 x 6
##   color spine width satell weight     y
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1     3     3  28.3      8   3050     1
## 2     4     3  22.5      0   1550     0
## 3     2     1  26        9   2300     1
## 4     4     3  24.8      0   2100     0
## 5     4     3  26        4   2600     1
## # ... with 168 more rows</code></pre>
<p>Lastly, let’s read in the <code>&gt;</code> delimited file ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/umps2012.txt">umps2012.txt</a>’. As this isn’t a standard delimiter we’ll use <code>read_delim</code> and specify the <code>delim =</code> input. However, this file doesn’t contain column names in the raw data. The columns represent Year, Month, Day, Home, Away, and HPUmpire. The column names can be specified using the <code>col_names</code> input and specifying them with a character vector.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" title="1"><span class="kw">read_delim</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/umps2012.txt&quot;</span>, <span class="dt">delim =</span> <span class="st">&quot;&gt;&quot;</span>,</a>
<a class="sourceLine" id="cb225-2" title="2">           <span class="dt">col_names =</span> <span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Day&quot;</span>, <span class="st">&quot;Home&quot;</span>, <span class="st">&quot;Away&quot;</span>, <span class="st">&quot;HPUmpire&quot;</span>))</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Year = col_double(),
##   Month = col_double(),
##   Day = col_double(),
##   Home = col_character(),
##   Away = col_character(),
##   HPUmpire = col_character()
## )</code></pre>
<pre><code>## # A tibble: 2,359 x 6
##    Year Month   Day Home  Away  HPUmpire        
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;           
## 1  2012     4    12 MIN   LAA   D.J. Reyburn    
## 2  2012     4    12 SD    ARI   Marty Foster    
## 3  2012     4    12 WSH   CIN   Mike Everitt    
## 4  2012     4    12 PHI   MIA   Jeff Nelson     
## 5  2012     4    12 CHC   MIL   Fieldin Culbreth
## # ... with 2,354 more rows</code></pre>
<div id="non-standard-data" class="section level4">
<h4><span class="header-section-number">1.3.11.1</span> Non-Standard Data</h4>
<p>To read in tricky, non-standard data there are a few functions that can help.</p>
<ul>
<li><p><code>read_file</code> - reads an entire file into a single string</p></li>
<li><p><code>read_lines</code> - reads a file into a character vector with one element per line</p></li>
</ul>
<p>These are often parsed with <code>regular expressions</code>.</p>
</div>
</div>
<div id="excel-data" class="section level3">
<h3><span class="header-section-number">1.3.12</span> Excel data</h3>
<p>Next we’ll cover reading data from Excel files (<code>readxl</code> package), SAS datasets (<code>haven</code> package), and SPSS files (<code>haven</code> package).</p>
<table>
<thead>
<tr class="header">
<th>Type of file</th>
<th>Package</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Delimited</td>
<td><code>readr</code></td>
<td><code>read_csv()</code>, <code>read_tsv()</code>,<code>read_table()</code>, <code>read_delim()</code></td>
</tr>
<tr class="even">
<td>Excel (.xls,.xlsx)</td>
<td><code>readxl</code></td>
<td><code>read_excel()</code></td>
</tr>
<tr class="odd">
<td>SAS (.sas7bdat)</td>
<td><code>haven</code></td>
<td><code>read_sas()</code></td>
</tr>
<tr class="even">
<td>SPSS (.sav)</td>
<td><code>haven</code></td>
<td><code>read_spss()</code></td>
</tr>
</tbody>
</table>
<p>Let’s read in the <a href="https://www4.stat.ncsu.edu/~online/datasets/censusEd.xlsx">censusEd.xlsx</a> file.This can be done with the <code>read_excel()</code> from <code>readxl</code> package! This funcion reads in both xls and xlsx files. It detects the format from the file extension given in the path name. One issue is that excel files cannot be read from the web so they do need to be downloaded locally.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" title="1"><span class="co">#install package if necessary</span></a>
<a class="sourceLine" id="cb228-2" title="2"><span class="kw">library</span>(readxl)</a></code></pre></div>
<pre><code>## Warning: package &#39;readxl&#39; was built under R version 3.6.2</code></pre>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" title="1"><span class="co">#reads first sheet by default</span></a>
<a class="sourceLine" id="cb230-2" title="2">edData &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;../../datasets/censusEd.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb230-3" title="3">edData</a></code></pre></div>
<pre><code>## # A tibble: 3,198 x 42
##   Area_name STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F
##   &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
## 1 UNITED S~ 00000          0   40024299 0000        0000                 0
## 2 ALABAMA   01000          0     733735 0000        0000                 0
## 3 Autauga,~ 01001          0       6829 0000        0000                 0
## 4 Baldwin,~ 01003          0      16417 0000        0000                 0
## 5 Barbour,~ 01005          0       5071 0000        0000                 0
## # ... with 3,193 more rows, and 35 more variables: EDU010188D &lt;dbl&gt;,
## #   EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;, EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;,
## #   EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;, EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;,
## #   EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;, EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;,
## #   EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;, EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;,
## #   EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;, EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;,
## #   EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;, EDU010194F &lt;dbl&gt;, EDU010194D &lt;dbl&gt;,
## #   EDU010194N1 &lt;chr&gt;, EDU010194N2 &lt;chr&gt;, EDU010195F &lt;dbl&gt;, EDU010195D &lt;dbl&gt;,
## #   EDU010195N1 &lt;chr&gt;, EDU010195N2 &lt;chr&gt;, EDU010196F &lt;dbl&gt;, EDU010196D &lt;dbl&gt;,
## #   EDU010196N1 &lt;chr&gt;, EDU010196N2 &lt;chr&gt;</code></pre>
<p>If you want to read in a sheet other than the first sheet, you can do so with the <code>sheet =</code> argument. To look at the available sheets without opening in Excel you can use the <code>excel_sheets</code> function.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" title="1"><span class="kw">excel_sheets</span>(<span class="st">&quot;../../datasets/censusEd.xlsx&quot;</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;EDU01A&quot; &quot;EDU01B&quot; &quot;EDU01C&quot; &quot;EDU01D&quot; &quot;EDU01E&quot; &quot;EDU01F&quot; &quot;EDU01G&quot; &quot;EDU01H&quot;
##  [9] &quot;EDU01I&quot; &quot;EDU01J&quot;</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" title="1"><span class="kw">read_excel</span>(<span class="st">&quot;../../datasets/censusEd.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="st">&quot;EDU01D&quot;</span>)</a></code></pre></div>
<p>There are also ways to specify which cells to read in with the <code>range =</code> argument. You can select cells that are contiguous only (next to each other).</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" title="1">edData &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;../../datasets/censusEd.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="st">&quot;EDU01A&quot;</span>, </a>
<a class="sourceLine" id="cb235-2" title="2">                   <span class="dt">range =</span> <span class="kw">cell_cols</span>(<span class="st">&quot;A:D&quot;</span>))</a>
<a class="sourceLine" id="cb235-3" title="3">edData</a></code></pre></div>
<pre><code>## # A tibble: 3,198 x 4
##   Area_name     STCOU EDU010187F EDU010187D
##   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1 UNITED STATES 00000          0   40024299
## 2 ALABAMA       01000          0     733735
## 3 Autauga, AL   01001          0       6829
## 4 Baldwin, AL   01003          0      16417
## 5 Barbour, AL   01005          0       5071
## # ... with 3,193 more rows</code></pre>
</div>
<div id="sas-data" class="section level3">
<h3><span class="header-section-number">1.3.13</span> SAS Data</h3>
<p>SAS datasets have a file extension of ‘.sas7bdat’. Let’s read in the <a href="https://www4.stat.ncsu.edu/~online/datasets/smoke2003.sas7bdat">smoke2003.sas7bdat</a> dataset. This can be done using the <code>read_sas</code> function from the <code>haven</code> package. As .sas7bdat files are pretty structured there aren’t many options to use with this function.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" title="1"><span class="co">#install if necessary</span></a>
<a class="sourceLine" id="cb237-2" title="2"><span class="kw">library</span>(haven)</a>
<a class="sourceLine" id="cb237-3" title="3">smokeData &lt;-<span class="st"> </span><span class="kw">read_sas</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/smoke2003.sas7bdat&quot;</span>)</a>
<a class="sourceLine" id="cb237-4" title="4">smokeData</a></code></pre></div>
<pre><code>## # A tibble: 443 x 54
##    SEQN SDDSRVYR RIDSTATR RIDEXMON RIAGENDR RIDAGEYR RIDAGEMN RIDAGEEX RIDRETH1
##   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 21010        3        2        2        2       52      633      634        3
## 2 21012        3        2        2        1       63      765      766        4
## 3 21048        3        2        1        2       42      504      504        1
## 4 21084        3        2        1        2       57      692      693        3
## 5 21093        3        2        1        2       64      778      778        2
## # ... with 438 more rows, and 45 more variables: RIDRETH2 &lt;dbl&gt;,
## #   DMQMILIT &lt;dbl&gt;, DMDBORN &lt;dbl&gt;, DMDCITZN &lt;dbl&gt;, DMDYRSUS &lt;dbl&gt;,
## #   DMDEDUC3 &lt;dbl&gt;, DMDEDUC2 &lt;dbl&gt;, DMDEDUC &lt;dbl&gt;, DMDSCHOL &lt;dbl&gt;,
## #   DMDMARTL &lt;dbl&gt;, DMDHHSIZ &lt;dbl&gt;, INDHHINC &lt;dbl&gt;, INDFMINC &lt;dbl&gt;,
## #   INDFMPIR &lt;dbl&gt;, RIDEXPRG &lt;dbl&gt;, DMDHRGND &lt;dbl&gt;, DMDHRAGE &lt;dbl&gt;,
## #   DMDHRBRN &lt;dbl&gt;, DMDHREDU &lt;dbl&gt;, DMDHRMAR &lt;dbl&gt;, DMDHSEDU &lt;dbl&gt;,
## #   SIALANG &lt;dbl&gt;, SIAPROXY &lt;dbl&gt;, SIAINTRP &lt;dbl&gt;, FIALANG &lt;dbl&gt;,
## #   FIAPROXY &lt;dbl&gt;, FIAINTRP &lt;dbl&gt;, MIALANG &lt;dbl&gt;, MIAPROXY &lt;dbl&gt;,
## #   MIAINTRP &lt;dbl&gt;, AIALANG &lt;dbl&gt;, WTINT2YR &lt;dbl&gt;, WTMEC2YR &lt;dbl&gt;,
## #   SDMVPSU &lt;dbl&gt;, SDMVSTRA &lt;dbl&gt;, Gender &lt;dbl&gt;, Age &lt;dbl&gt;, IncomeGroup &lt;chr&gt;,
## #   Ethnicity &lt;chr&gt;, Education &lt;dbl&gt;, SMD070 &lt;dbl&gt;, SMQ077 &lt;dbl&gt;, SMD650 &lt;dbl&gt;,
## #   PacksPerDay &lt;dbl&gt;, lbdvid &lt;dbl&gt;</code></pre>
<p>Often times SAS datasets have labels associated with the variable names. These are more descriptive titles that will print in SAS if requested. This is the case here. However, as you see above the labels did not print out. The labels will show if you look at the data set using the <code>View</code> function (or click on smokeData object from environment tab). How do we get to those labels?</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" title="1"><span class="kw">str</span>(smokeData)</a></code></pre></div>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    443 obs. of  54 variables:
##  $ SEQN       : num  21010 21012 21048 21084 21093 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Patient ID&quot;
##  $ SDDSRVYR   : num  3 3 3 3 3 3 3 3 3 3 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Data Release Number&quot;
##  $ RIDSTATR   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Interview/Examination Status&quot;
##  $ RIDEXMON   : num  2 2 1 1 1 2 1 2 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Six month time period&quot;
##  $ RIAGENDR   : num  2 1 2 2 2 2 1 2 1 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Gender 1=M 2=F&quot;
##  $ RIDAGEYR   : num  52 63 42 57 64 63 66 60 65 47 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Age in Years at Exam&quot;
##  $ RIDAGEMN   : num  633 765 504 692 778 763 801 731 786 573 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Age in Months - Recode&quot;
##  $ RIDAGEEX   : num  634 766 504 693 778 763 801 732 787 573 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Exam Age in Months - Recode&quot;
##  $ RIDRETH1   : num  3 4 1 3 2 3 1 3 3 3 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot; Ethnicity 1=MexAm 2=OthHisp 3=OthCauc 4=OthBla 5=Oth&quot;
##  $ RIDRETH2   : num  1 2 3 1 5 1 3 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Linked NH3 Race/Ethnicity - Recode&quot;
##  $ DMQMILIT   : num  2 2 2 2 2 2 2 2 1 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Veteran/Military Status&quot;
##  $ DMDBORN    : num  1 1 1 1 3 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Country of Birth - Recode&quot;
##  $ DMDCITZN   : num  1 1 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Citizenship Status&quot;
##  $ DMDYRSUS   : num  NA NA NA NA 9 NA NA NA NA NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Length of time in US&quot;
##  $ DMDEDUC3   : num  NA NA NA NA NA NA NA NA NA NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Education Level - Children/Youth 6-19&quot;
##  $ DMDEDUC2   : num  4 3 3 4 1 3 1 4 4 4 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Education Level for Over 20&quot;
##  $ DMDEDUC    : num  3 2 2 3 1 2 1 3 3 3 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Education - Recode (old version)&quot;
##  $ DMDSCHOL   : num  NA NA NA NA NA NA NA NA NA NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Now attending school?&quot;
##  $ DMDMARTL   : num  6 6 3 1 2 1 6 3 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Marital Status&quot;
##  $ DMDHHSIZ   : num  3 2 5 2 2 2 2 3 2 6 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Total number of people in the Household&quot;
##  $ INDHHINC   : num  6 2 5 9 2 5 3 6 8 5 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Annual Household Income&quot;
##  $ INDFMINC   : num  4 2 2 9 2 5 3 6 8 4 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Family Income&quot;
##  $ INDFMPIR   : num  1.24 0.89 0.48 4.62 0.61 1.92 1.39 2.21 3.71 1.23 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Family PIR&quot;
##  $ RIDEXPRG   : num  2 NA 2 2 NA NA NA NA NA 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Pregnancy Status at Exam - Recode&quot;
##  $ DMDHRGND   : num  1 1 2 2 2 1 1 2 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Gender&quot;
##  $ DMDHRAGE   : num  54 63 59 57 64 66 66 84 65 50 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Age&quot;
##  $ DMDHRBRN   : num  1 1 1 1 3 1 1 1 1 NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Country of Birth&quot;
##  $ DMDHREDU   : num  1 3 4 4 1 3 1 5 4 NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Education Level&quot;
##  $ DMDHRMAR   : num  6 6 3 1 2 1 6 2 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Marital Status&quot;
##  $ DMDHSEDU   : num  NA NA NA 3 NA 3 NA NA 2 4 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person&#39;s Spouse Education Level&quot;
##  $ SIALANG    : num  1 1 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Language of SP Interview&quot;
##  $ SIAPROXY   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Proxy used in SP Interview?&quot;
##  $ SIAINTRP   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Interpreter used in SP Interview?&quot;
##  $ FIALANG    : num  1 1 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Language of Family Interview&quot;
##  $ FIAPROXY   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Proxy used in Family Interview?&quot;
##  $ FIAINTRP   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Interpreter used in Family Interview?&quot;
##  $ MIALANG    : num  1 NA 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Language of MEC Interview&quot;
##  $ MIAPROXY   : num  2 NA 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Proxy used in MEC Interview?&quot;
##  $ MIAINTRP   : num  2 NA 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Interpreter used in MEC Interview?&quot;
##  $ AIALANG    : num  1 NA 1 1 NA NA NA NA NA 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Language of ACASI Interview&quot;
##  $ WTINT2YR   : num  39599 12629 18792 91437 24475 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Full Sample 2 Year Interview Weight&quot;
##  $ WTMEC2YR   : num  43287 12947 19035 93163 27829 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Full Sample 2 Year MEC Exam Weight&quot;
##  $ SDMVPSU    : num  1 2 2 1 1 2 1 2 1 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Masked Variance Pseudo-PSU&quot;
##  $ SDMVSTRA   : num  29 33 39 34 35 30 34 30 38 34 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Masked Variance Pseudo-Stratum&quot;
##  $ Gender     : num  2 1 2 2 2 2 1 2 1 2 ...
##  $ Age        : num  52 63 42 57 64 63 66 60 65 47 ...
##  $ IncomeGroup: chr  &quot;Less Than 20K&quot; &quot;Less Than 20K&quot; &quot;Less Than 20K&quot; &quot;More Than 20K&quot; ...
##  $ Ethnicity  : chr  &quot;Non-Hispanic Caucasian&quot; &quot;Non-Hispanic Black&quot; &quot;MexicanAmerican &amp; Hispanic&quot; &quot;Non-Hispanic Caucasian&quot; ...
##  $ Education  : num  4 3 3 4 1 3 1 4 4 4 ...
##  $ SMD070     : num  20 20 20 20 20 16 20 20 10 6 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Number of Cagarettes Smoked/day now&quot;
##  $ SMQ077     : num  2 2 1 3 2 2 2 1 3 3 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;How soon after waking do you smoke?&quot;
##  $ SMD650     : num  20 20 20 20 20 10 20 20 10 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Number of Cigarettes/day for last 30 days&quot;
##  $ PacksPerDay: num  1 1 1 1 1 0.5 1 1 0.5 0.05 ...
##  $ lbdvid     : num  16 18 16 17 18 25 9 27 9 25 ...
##  - attr(*, &quot;label&quot;)= chr &quot;DATA2003&quot;</code></pre>
<p>The labels are an <strong>attribute</strong> of the dataset. The attribute is called “label”. These can be accessed using the <code>attr</code> function.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" title="1"><span class="kw">attr</span>(smokeData<span class="op">$</span>SDDSRVYR, <span class="st">&quot;label&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Data Release Number&quot;</code></pre>
</div>
<div id="spss-data" class="section level3">
<h3><span class="header-section-number">1.3.14</span> SPSS Data</h3>
<p>SPSS datasets have a file extension of “.sav”. Let’s read in the <a href="https://www4.stat.ncsu.edu/~online/datasets/bodyFat.sav">bodyFat.sav</a> dataset. This can be done using the <code>read_spss</code> function from the <code>haven</code> package. As with SAS datasets, these are well structured so there aren’t many options to use with the function.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" title="1">bodyFatData &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/bodyFat.sav&quot;</span>)</a>
<a class="sourceLine" id="cb243-2" title="2">bodyFatData</a></code></pre></div>
<pre><code>## # A tibble: 20 x 4
##        y    x1    x2    x3
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  19.5  43.1  29.1  11.9
##  2  24.7  49.8  28.2  22.8
##  3  30.7  51.9  37    18.7
##  4  29.8  54.3  31.1  20.1
##  5  19.1  42.2  30.9  12.9
##  6  25.6  53.9  23.7  21.7
##  7  31.4  58.5  27.6  27.1
##  8  27.9  52.1  30.6  25.4
##  9  22.1  49.9  23.2  21.3
## 10  25.5  53.5  24.8  19.3
## 11  31.1  56.6  30    25.4
## 12  30.4  56.7  28.3  27.2
## 13  18.7  46.5  23    11.7
## 14  19.7  44.2  28.6  17.8
## 15  14.6  42.7  21.3  12.8
## 16  29.5  54.4  30.1  23.9
## 17  27.7  55.3  25.7  22.6
## 18  30.2  58.6  24.6  25.4
## 19  22.7  48.2  27.1  14.8
## 20  25.2  51    27.5  21.1</code></pre>
</div>
<div id="json" class="section level3">
<h3><span class="header-section-number">1.3.15</span> JSON</h3>
<p><strong>JSON</strong> stands for JavaScript Object Notation. This data format is used widely across the internet and in databases. JSON data can represent our usual 2D data or heirarchical data. JSON uses key-value pairs. An example of raw JSON data is given below.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" title="1">{  </a>
<a class="sourceLine" id="cb245-2" title="2">  {  </a>
<a class="sourceLine" id="cb245-3" title="3">    <span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st"> &quot;Barry Sanders&quot;</span>  </a>
<a class="sourceLine" id="cb245-4" title="4">    <span class="st">&quot;games&quot;</span> <span class="op">:</span><span class="st"> </span><span class="dv">153</span>  </a>
<a class="sourceLine" id="cb245-5" title="5">    <span class="st">&quot;position&quot;</span><span class="op">:</span><span class="st"> &quot;RB&quot;</span>  </a>
<a class="sourceLine" id="cb245-6" title="6">  },  </a>
<a class="sourceLine" id="cb245-7" title="7">  {  </a>
<a class="sourceLine" id="cb245-8" title="8">    <span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st"> &quot;Joe Montana&quot;</span>  </a>
<a class="sourceLine" id="cb245-9" title="9">    <span class="st">&quot;games&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">192</span>  </a>
<a class="sourceLine" id="cb245-10" title="10">    <span class="st">&quot;position&quot;</span><span class="op">:</span><span class="st"> &quot;QB&quot;</span>  </a>
<a class="sourceLine" id="cb245-11" title="11">  }  </a>
<a class="sourceLine" id="cb245-12" title="12">} </a></code></pre></div>
<p>There are three major R packages for reading in JSON data:</p>
<ol style="list-style-type: decimal">
<li><p><code>rjson</code></p></li>
<li><p><code>RJSONIO</code></p></li>
<li><p><code>jsonlite</code></p></li>
</ol>
<p>We prefer <code>jsonlite</code>. It has many nice features to simplify reading in data, but these features do make the package’s functions a little slower. The most useful functions from <a href="https://www.rdocumentation.org/packages/jsonlite/versions/1.6"><code>jsonlite</code></a> are summarized below:</p>
<table>
<colgroup>
<col width="18%" />
<col width="81%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>fromJSON</code></td>
<td>Reads JSON data from file path or character string. Converts and simplfies to R object</td>
</tr>
<tr class="even">
<td><code>toJSON</code></td>
<td>Writes R object to JSON object</td>
</tr>
<tr class="odd">
<td><code>stream_in</code></td>
<td>Accepts a <em>file connection</em> - can read streaming JSON data</td>
</tr>
</tbody>
</table>
</div>
<div id="xml" class="section level3">
<h3><span class="header-section-number">1.3.16</span> XML</h3>
<p>XML stands for eXtensible Markup Language. This is another data format that is used widely across the internet and in databases. This type of data can again represent our usual 2D data or heirarchical data. XML uss tags &lt; &gt; similar to HTML. An example of raw XML data is given below.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" title="1"><span class="op">&lt;</span>roster<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-2" title="2"><span class="st">  </span><span class="er">&lt;</span>player<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-3" title="3"><span class="st">    </span><span class="er">&lt;</span>name<span class="op">&gt;</span>Barry Sanders<span class="op">&lt;</span><span class="er">/</span>name<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-4" title="4"><span class="st">    </span><span class="er">&lt;</span>games<span class="op">&gt;</span><span class="dv">153</span><span class="op">&lt;</span><span class="er">/</span>games<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-5" title="5"><span class="st">    </span><span class="er">&lt;</span>position<span class="op">&gt;</span>RB<span class="op">&lt;</span><span class="er">/</span>position<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-6" title="6"><span class="st">  </span><span class="er">&lt;/</span>player<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-7" title="7"><span class="st">  </span><span class="er">&lt;</span>player<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-8" title="8"><span class="st">    </span><span class="er">&lt;</span>name<span class="op">&gt;</span>Joe Montana<span class="op">&lt;</span><span class="er">/</span>name<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-9" title="9"><span class="st">    </span><span class="er">&lt;</span>games<span class="op">&gt;</span><span class="dv">192</span><span class="op">&lt;</span><span class="er">/</span>games<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-10" title="10"><span class="st">    </span><span class="er">&lt;</span>position<span class="op">&gt;</span>QB<span class="op">&lt;</span><span class="er">/</span>position<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-11" title="11"><span class="st">  </span><span class="er">&lt;/</span>player<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb246-12" title="12"><span class="er">&lt;/</span>roster<span class="op">&gt;</span></a></code></pre></div>
<p>The structure of the nodes has parent nodes, child nodes, etc. A basic diagram is given below.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-130"></span>
<img src="img/xmlDiagram.jpg" alt="Source: mysamplecode.com" width="80%" />
<p class="caption">
Figure 1.1: Source: mysamplecode.com
</p>
</div>
<p>There are two major R packages for reading in XML data:</p>
<ol style="list-style-type: decimal">
<li><p><code>XML</code></p></li>
<li><p><code>xml2</code></p></li>
</ol>
<p><code>xml2</code> has all the basic functionality to get data into R. Reading XML data is generally tough since the structure of tags varies by data source! The <a href="https://cran.r-project.org/web/packages/xml2/index.html"><code>xml2</code></a> core functions are:</p>
<table>
<colgroup>
<col width="23%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>read_xml</code></td>
<td>Accepts string, file path, or url argument. Returns XML data object</td>
</tr>
<tr class="even">
<td><code>xml_children</code></td>
<td>Returns list of elements downstream from current node</td>
</tr>
<tr class="odd">
<td><code>xml_parents</code></td>
<td>Returns list of all parent elements from current node</td>
</tr>
<tr class="even">
<td><code>xml_contents</code></td>
<td>Returns list of contents from current node</td>
</tr>
<tr class="odd">
<td><code>as_list</code></td>
<td>Converts XML document or node set to equivalent R list</td>
</tr>
</tbody>
</table>
</div>
<div id="databases" class="section level3">
<h3><span class="header-section-number">1.3.17</span> Databases</h3>
<p>A database is a collection of data, usually a bunch of 2D tables that have keys that connect them. The Database Management System (DBMS) controls how users interact with the database. There is a common and very useful Structured Query Language (SQL - pronounced ess-que-el or sequel) used by relational database management systems (RDBMS) for retrieving and combining datasets from a database.</p>
<p>An example of a relational database structure is given below. Notice there are keys that link different tables.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-131"></span>
<img src="img/lahman.jpg" alt="Source: oreilly.com" width="80%" />
<p class="caption">
Figure 1.2: Source: oreilly.com
</p>
</div>
<p>There are many popular RDBMS. Some are free and some are proprietary. These are often simply referred to as databases.</p>
<ul>
<li><p>Oracle - most popular (cross platform)</p></li>
<li><p>SQL Server - Microsoft product</p></li>
<li><p>DB2 - IBM product</p></li>
<li><p>MySQL (open source) - Not as many features but popular</p></li>
<li><p>PostgreSQL (open source)</p></li>
</ul>
<p>Again there is a <a href="http://www.sqltutorial.org/sql-cheat-sheet/">Basic SQL language</a> that is constant across all these database types.</p>
<p>The common flow to connect to a database using R is:</p>
<ol style="list-style-type: decimal">
<li>Connect to the database with <code>DBI::dbConnect()</code><br />
</li>
</ol>
<ul>
<li>Need appropriate R package for database backend
<ul>
<li><code>RSQLite::SQLite()</code> for RSQLite<br />
</li>
<li><code>RMySQL::MySQL()</code> for RMySQL<br />
</li>
<li><code>RPostgreSQL::PostgreSQL()</code> for RPostgreSQL<br />
</li>
<li><code>odbc::odbc()</code> for Open Database Connectivity<br />
</li>
<li><code>bigrquery::bigquery()</code> for google’s bigQuery</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" title="1">con &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbConnect</span>(RMySQL<span class="op">::</span><span class="kw">MySQL</span>(), </a>
<a class="sourceLine" id="cb247-2" title="2">  <span class="dt">host =</span> <span class="st">&quot;hostname.website&quot;</span>,</a>
<a class="sourceLine" id="cb247-3" title="3">  <span class="dt">user =</span> <span class="st">&quot;username&quot;</span>,</a>
<a class="sourceLine" id="cb247-4" title="4">  <span class="dt">password =</span> rstudioapi<span class="op">::</span><span class="kw">askForPassword</span>(<span class="st">&quot;DB password&quot;</span>)</a>
<a class="sourceLine" id="cb247-5" title="5">)</a></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Use <code>tbl()</code> to reference a table in the database</li>
</ol>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" title="1"><span class="kw">tbl</span>(con, <span class="st">&quot;name_of_table&quot;</span>)</a></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Query the database with <code>SQL</code> or <code>dplyr/dbplyr</code></li>
</ol>
<p>There is much more about <a href="https://db.rstudio.com/">R Studio and Databases here</a>.</p>
</div>
<div id="apis" class="section level3">
<h3><span class="header-section-number">1.3.18</span> APIs</h3>
<p>API stands for Application Programming Interfaces. This is essentially a defined method for asking for information from a computer. They are useful for getting data or allowing others to run a model you’ve built.</p>
<p>There are many open APIs. They usually just require you to register and obtain a key. Once you have a key you simply need to construct the proper URL to return the information you want from the API.</p>
<p>As a quick example we will query the Harry Potter database at <a href="https://www.potterapi.com/">https://www.potterapi.com/</a>. There is a button on the top right where you can register and obtain a key.</p>
<p><img src="img/HPAPI.PNG" width="80%" style="display: block; margin: auto;" /></p>
<p>The documentation for returning Harry Potter spells states:</p>
<pre><code>+ All routes need to be prefixed with https://www.potterapi.com/v1/  

+ GET request: /spells returns all spells 

+ Key goes on the end  </code></pre>
<p>This tells us how to construct the appropriate URL. The <code>paste</code> and <code>paste0</code> functions are useful for combining strings (check their help).</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" title="1">baseURL &lt;-<span class="st"> &quot;https://www.potterapi.com/v1/&quot;</span></a>
<a class="sourceLine" id="cb250-2" title="2">value &lt;-<span class="st"> &quot;spells?&quot;</span></a>
<a class="sourceLine" id="cb250-3" title="3">key &lt;-<span class="st"> &quot;key=$2a$10$UMvDCH.93fa2KOjKbJYkOOPMNzdzQpJ0gMnVEtcHzW5Ic04HUmcsa&quot;</span></a>
<a class="sourceLine" id="cb250-4" title="4">URL &lt;-<span class="st"> </span><span class="kw">paste0</span>(baseURL, value, key)</a>
<a class="sourceLine" id="cb250-5" title="5">URL</a></code></pre></div>
<pre><code>## [1] &quot;https://www.potterapi.com/v1/spells?key=$2a$10$UMvDCH.93fa2KOjKbJYkOOPMNzdzQpJ0gMnVEtcHzW5Ic04HUmcsa&quot;</code></pre>
<p>Now we use the <code>RCurl</code> package and the <code>getURL</code> function to ping the URL we just created. This will return the spell data set in JSON form as that is the default response format for this API.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" title="1">spellData &lt;-<span class="st"> </span>RCurl<span class="op">::</span><span class="kw">getURL</span>(URL)</a></code></pre></div>
<p>This is a reasonably large string of information so we can just look at the first 100 characters using the <code>substr</code> function.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" title="1"><span class="kw">substr</span>(spellData, <span class="dv">1</span>, <span class="dv">100</span>) </a></code></pre></div>
<pre><code>## [1] &quot;[{\&quot;_id\&quot;:\&quot;5b74ebd5fb6fc0739646754c\&quot;,\&quot;spell\&quot;:\&quot;Aberto\&quot;,\&quot;type\&quot;:\&quot;Charm\&quot;,\&quot;effect\&quot;:\&quot;opens objects\&quot;},{\&quot;_id\&quot;:&quot;</code></pre>
<p>To convert this to a data frame we can use the <code>fromJSON</code> function in the <code>jsonlite</code> package. <code>tbl_df</code> converts the dataframe to a <code>tibble</code> (for printing purposes).</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" title="1">spellDataDF &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(spellData)</a>
<a class="sourceLine" id="cb255-2" title="2"><span class="kw">tbl_df</span>(spellDataDF)</a></code></pre></div>
<pre><code>## # A tibble: 151 x 5
##   `_id`                spell          type      effect                     `__v`
##   &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;                      &lt;int&gt;
## 1 5b74ebd5fb6fc073964~ Aberto         Charm     opens objects                 NA
## 2 5b74ecfa3228320021a~ Accio          Charm     Summons an object              0
## 3 5b74ed2f3228320021a~ Age Line       Enchantm~ Hides things from younger~     0
## 4 5b74ed453228320021a~ Aguamenti      Charm     shoots water from wand         0
## 5 5b74ed583228320021a~ Alarte Ascend~ Spell     shoots things high in the~     0
## # ... with 146 more rows</code></pre>
<p>Of course constructing URLs like this yourself isn’t ideal. Languages like python have many packages to help you contact APIs without reading as much documentation. Unfortunately, R does not have a very mature collection of API packages. The article <a href="https://www.programmableweb.com/news/how-to-access-any-restful-api-using-r-language/how-to/2017/07/21">here</a> discusses accessing APIs generically with R. The same website gives a <a href="https://www.programmableweb.com/category/all/apis">list of APIs</a> that you might consider.</p>
</div>
<div id="data-manipulation-ideas" class="section level3">
<h3><span class="header-section-number">1.3.19</span> Data Manipulation Ideas</h3>
<p>As you can see it isn’t too difficult to bring well structured raw data into R. You should now have the basics of reading in delimited, Excel, SAS, SPSS, JSON, and XML data as well as how to connect to a database and contact an API. Once you have your data you may want to manipulate it in some way.</p>
<p>Often we want to grab only certain types of observations (filter rows).</p>
<p><img src="img/filterVisualF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We also want to only look at only certain variables (select columns).</p>
<p><img src="img/selectVisualF.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Other times we want to create new variables that may be functions of the data in the data set.</p>
<p><img src="img/createVarVisualF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>When doing data manipulation it is vital to make your work reproducible! Traditionally documentation has been done through comments (<code>#</code> in R) in your R script. This is being replaced by using a ‘Notebook’ environment like R Markdown.</p>
</div>
<div id="documenting-with-markdown" class="section level3">
<h3><span class="header-section-number">1.3.20</span> Documenting with Markdown</h3>
<p>You may have heard of <a href="http://jupyter.org/">JUPYTER</a> notebooks. This is a program that allows you to weave plain text with formatting characters along side code. JUPYTER allows you to call Julia, Python, R, or SAS code (among others).</p>
<p>R Markdown is a built in notebook for R studio! A nice intro video is <a href="https://vimeo.com/178485416">available here</a>.</p>
<p>R Markdown is designed to be used in three ways (R for Data Science):</p>
<ul>
<li><p>Communicating to decision makers (focus on conclusions not code)</p></li>
<li><p>Collaborating with other data scientists (including future you!)</p></li>
<li><p>As environment to do data science (documents what you did and what you were thinking)</p></li>
</ul>
<p>Most have heard of HTML or HyperText Mark-up Language. This is really just plain text that a web browser like firefox interprets and renders. Markdown is a specific markup language that has easier syntax but is not as powerful. Any plain text file can be used although the .Rmd extension associates the file with R Studio.</p>
<p>RStudio makes it easy to create a Markdown document.</p>
<p><img src="img/startMD.PNG" width="75%" style="display: block; margin: auto;" /></p>
<p>You can create many commonly used types of output including HTML, PDF, Word, and HTML slides.</p>
<p><img src="img/startMDDoc.png" width="65%" style="display: block; margin: auto;" /></p>
<p>An R Markdown file contains three important types of content:</p>
<ol style="list-style-type: decimal">
<li><p>(Optional) YAML header surrounded by <code>---</code>s</p></li>
<li><p>Chunks of R code</p></li>
<li><p>Text mixed with simple text formatting instructions</p></li>
</ol>
<p>The YAML header defines settings for document:</p>
<pre><code>---
title: &quot;Untitled&quot;
author: &quot;First Last&quot;
date: &quot;xxxx&quot;
output: html_document
---</code></pre>
<p>The hot key combination of CTRL/CMD + Shift + k ‘knits’ (or creates the output type) via this information.</p>
<p>Code Chunks can contain any R code. These can be started by typing ```{r} out or with CTRL/CMD + Alt + I. This code will be executed when document is created and the chunks will be evaulated sequentially. Options can be specified on individual code chunks to hide their code or output (among other things).</p>
<p>Below you’ll see plain text with markdown sytnax included:</p>
<pre><code>##R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax
for authoring HTML, PDF, and MS Word documents. For more details on
using R Markdown see &lt;http://rmarkdown.rstudio.com&gt;.

When you click the **Knit** button a document will be generated that
includes both content as well as the output of any embedded R code
chunks within the document. </code></pre>
<p>When the file is created <code>##</code> becomes a header, “&lt;…&gt;” a link, and <code>**Knit**</code> bold font.</p>
<p>You can learn much more about how to use R Markdown with this handy <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">cheat sheet</a>.</p>
<p>The key idea here is that you can easily write down your thought process and document all of the changes you make to your data. This creates a reproducible final product!</p>
</div>
<div id="logical-statements" class="section level3">
<h3><span class="header-section-number">1.3.21</span> Logical Statements</h3>
<p>Our current goal is to subset rows or columns of a dataset.</p>
<p><img src="img/filterVisualF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>To do this efficiently we need to learn about logical statements. A logical statement is a comparison that resolves as <code>TRUE</code> or <code>FALSE</code>. R has all of the standard comparison operators:</p>
<ul>
<li><code>==</code> equal to</li>
<li><code>!=</code> not equal to</li>
<li><code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code> less than (or equal) and greater than (or equal)</li>
</ul>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" title="1"><span class="st">&quot;hi&quot;</span> <span class="op">==</span><span class="st"> &quot; hi&quot;</span> <span class="co">#== is comparison</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" title="1"><span class="st">&quot;hi&quot;</span> <span class="op">==</span><span class="st"> &quot;hi&quot;</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" title="1"><span class="dv">4</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" title="1"><span class="dv">4</span> <span class="op">!=</span><span class="st"> </span><span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Sometimes we see issues due to a loss of precision when doing mathematical operations.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" title="1"><span class="kw">sqrt</span>(<span class="dv">3</span>)<span class="op">^</span><span class="dv">2</span>  <span class="op">==</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>The <code>near</code> function from the <code>dplyr</code> package can help with this type of situation.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb269-1" title="1">dplyr<span class="op">::</span><span class="kw">near</span>(<span class="kw">sqrt</span>(<span class="dv">3</span>)<span class="op">^</span><span class="dv">2</span>, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Another common way to do a logical statement in R is to use an <code>is.</code> family function.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" title="1"><span class="kw">is.numeric</span>(<span class="st">&quot;Word&quot;</span>)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" title="1"><span class="kw">is.numeric</span>(<span class="dv">10</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" title="1"><span class="kw">is.character</span>(<span class="st">&quot;10&quot;</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" title="1"><span class="kw">is.na</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">3</span>))</a></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" title="1"><span class="kw">is.matrix</span>(<span class="kw">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;world&quot;</span>))</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>How do we use logical statements to subset our data? Logical vectors can be used for indexing an R object. The concept is:</p>
<ul>
<li>Feed index a vector of <code>TRUE</code>/<code>FALSE</code> or <code>0</code>/<code>1</code> values<br />
</li>
<li>R will return elements where <code>TRUE</code> or <code>1</code> occurred</li>
</ul>
<p>Let’s subset the built-in <code>iris</code> data set. First we’ll convert it to a <code>tibble</code> so it prints nicely.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb281-1" title="1">iris &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(iris)</a>
<a class="sourceLine" id="cb281-2" title="2">iris</a></code></pre></div>
<p>Now, we can create an indexing vector corresponding to some condition of interest. For instance, we may want to only look at the Species ‘setosa’ flowers.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb282-1" title="1">iris<span class="op">$</span>Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span> <span class="co">#vector indicating setosa values</span></a></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE
##  [ reached getOption(&quot;max.print&quot;) -- omitted 50 entries ]</code></pre>
<p>Now we can feed this in as our row index to the <code>[</code> function. Remember for rectangular data the first index you give refers to the rows and the second to columns.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb284-1" title="1">iris[iris<span class="op">$</span>Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>, ]</a></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
## 11          5.4         3.7          1.5         0.2  setosa
## 12          4.8         3.4          1.6         0.2  setosa
## 13          4.8         3.0          1.4         0.1  setosa
## 14          4.3         3.0          1.1         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 16          5.7         4.4          1.5         0.4  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 18          5.1         3.5          1.4         0.3  setosa
## 19          5.7         3.8          1.7         0.3  setosa
## 20          5.1         3.8          1.5         0.3  setosa
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 30 rows ]</code></pre>
<p>Rather than use <code>[</code>, a base R function called <code>subset</code> can be used.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb286-1" title="1"><span class="kw">subset</span>(iris, Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>)</a></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
## 11          5.4         3.7          1.5         0.2  setosa
## 12          4.8         3.4          1.6         0.2  setosa
## 13          4.8         3.0          1.4         0.1  setosa
## 14          4.3         3.0          1.1         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 16          5.7         4.4          1.5         0.4  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 18          5.1         3.5          1.4         0.3  setosa
## 19          5.7         3.8          1.7         0.3  setosa
## 20          5.1         3.8          1.5         0.3  setosa
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 30 rows ]</code></pre>
<p>This function works quite well but we want to work in the tidyverse. The <code>filter</code> function from the <code>dplyr</code> package (installed with <code>tidyverse</code>) will be our function of choice. For <code>filter</code> the first argument is the data frame (or tibble) and the second is the logical statement used for indexing the rows.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb288-1" title="1"><span class="kw">filter</span>(iris, Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>)</a></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
## 11          5.4         3.7          1.5         0.2  setosa
## 12          4.8         3.4          1.6         0.2  setosa
## 13          4.8         3.0          1.4         0.1  setosa
## 14          4.3         3.0          1.1         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 16          5.7         4.4          1.5         0.4  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 18          5.1         3.5          1.4         0.3  setosa
## 19          5.7         3.8          1.7         0.3  setosa
## 20          5.1         3.8          1.5         0.3  setosa
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 30 rows ]</code></pre>
<p>Often we’ll want to subset based on more than one condition. These can be created using standard logical operators. In R these are:</p>
<ul>
<li><code>&amp;</code> ‘and’</li>
<li><code>|</code> ‘or’</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>A,B true</th>
<th>A true, B false</th>
<th>A,B false</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&amp;</code></td>
<td><code>A &amp; B = TRUE</code></td>
<td><code>A &amp; B = FALSE</code></td>
<td><code>A &amp; B = FALSE</code></td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td><code>A | B = TRUE</code></td>
<td><code>A | B = TRUE</code></td>
<td><code>A | B = FALSE</code></td>
</tr>
</tbody>
</table>
<p>For the most part we’ll want to use the single <code>&amp;</code> or <code>|</code>. <code>&amp;&amp;</code> and <code>||</code> are alternatives that only look at only first comparison done (if given a vector of comparisons).</p>
<p>A quick example of the compound logical syntax is given below. Parenthesis are not necessary but are quite useful to keep things straight! Here we generate 10 random values between 0 and 1 (<code>set.seed</code> just starts the random number generator at a specific spot so we can get the same 10 values each time we create this document!). We use <code>|</code> to return TRUE if the randomly generated value is either below 0.25 or above 0.75.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb290-1" title="1"><span class="kw">set.seed</span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb290-2" title="2">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb290-3" title="3">x</a></code></pre></div>
<pre><code>##  [1] 0.1680415 0.8075164 0.3849424 0.3277343 0.6021007 0.6043941 0.1246334
##  [8] 0.2946009 0.5776099 0.6309793</code></pre>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb292-1" title="1">(x <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.25</span>) <span class="op">|</span><span class="st"> </span>(x <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.75</span>)</a></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<p>With this kind of syntax we can now create an indexing vector to only pull out large petal setosa flowers:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb294-1" title="1">(iris<span class="op">$</span>Petal.Length <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.5</span>) <span class="op">&amp;</span><span class="st"> </span>(iris<span class="op">$</span>Petal.Width <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.3</span>) <span class="op">&amp;</span><span class="st"> </span>(iris<span class="op">$</span>Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>)</a></code></pre></div>
<pre><code>##   [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
##  [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
##  [25] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE
##  [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE
##  [ reached getOption(&quot;max.print&quot;) -- omitted 50 entries ]</code></pre>
<p>Using this in the filter function we return only a few observations corresponding to our condition.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb296-1" title="1"><span class="kw">filter</span>(iris, (Petal.Length <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.5</span>) <span class="op">&amp;</span><span class="st"> </span>(Petal.Width <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.3</span>) <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb296-2" title="2"><span class="st">         </span>(Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>))</a></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.4         3.9          1.7         0.4  setosa
## 2          5.1         3.3          1.7         0.5  setosa
## 3          5.0         3.4          1.6         0.4  setosa
## 4          5.0         3.5          1.6         0.6  setosa
## 5          5.1         3.8          1.9         0.4  setosa</code></pre>
</div>
<div id="dplyr" class="section level3">
<h3><span class="header-section-number">1.3.22</span> <code>dplyr</code></h3>
<p>The tidyverse has many useful packages for common data manipulation tasks. Make sure <code>library(tidyverse)</code> has been run when working through this section!<br />
Two major packages for data manipulation are:</p>
<p>-<code>dplry</code> package made for most standard data manipulation tasks</p>
<ul>
<li><code>tidyr</code> package reshapes data (wide and long format, split columns, etc)</li>
</ul>
<p>This section focuses on the most useful functions from the <code>dplyr</code> package:</p>
<ul>
<li><code>tbl_df()</code> - convert data frame to one with better printing<br />
</li>
<li><code>filter()</code> - subset rows<br />
</li>
<li><code>arrange()</code> - reorder rows<br />
</li>
<li><code>select()</code> - subset columns<br />
</li>
<li><code>rename()</code> - rename columns</li>
</ul>
<p>Later we’ll look at</p>
<ul>
<li><code>mutate()</code> - add newly created column<br />
</li>
<li><code>transmute()</code> - create new variable<br />
</li>
<li><code>group_by()</code> - group rows by a variable<br />
</li>
<li><code>summarise()</code> - apply basic function to data</li>
</ul>
<p>One really nice thing about the functions in the tidyverse is that the syntax is mostly consistent (save <code>ggplot2</code>). The basic syntax is</p>
<p><code>function(tibble, actions, ...)</code></p>
<p>Let’s get started! We’ve seen <code>tbl_df</code> a few times. This function converts a data frame to one with better printing and no simplification. To use it we can simply ‘wrap’ data frame with it. In this section we’ll do examples on datasets from the <code>Lahman</code> pacakge. This package has data about baseball players dating back from the start of professional baseball.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb298-1" title="1"><span class="co">#install.packages(&quot;Lahman&quot;)</span></a>
<a class="sourceLine" id="cb298-2" title="2"><span class="kw">library</span>(Lahman)</a></code></pre></div>
<pre><code>## Warning: package &#39;Lahman&#39; was built under R version 3.6.2</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb300-1" title="1"><span class="co">#old method for previewing a dataset</span></a>
<a class="sourceLine" id="cb300-2" title="2"><span class="kw">head</span>(Batting, <span class="dt">n =</span> <span class="dv">4</span>) <span class="co">#look at just first 4 observations</span></a></code></pre></div>
<pre><code>##    playerID yearID stint teamID lgID  G  AB  R  H X2B X3B HR RBI SB CS BB SO
## 1 abercda01   1871     1    TRO   NA  1   4  0  0   0   0  0   0  0  0  0  0
## 2  addybo01   1871     1    RC1   NA 25 118 30 32   6   0  0  13  8  1  4  0
## 3 allisar01   1871     1    CL1   NA 29 137 28 40   4   5  0  19  3  1  2  5
## 4 allisdo01   1871     1    WS3   NA 27 133 28 44  10   2  2  27  1  1  0  2
##   IBB HBP SH SF GIDP
## 1  NA  NA NA NA    0
## 2  NA  NA NA NA    0
## 3  NA  NA NA NA    1
## 4  NA  NA NA NA    0</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb302-1" title="1">Batting &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(Batting)</a>
<a class="sourceLine" id="cb302-2" title="2">Batting</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##   playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 abercda~   1871     1 TRO    NA        1     4     0     0     0     0     0
## 2 addybo01   1871     1 RC1    NA       25   118    30    32     6     0     0
## 3 allisar~   1871     1 CL1    NA       29   137    28    40     4     5     0
## 4 allisdo~   1871     1 WS3    NA       27   133    28    44    10     2     2
## 5 ansonca~   1871     1 RC1    NA       25   120    29    39    11     3     0
## # ... with 1.059e+05 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p>If the data has been read in with <code>haven</code>, <code>readxl</code>, or <code>readr</code>, it is probably in this format already!</p>
<div id="row-manipulations" class="section level4">
<h4><span class="header-section-number">1.3.22.1</span> Row Manipulations</h4>
<p>Again, we may to do a subset based on the rows of our dataset.</p>
<p><img src="img/filterVisualF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We just looked at using the <code>filter</code> function to subset rows or observations of a dataset. Let’s look at a few more examples. We may only want to return observations from the Batting dataset corresponding to the Pittsburgh Pirates (PIT).</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb304-1" title="1"><span class="kw">filter</span>(Batting, teamID <span class="op">==</span><span class="st"> &quot;PIT&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 4,817 x 22
##   playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 barklsa~   1887     1 PIT    NL       89   340    44    76    10     4     1
## 2 beeched~   1887     1 PIT    NL       41   169    15    41     8     0     2
## 3 bishobi~   1887     1 PIT    NL        3     9     0     0     0     0     0
## 4 brownto~   1887     1 PIT    NL       47   192    30    47     3     4     0
## 5 carrofr~   1887     1 PIT    NL      102   421    71   138    24    15     6
## # ... with 4,812 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p>We could use a compound logical to only return Pirate data from the year 2000.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb306-1" title="1"><span class="kw">filter</span>(Batting, teamID <span class="op">==</span><span class="st"> &quot;PIT&quot;</span> <span class="op">&amp;</span><span class="st"> </span>yearID <span class="op">==</span><span class="st"> </span><span class="dv">2000</span>)</a></code></pre></div>
<pre><code>## # A tibble: 46 x 22
##   playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 anderji~   2000     1 PIT    NL       27    50     5     7     1     0     0
## 2 arroybr~   2000     1 PIT    NL       21    21     2     3     2     0     0
## 3 avenbr01   2000     1 PIT    NL       72   148    18    37    11     0     5
## 4 benjami~   2000     1 PIT    NL       93   233    28    63    18     2     2
## 5 bensokr~   2000     1 PIT    NL       32    65     3     6     2     0     0
## # ... with 41 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;,
## #   BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<p>Another useful row operation is to rearrange the data based on some criteria. The <code>arrange</code> function allows us to sort a data set by numeric or character variables. For instance we could reorder alphabetically by the teamID variable.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb308-1" title="1"><span class="kw">arrange</span>(Batting, teamID)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##   playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 berrych~   1884     1 ALT    UA        7    25     2     6     0     0     0
## 2 brownji~   1884     1 ALT    UA       21    88    12    22     2     2     1
## 3 carropa~   1884     1 ALT    UA       11    49     4    13     1     0     0
## 4 connojo~   1884     1 ALT    UA        3    11     0     1     0     0     0
## 5 crosscl~   1884     1 ALT    UA        2     7     1     4     1     0     0
## # ... with 1.059e+05 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p>A secondary arrangement can be done as well (and third, etc.)</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb310-1" title="1"><span class="kw">arrange</span>(Batting, teamID, G)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##   playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 daisege~   1884     1 ALT    UA        1     4     0     0     0     0     0
## 2 crosscl~   1884     1 ALT    UA        2     7     1     4     1     0     0
## 3 manloch~   1884     1 ALT    UA        2     7     1     3     0     0     0
## 4 connojo~   1884     1 ALT    UA        3    11     0     1     0     0     0
## 5 shafff01   1884     1 ALT    UA        6    19     1     3     0     0     0
## # ... with 1.059e+05 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p>The arrangement can be done descending as well by giving the column (variable) with <code>desc</code>.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb312-1" title="1"><span class="kw">arrange</span>(Batting, teamID, <span class="kw">desc</span>(G))</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##   playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 smithge~   1884     1 ALT    UA       25   108     9    34     8     1     0
## 2 harrifr~   1884     1 ALT    UA       24    95    10    25     2     1     0
## 3 doughch~   1884     1 ALT    UA       23    85     6    22     5     0     0
## 4 murphjo~   1884     1 ALT    UA       23    94    10    14     1     0     0
## 5 brownji~   1884     1 ALT    UA       21    88    12    22     2     2     1
## # ... with 1.059e+05 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
</div>
<div id="column-manipulations" class="section level4">
<h4><span class="header-section-number">1.3.22.2</span> Column Manipulations</h4>
<p>We may want to look at only certain variables (select columns).</p>
<p><img src="img/selectVisualF.png" width="65%" style="display: block; margin: auto;" /></p>
<p>The <code>select</code> function from the <code>dplyr</code> package allows us to choose columns of interest. We’ve seen the use of <code>$</code> and <code>[ , ]</code> to do this already but <code>select</code> offers many advantages.</p>
<ul>
<li><p>Same syntax as tidyverse functions</p></li>
<li><p>Useful ways to use character matching to select columns</p></li>
</ul>
<p>Let’s see it in action! To choose a single column of interest just supply the column name (or position) after the <code>tibble</code>.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb314-1" title="1"><span class="kw">select</span>(Batting, X2B)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 1
##     X2B
##   &lt;int&gt;
## 1     0
## 2     6
## 3     4
## 4    10
## 5    11
## # ... with 1.059e+05 more rows</code></pre>
<p>Multiple columns can be selected by giving multiple column names.</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb316-1" title="1"><span class="kw">select</span>(Batting, playerID, X2B)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 2
##   playerID    X2B
##   &lt;chr&gt;     &lt;int&gt;
## 1 abercda01     0
## 2 addybo01      6
## 3 allisar01     4
## 4 allisdo01    10
## 5 ansonca01    11
## # ... with 1.059e+05 more rows</code></pre>
<p>There are many ways to select multiple columsn (variables). For instance, contiguous columns can be selected using the <code>:</code>.</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb318-1" title="1"><span class="co">#all columns between</span></a>
<a class="sourceLine" id="cb318-2" title="2"><span class="kw">select</span>(Batting, X2B<span class="op">:</span>HR)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 3
##     X2B   X3B    HR
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1     0     0     0
## 2     6     0     0
## 3     4     5     0
## 4    10     2     2
## 5    11     3     0
## # ... with 1.059e+05 more rows</code></pre>
<p>Character matching can be done to select all columns that contain a certain character.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb320-1" title="1"><span class="co">#all columns containing</span></a>
<a class="sourceLine" id="cb320-2" title="2"><span class="kw">select</span>(Batting, <span class="kw">contains</span>(<span class="st">&quot;X&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 2
##     X2B   X3B
##   &lt;int&gt; &lt;int&gt;
## 1     0     0
## 2     6     0
## 3     4     5
## 4    10     2
## 5    11     3
## # ... with 1.059e+05 more rows</code></pre>
<p>Similary, there is a <code>starts_with</code> and <code>ends_with</code> function.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb322-1" title="1"><span class="co">#all columns starting with</span></a>
<a class="sourceLine" id="cb322-2" title="2"><span class="kw">select</span>(Batting, <span class="kw">starts_with</span>(<span class="st">&quot;X&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 2
##     X2B   X3B
##   &lt;int&gt; &lt;int&gt;
## 1     0     0
## 2     6     0
## 3     4     5
## 4    10     2
## 5    11     3
## # ... with 1.059e+05 more rows</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" title="1"><span class="co">#multiple selections</span></a>
<a class="sourceLine" id="cb324-2" title="2"><span class="kw">select</span>(Batting, <span class="kw">starts_with</span>(<span class="st">&quot;X&quot;</span>), <span class="kw">ends_with</span>(<span class="st">&quot;ID&quot;</span>), G)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 7
##     X2B   X3B playerID  yearID teamID lgID      G
##   &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt;
## 1     0     0 abercda01   1871 TRO    NA        1
## 2     6     0 addybo01    1871 RC1    NA       25
## 3     4     5 allisar01   1871 CL1    NA       29
## 4    10     2 allisdo01   1871 WS3    NA       27
## 5    11     3 ansonca01   1871 RC1    NA       25
## # ... with 1.059e+05 more rows</code></pre>
<p>Sometimes we want to rename variables. This can be done with the <code>rename</code> function.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb326-1" title="1"><span class="co">#rename our previous selection</span></a>
<a class="sourceLine" id="cb326-2" title="2"><span class="kw">rename</span>(<span class="kw">select</span>(Batting, <span class="kw">starts_with</span>(<span class="st">&quot;X&quot;</span>), <span class="kw">ends_with</span>(<span class="st">&quot;ID&quot;</span>), G), <span class="st">&quot;Doubles&quot;</span> =<span class="st"> </span>X2B, <span class="st">&quot;Triples&quot;</span> =<span class="st"> </span>X3B)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 7
##   Doubles Triples playerID  yearID teamID lgID      G
##     &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt;
## 1       0       0 abercda01   1871 TRO    NA        1
## 2       6       0 addybo01    1871 RC1    NA       25
## 3       4       5 allisar01   1871 CL1    NA       29
## 4      10       2 allisdo01   1871 WS3    NA       27
## 5      11       3 ansonca01   1871 RC1    NA       25
## # ... with 1.059e+05 more rows</code></pre>
<p>You may notice this is kind function nesting makes this code difficult for humans to parse. Piping or Chaining can be used to make the use of multiple functions easier!</p>
<p><code>%&gt;%</code> is the piping operator. Generically, piping does the following</p>
<p><code>x %&gt;% f(y)</code> turns into <code>f(x,y)</code></p>
<p><code>x %&gt;% f(y) %&gt;% g(z)</code> turns into <code>g(f(x, y), z)</code></p>
<p>Since the tidyverse functions all have the same syntax, piping works wonders for readability! Piping can be used with functions outside the tidyverse if this structure works. Let’s rewrite our previous nested function with piping. When reading code with piping, read <code>%&gt;%</code> as the word ‘then.’</p>
<p>Batting data set (then) select these columns (then) rename the variables.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb328-1" title="1">Batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;X&quot;</span>), <span class="kw">ends_with</span>(<span class="st">&quot;ID&quot;</span>), G) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename</span>(<span class="st">&quot;Doubles&quot;</span> =<span class="st"> </span>X2B, <span class="st">&quot;Triples&quot;</span> =<span class="st"> </span>X3B)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 7
##   Doubles Triples playerID  yearID teamID lgID      G
##     &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt;
## 1       0       0 abercda01   1871 TRO    NA        1
## 2       6       0 addybo01    1871 RC1    NA       25
## 3       4       5 allisar01   1871 CL1    NA       29
## 4      10       2 allisdo01   1871 WS3    NA       27
## 5      11       3 ansonca01   1871 RC1    NA       25
## # ... with 1.059e+05 more rows</code></pre>
<p>We may also wish to reorder our columns (variables). This can be done using <code>select</code>. The <code>everything</code> function is handy so you don’t have to list all the variables out if you only want to reorder a few.</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb330-1" title="1">Batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(playerID, HR, <span class="kw">everything</span>())</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##   playerID    HR yearID stint teamID lgID      G    AB     R     H   X2B   X3B
##   &lt;chr&gt;    &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 abercda~     0   1871     1 TRO    NA        1     4     0     0     0     0
## 2 addybo01     0   1871     1 RC1    NA       25   118    30    32     6     0
## 3 allisar~     0   1871     1 CL1    NA       29   137    28    40     4     5
## 4 allisdo~     2   1871     1 WS3    NA       27   133    28    44    10     2
## 5 ansonca~     0   1871     1 RC1    NA       25   120    29    39    11     3
## # ... with 1.059e+05 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p>Another commonly done column manipulation is the creating of new variables.</p>
<p><img src="img/createVarVisualF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Given a data frame and an appropriate length vector (new variable) we can use <code>cbind</code> (column bind) to add the variable to the data frame.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb332-1" title="1">temp &lt;-<span class="st"> </span><span class="kw">cbind</span>(iris, <span class="dt">extra =</span> <span class="kw">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">150</span>))</a>
<a class="sourceLine" id="cb332-2" title="2"><span class="kw">str</span>(temp)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  6 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ extra       : Factor w/ 1 level &quot;a&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>More simply we can just add the new variable as a named (list) element!</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb334-1" title="1">iris<span class="op">$</span>extra &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb334-2" title="2"><span class="kw">str</span>(iris)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  6 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ extra       : chr  &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;a&quot; ...</code></pre>
<p>To stay in the tidyverse and add more functionality we can use two functions from <code>dplyr</code>:</p>
<ul>
<li><p><code>mutate()</code> - add newly created column(s) to current data frame</p></li>
<li><p><code>transmute()</code> - create new data frame with created variable(s)</p></li>
</ul>
<p>The syntax for these functions is similar to previous. We simply name the new variables after specifying our data set.</p>
<p><code>mutate(data, newVarName = functionOfData, newVarName2 = functionOfData, ...)</code><br />
For this section let’s consider a data set on movie ratings from the <code>fivethirtyeight</code> package.</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb336-1" title="1"><span class="kw">library</span>(fivethirtyeight)</a></code></pre></div>
<pre><code>## Warning: package &#39;fivethirtyeight&#39; was built under R version 3.6.3</code></pre>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb338-1" title="1">fandango</a></code></pre></div>
<pre><code>## # A tibble: 146 x 23
##   film   year rottentomatoes rottentomatoes_~ metacritic metacritic_user  imdb
##   &lt;chr&gt; &lt;dbl&gt;          &lt;int&gt;            &lt;int&gt;      &lt;int&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1 Aven~  2015             74               86         66             7.1   7.8
## 2 Cind~  2015             85               80         67             7.5   7.1
## 3 Ant-~  2015             80               90         64             8.1   7.8
## 4 Do Y~  2015             18               84         22             4.7   5.4
## 5 Hot ~  2015             14               28         29             3.4   5.1
## # ... with 141 more rows, and 16 more variables: fandango_stars &lt;dbl&gt;,
## #   fandango_ratingvalue &lt;dbl&gt;, rt_norm &lt;dbl&gt;, rt_user_norm &lt;dbl&gt;,
## #   metacritic_norm &lt;dbl&gt;, metacritic_user_nom &lt;dbl&gt;, imdb_norm &lt;dbl&gt;,
## #   rt_norm_round &lt;dbl&gt;, rt_user_norm_round &lt;dbl&gt;, metacritic_norm_round &lt;dbl&gt;,
## #   metacritic_user_norm_round &lt;dbl&gt;, imdb_norm_round &lt;dbl&gt;,
## #   metacritic_user_vote_count &lt;int&gt;, imdb_user_vote_count &lt;int&gt;,
## #   fandango_votes &lt;int&gt;, fandango_difference &lt;dbl&gt;</code></pre>
<p>We can add a new variable that is the average of two columns using <code>mutate</code>. Remember to read <code>%&gt;%</code> as ‘then.’</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb340-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb340-2" title="2"><span class="st">  </span><span class="kw">select</span>(film, year, avgRotten, <span class="kw">everything</span>())</a></code></pre></div>
<pre><code>## # A tibble: 146 x 24
##   film   year avgRotten rottentomatoes rottentomatoes_~ metacritic
##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt;          &lt;int&gt;            &lt;int&gt;      &lt;int&gt;
## 1 Aven~  2015      80               74               86         66
## 2 Cind~  2015      82.5             85               80         67
## 3 Ant-~  2015      85               80               90         64
## 4 Do Y~  2015      51               18               84         22
## 5 Hot ~  2015      21               14               28         29
## # ... with 141 more rows, and 18 more variables: metacritic_user &lt;dbl&gt;,
## #   imdb &lt;dbl&gt;, fandango_stars &lt;dbl&gt;, fandango_ratingvalue &lt;dbl&gt;,
## #   rt_norm &lt;dbl&gt;, rt_user_norm &lt;dbl&gt;, metacritic_norm &lt;dbl&gt;,
## #   metacritic_user_nom &lt;dbl&gt;, imdb_norm &lt;dbl&gt;, rt_norm_round &lt;dbl&gt;,
## #   rt_user_norm_round &lt;dbl&gt;, metacritic_norm_round &lt;dbl&gt;,
## #   metacritic_user_norm_round &lt;dbl&gt;, imdb_norm_round &lt;dbl&gt;,
## #   metacritic_user_vote_count &lt;int&gt;, imdb_user_vote_count &lt;int&gt;,
## #   fandango_votes &lt;int&gt;, fandango_difference &lt;dbl&gt;</code></pre>
<p>More than one variable can be created. Here an average of the normed metacritic scores.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb342-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb342-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb342-3" title="3">         <span class="dt">avgMeta =</span> (metacritic_norm <span class="op">+</span><span class="st"> </span>metacritic_user_nom)<span class="op">/</span><span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb342-4" title="4"><span class="st">  </span><span class="kw">select</span>(film, year, avgRotten, avgMeta, <span class="kw">everything</span>())</a></code></pre></div>
<pre><code>## # A tibble: 146 x 25
##   film   year avgRotten avgMeta rottentomatoes rottentomatoes_~ metacritic
##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;          &lt;int&gt;            &lt;int&gt;      &lt;int&gt;
## 1 Aven~  2015      80      3.42             74               86         66
## 2 Cind~  2015      82.5    3.55             85               80         67
## 3 Ant-~  2015      85      3.62             80               90         64
## 4 Do Y~  2015      51      1.72             18               84         22
## 5 Hot ~  2015      21      1.58             14               28         29
## # ... with 141 more rows, and 18 more variables: metacritic_user &lt;dbl&gt;,
## #   imdb &lt;dbl&gt;, fandango_stars &lt;dbl&gt;, fandango_ratingvalue &lt;dbl&gt;,
## #   rt_norm &lt;dbl&gt;, rt_user_norm &lt;dbl&gt;, metacritic_norm &lt;dbl&gt;,
## #   metacritic_user_nom &lt;dbl&gt;, imdb_norm &lt;dbl&gt;, rt_norm_round &lt;dbl&gt;,
## #   rt_user_norm_round &lt;dbl&gt;, metacritic_norm_round &lt;dbl&gt;,
## #   metacritic_user_norm_round &lt;dbl&gt;, imdb_norm_round &lt;dbl&gt;,
## #   metacritic_user_vote_count &lt;int&gt;, imdb_user_vote_count &lt;int&gt;,
## #   fandango_votes &lt;int&gt;, fandango_difference &lt;dbl&gt;</code></pre>
<p><code>transmute</code> is very similar to mutate except it doesn’t return the original tibble, just the newly created variable(s).</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb344-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">transmute</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## # A tibble: 146 x 1
##   avgRotten
##       &lt;dbl&gt;
## 1      80  
## 2      82.5
## 3      85  
## 4      51  
## 5      21  
## # ... with 141 more rows</code></pre>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb346-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">transmute</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb346-2" title="2">                       <span class="dt">avgMeta =</span> (metacritic_norm <span class="op">+</span><span class="st"> </span>metacritic_user_nom)<span class="op">/</span><span class="dv">2</span>) </a></code></pre></div>
<pre><code>## # A tibble: 146 x 2
##   avgRotten avgMeta
##       &lt;dbl&gt;   &lt;dbl&gt;
## 1      80      3.42
## 2      82.5    3.55
## 3      85      3.62
## 4      51      1.72
## 5      21      1.58
## # ... with 141 more rows</code></pre>
<p><code>mutate</code> and <code>transmute</code> can also use ‘window’ functions. These are functions that take a vector of values and return another vector of values (see <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">Cheat sheet</a>). For instance we can find the cumulative sum of a column using <code>cumsum</code>.</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb348-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(rottentomatoes) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">cumulativeSum =</span> <span class="kw">cumsum</span>(rottentomatoes))</a></code></pre></div>
<pre><code>## # A tibble: 146 x 2
##   rottentomatoes cumulativeSum
##            &lt;int&gt;         &lt;int&gt;
## 1             74            74
## 2             85           159
## 3             80           239
## 4             18           257
## 5             14           271
## # ... with 141 more rows</code></pre>
<p><code>mutate</code> and <code>transmute</code> can also use some statistical functions to create new variables. Here we add a column representing the mean and standard deviation of the rottentomatoes score.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb350-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(rottentomatoes) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb350-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">avg =</span> <span class="kw">mean</span>(rottentomatoes), <span class="dt">sd =</span> <span class="kw">sd</span>(rottentomatoes))</a></code></pre></div>
<pre><code>## # A tibble: 146 x 3
##   rottentomatoes   avg    sd
##            &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1             74  60.8  30.2
## 2             85  60.8  30.2
## 3             80  60.8  30.2
## 4             18  60.8  30.2
## 5             14  60.8  30.2
## # ... with 141 more rows</code></pre>
<p>These statistical quantities are easily found for subgroups of the data using the <code>group_by</code> function. We can group the data set by year and run the same <code>mutate</code> function. Now the mean and standard deviation are found for each year and appended appropriately.</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb352-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(year, rottentomatoes) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb352-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">avg =</span> <span class="kw">mean</span>(rottentomatoes), <span class="dt">sd =</span> <span class="kw">sd</span>(rottentomatoes))</a></code></pre></div>
<pre><code>## # A tibble: 146 x 4
## # Groups:   year [2]
##    year rottentomatoes   avg    sd
##   &lt;dbl&gt;          &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  2015             74  58.4  30.3
## 2  2015             85  58.4  30.3
## 3  2015             80  58.4  30.3
## 4  2015             18  58.4  30.3
## 5  2015             14  58.4  30.3
## # ... with 141 more rows</code></pre>
<p>Another important way to create variables is through the use of conditional logic. This allows code to be executed only under certain conditions. The main way this is done is through <code>if</code> <code>then</code> <code>else</code> syntax.</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb354-1" title="1"><span class="cf">if</span> (condition) {</a>
<a class="sourceLine" id="cb354-2" title="2">  then execute code</a>
<a class="sourceLine" id="cb354-3" title="3">} </a>
<a class="sourceLine" id="cb354-4" title="4"></a>
<a class="sourceLine" id="cb354-5" title="5"><span class="co">#if then else</span></a>
<a class="sourceLine" id="cb354-6" title="6"><span class="cf">if</span> (condition) {</a>
<a class="sourceLine" id="cb354-7" title="7">  execute this code  </a>
<a class="sourceLine" id="cb354-8" title="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb354-9" title="9">  execute this code</a>
<a class="sourceLine" id="cb354-10" title="10">}</a>
<a class="sourceLine" id="cb354-11" title="11"></a>
<a class="sourceLine" id="cb354-12" title="12"><span class="co">#Or more if statements</span></a>
<a class="sourceLine" id="cb354-13" title="13"><span class="cf">if</span> (condition) {</a>
<a class="sourceLine" id="cb354-14" title="14">  execute this code  </a>
<a class="sourceLine" id="cb354-15" title="15">} <span class="cf">else</span> <span class="cf">if</span> (condition2) {</a>
<a class="sourceLine" id="cb354-16" title="16">  execute this code</a>
<a class="sourceLine" id="cb354-17" title="17">} <span class="cf">else</span> <span class="cf">if</span> (condition3) {</a>
<a class="sourceLine" id="cb354-18" title="18">  execute this code</a>
<a class="sourceLine" id="cb354-19" title="19">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb354-20" title="20">  <span class="co">#if no conditions met</span></a>
<a class="sourceLine" id="cb354-21" title="21">  execute this code</a>
<a class="sourceLine" id="cb354-22" title="22">}</a></code></pre></div>
<p>Consider the built-in data set <code>airquality</code>. This hasdaily air quality measurements in New York from May (Day 1) to September (Day 153) in 1973.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb355-1" title="1">airquality &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(airquality)</a>
<a class="sourceLine" id="cb355-2" title="2">airquality</a></code></pre></div>
<pre><code>## # A tibble: 153 x 6
##   Ozone Solar.R  Wind  Temp Month   Day
##   &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1    41     190   7.4    67     5     1
## 2    36     118   8      72     5     2
## 3    12     149  12.6    74     5     3
## 4    18     313  11.5    62     5     4
## 5    NA      NA  14.3    56     5     5
## # ... with 148 more rows</code></pre>
<p>We may want to code a wind category variable:</p>
<ul>
<li>high wind days (15mph <span class="math inline">\(\leq\)</span> wind)<br />
</li>
<li>windy days (10mph <span class="math inline">\(\leq\)</span> wind &lt; 15mph)<br />
</li>
<li>lightwind days (6mph <span class="math inline">\(\leq\)</span> wind &lt; 10mph)<br />
</li>
<li>calm days (wind <span class="math inline">\(\leq\)</span> 6mph)</li>
</ul>
<p>We may think using of using the standard <code>if</code> statements above. The issue is that <code>if(condition)</code> can only take in a single comparison.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" title="1"><span class="cf">if</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>) { </a>
<a class="sourceLine" id="cb357-2" title="2">  <span class="st">&quot;High Wind&quot;</span></a>
<a class="sourceLine" id="cb357-3" title="3">  }</a></code></pre></div>
<pre><code>## Warning in if (airquality$Wind &gt;= 15) {: the condition has length &gt; 1 and only
## the first element will be used</code></pre>
<p>If you’ve programmed before you may think about this as an initial plan:</p>
<ul>
<li><p>loop through each observation</p></li>
<li><p>use if then else to determine wind status</p></li>
</ul>
<p>There are a number of ways to do looping in R</p>
<ul>
<li><p><code>for</code></p></li>
<li><p><code>while</code></p></li>
<li><p><code>repeat</code></p></li>
</ul>
<p>The idea of a loop is to run code repeatedly changing something each time. The syntax for the <code>for</code> loop is</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" title="1"><span class="cf">for</span>(index <span class="cf">in</span> values){</a>
<a class="sourceLine" id="cb359-2" title="2">  code to be run</a>
<a class="sourceLine" id="cb359-3" title="3">}</a></code></pre></div>
<p>The index defines the ‘counter’ or variable that varies as the loop iterates and ‘values’ define which values the index takes on.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb360-1" title="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb360-2" title="2">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb360-3" title="3">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb362-1" title="1"><span class="cf">for</span> (index <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>,<span class="st">&quot;hat&quot;</span>,<span class="st">&quot;worm&quot;</span>)){</a>
<a class="sourceLine" id="cb362-2" title="2">  <span class="kw">print</span>(index)</a>
<a class="sourceLine" id="cb362-3" title="3">}</a></code></pre></div>
<pre><code>## [1] &quot;cat&quot;
## [1] &quot;hat&quot;
## [1] &quot;worm&quot;</code></pre>
<p>If we want to code our wind variable we could run a <code>for</code> loop with <code>if</code> logic inside:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb364-1" title="1">status&lt;-<span class="kw">vector</span>() <span class="co">#initialize vector to save results</span></a>
<a class="sourceLine" id="cb364-2" title="2"></a>
<a class="sourceLine" id="cb364-3" title="3"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(airquality)){</a>
<a class="sourceLine" id="cb364-4" title="4">  <span class="cf">if</span>(airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>){</a>
<a class="sourceLine" id="cb364-5" title="5">    status[i] &lt;-<span class="st"> &quot;HighWind&quot;</span></a>
<a class="sourceLine" id="cb364-6" title="6">  } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb364-7" title="7">    status[i] &lt;-<span class="st"> &quot;Windy&quot;</span></a>
<a class="sourceLine" id="cb364-8" title="8">  } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>){</a>
<a class="sourceLine" id="cb364-9" title="9">    status[i] &lt;-<span class="st"> &quot;LightWind&quot;</span></a>
<a class="sourceLine" id="cb364-10" title="10">  } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb364-11" title="11">    status[i] &lt;-<span class="st"> &quot;Calm&quot;</span></a>
<a class="sourceLine" id="cb364-12" title="12">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb364-13" title="13">    status[i] &lt;-<span class="st"> &quot;Error&quot;</span></a>
<a class="sourceLine" id="cb364-14" title="14">  }</a>
<a class="sourceLine" id="cb364-15" title="15">}</a></code></pre></div>
<p>Then we can append the new variable to our dataset.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" title="1">airquality<span class="op">$</span>status &lt;-<span class="st"> </span>status</a>
<a class="sourceLine" id="cb365-2" title="2">airquality<span class="op">$</span>status</a></code></pre></div>
<pre><code>##   [1] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##   [7] &quot;LightWind&quot; &quot;Windy&quot;     &quot;HighWind&quot;  &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot;
##  [13] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot; 
##  [19] &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;HighWind&quot;  &quot;LightWind&quot; &quot;Windy&quot;    
##  [25] &quot;HighWind&quot;  &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Calm&quot;     
##  [31] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;HighWind&quot;  &quot;LightWind&quot; &quot;LightWind&quot;
##  [37] &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##  [43] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot; 
##  [49] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;     
##  [55] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##  [61] &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Calm&quot;     
##  [67] &quot;Windy&quot;     &quot;Calm&quot;      &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot;
##  [73] &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;    
##  [79] &quot;LightWind&quot; &quot;Calm&quot;      &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;    
##  [85] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
##  [91] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
##  [97] &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;      &quot;Windy&quot;    
##  [ reached getOption(&quot;max.print&quot;) -- omitted 53 entries ]</code></pre>
<p>This works just fine! Some other things to be aware of with loops:</p>
<ul>
<li><code>break</code> kicks you out of the loop</li>
</ul>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" title="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb367-2" title="2">    <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="dv">3</span>){ </a>
<a class="sourceLine" id="cb367-3" title="3">      <span class="cf">break</span> </a>
<a class="sourceLine" id="cb367-4" title="4">      }</a>
<a class="sourceLine" id="cb367-5" title="5">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb367-6" title="6">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 2</code></pre>
<ul>
<li><code>next</code> jumps to the next iteration of the loop</li>
</ul>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" title="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb369-2" title="2">    <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb369-3" title="3">      <span class="cf">next</span></a>
<a class="sourceLine" id="cb369-4" title="4">    } </a>
<a class="sourceLine" id="cb369-5" title="5">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb369-6" title="6">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 4
## [1] 5</code></pre>
<ul>
<li><code>while</code> loop are similar</li>
</ul>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb371-1" title="1"><span class="cf">while</span>(condition) {</a>
<a class="sourceLine" id="cb371-2" title="2">    expression to evaluate</a>
<a class="sourceLine" id="cb371-3" title="3">  modify condition?</a>
<a class="sourceLine" id="cb371-4" title="4">}</a></code></pre></div>
<p>The main issue with loops in R is that they are inefficient. R is an interpreted language so it must figure out how to evaluate code at each iteration of loop, slowing it down.</p>
<p>Vectorized functions are much faster! These functions work on an entire vector at once so R doesn’t have to figure things out as often. <code>ifelse()</code> is a vectorized version of <code>if then else</code>. The syntax is:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" title="1"><span class="kw">ifelse</span>(vector_condition, if_true_do_this, if_false_do_this)</a></code></pre></div>
<p>Now to create our Wind status variable we can nest <code>ifelse</code> statements.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" title="1"><span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>, <span class="st">&quot;HighWind&quot;</span>,</a>
<a class="sourceLine" id="cb373-2" title="2">          <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;Windy&quot;</span>,</a>
<a class="sourceLine" id="cb373-3" title="3">                 <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>, <span class="st">&quot;LightWind&quot;</span>, <span class="st">&quot;Calm&quot;</span>)))</a></code></pre></div>
<pre><code>##   [1] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##   [7] &quot;LightWind&quot; &quot;Windy&quot;     &quot;HighWind&quot;  &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot;
##  [13] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot; 
##  [19] &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;HighWind&quot;  &quot;LightWind&quot; &quot;Windy&quot;    
##  [25] &quot;HighWind&quot;  &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Calm&quot;     
##  [31] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;HighWind&quot;  &quot;LightWind&quot; &quot;LightWind&quot;
##  [37] &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##  [43] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot; 
##  [49] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;     
##  [55] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##  [61] &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Calm&quot;     
##  [67] &quot;Windy&quot;     &quot;Calm&quot;      &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot;
##  [73] &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;    
##  [79] &quot;LightWind&quot; &quot;Calm&quot;      &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;    
##  [85] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
##  [91] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
##  [97] &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;      &quot;Windy&quot;    
##  [ reached getOption(&quot;max.print&quot;) -- omitted 53 entries ]</code></pre>
<p><code>ifelse</code> can also easily be used with <code>transmute()</code> or <code>mutate()</code>!</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" title="1"><span class="kw">mutate</span>(airquality, <span class="dt">status =</span> <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>, <span class="st">&quot;HighWind&quot;</span>,</a>
<a class="sourceLine" id="cb375-2" title="2">                                <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;Windy&quot;</span>,</a>
<a class="sourceLine" id="cb375-3" title="3">                                       <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>, <span class="st">&quot;LightWind&quot;</span>, <span class="st">&quot;Calm&quot;</span>)))</a>
<a class="sourceLine" id="cb375-4" title="4">)</a></code></pre></div>
<pre><code>## # A tibble: 153 x 7
##   Ozone Solar.R  Wind  Temp Month   Day status   
##   &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    
## 1    41     190   7.4    67     5     1 LightWind
## 2    36     118   8      72     5     2 LightWind
## 3    12     149  12.6    74     5     3 Windy    
## 4    18     313  11.5    62     5     4 Windy    
## 5    NA      NA  14.3    56     5     5 Windy    
## # ... with 148 more rows</code></pre>
<p>Note: the <code>cut</code> function can also be used to categorize a numeric variable pretty easily.</p>
<p>This covers the major uses of <code>dplyr</code> for manipulating rows and columns. <code>dplyr</code> also has great functionality for doing <code>joins</code> similar to SQL. We’ll also see how it can be used to create basic numeric summaries using <code>group_by</code> and <code>summarize</code>. The <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">cheat sheet</a> is a great reference!</p>
<p>Recap of basic commands:</p>
<ul>
<li><code>tbl_df</code> - convert data frame to one with better printing<br />
</li>
<li><code>filter</code> - subset rows<br />
</li>
<li><code>arrange</code> - reorder rows<br />
</li>
<li><code>select</code> - subset columns<br />
</li>
<li><code>rename</code> - reorder columns<br />
</li>
<li><code>mutate/transmute</code> - create new variable</li>
</ul>
</div>
</div>
<div id="reshaping-data" class="section level3">
<h3><span class="header-section-number">1.3.23</span> Reshaping Data</h3>
<p>We’ve talked about rows being observations and columns being variables. This is generally how most statistical analysis software likes their data to be formatted. This is called ‘long’ format data - each row is an observation. Sometimes data doesn’t come that way!</p>
<p><img src="img/longWideF.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Data may have observations across some columns since viewing data is often more natural that way. For example, consider the weather data set below.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" title="1">tempsData &lt;-<span class="st"> </span><span class="kw">read_table2</span>(<span class="dt">file =</span> <span class="st">&quot;../../datasets/cityTemps.txt&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   city = col_character(),
##   sun = col_double(),
##   mon = col_double(),
##   tue = col_double(),
##   wed = col_double(),
##   thr = col_double(),
##   fri = col_double(),
##   sat = col_double()
## )</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb379-1" title="1">tempsData</a></code></pre></div>
<pre><code>## # A tibble: 6 x 8
##   city        sun   mon   tue   wed   thr   fri   sat
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 atlanta      81    87    83    79    88    91    94
## 2 baltimore    73    75    70    78    73    75    79
## 3 charlotte    82    80    75    82    83    88    93
## 4 denver       72    71    67    68    72    71    58
## 5 ellington    51    42    47    52    55    56    59
## 6 frankfort    70    70    72    70    74    74    79</code></pre>
<p>This data set is said to be in ‘wide’ format because columns represent observations. For most analyses this type of data will need to be reshaped into long format. The <code>tidyr</code> package can be used for this purpose!</p>
<p>The <code>gather</code> function takes multiple columns and gathers them into key-value pairs. This tkes wide data and makes it long.</p>
<p>Similarly there is a <code>spread</code> function takes two columns (key &amp; value) and spreads in to multiple columns. This takes long data and makes it wide.</p>
<p>Let’s switch the tempsData dataset to ‘long’ form with <code>gather()</code>. We need to identify the</p>
<ul>
<li><p>key = new name for values in columns</p></li>
<li><p>value = new name for data values</p></li>
<li><p>columns describe which columns to take</p></li>
</ul>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb381-1" title="1">tempsData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gather</span>(<span class="dt">key =</span> day, <span class="dt">value =</span> temp, <span class="dv">2</span><span class="op">:</span><span class="dv">8</span>)</a></code></pre></div>
<pre><code>## # A tibble: 42 x 3
##   city      day    temp
##   &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;
## 1 atlanta   sun      81
## 2 baltimore sun      73
## 3 charlotte sun      82
## 4 denver    sun      72
## 5 ellington sun      51
## # ... with 37 more rows</code></pre>
<p>The columns can be provided to gather in similar ways to how we chose them in the <code>select</code> function.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" title="1">newTempsData &lt;-<span class="st"> </span>tempsData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gather</span>(<span class="dt">key =</span> day, <span class="dt">value =</span> temp, sun<span class="op">:</span>sat)</a>
<a class="sourceLine" id="cb383-2" title="2">newTempsData</a></code></pre></div>
<pre><code>## # A tibble: 42 x 3
##   city      day    temp
##   &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;
## 1 atlanta   sun      81
## 2 baltimore sun      73
## 3 charlotte sun      82
## 4 denver    sun      72
## 5 ellington sun      51
## # ... with 37 more rows</code></pre>
<p>To give an example of using <code>spread</code> we can take our long format data and turn it back into wide format. WE just need to identify the:</p>
<ul>
<li><p>key = new column names</p></li>
<li><p>value = value to spread out</p></li>
</ul>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" title="1">newTempsData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">spread</span>(<span class="dt">key =</span> day, <span class="dt">value =</span> temp)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 8
##   city        fri   mon   sat   sun   thr   tue   wed
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 atlanta      91    87    94    81    88    83    79
## 2 baltimore    75    75    79    73    73    70    78
## 3 charlotte    88    80    93    82    83    75    82
## 4 denver       71    71    58    72    72    67    68
## 5 ellington    56    42    59    51    55    47    52
## 6 frankfort    74    70    79    70    74    72    70</code></pre>
<p>The <code>tidyr</code> package also has useful functions for separating a column (or combining two columns) using <code>separate</code> (and <code>unite</code>)</p>
<p><img src="img/uniteSeparateF.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Consider a data set on air pollution in Chicago.</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" title="1">chicagoData &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;../../datasets/Chicago.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   X = col_double(),
##   city = col_character(),
##   date = col_character(),
##   death = col_double(),
##   temp = col_double(),
##   dewpoint = col_double(),
##   pm10 = col_double(),
##   o3 = col_double(),
##   time = col_double(),
##   season = col_character(),
##   year = col_double()
## )</code></pre>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" title="1">chicagoData</a></code></pre></div>
<pre><code>## # A tibble: 1,461 x 11
##       X city  date     death  temp dewpoint  pm10    o3  time season  year
##   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1  3654 chic  1/1/1997   137  36       37.5  13.1  5.66  3654 winter  1997
## 2  3655 chic  1/2/1997   123  45       47.2  41.9  5.53  3655 winter  1997
## 3  3656 chic  1/3/1997   127  40       38    27.0  6.29  3656 winter  1997
## 4  3657 chic  1/4/1997   146  51.5     45.5  25.1  7.54  3657 winter  1997
## 5  3658 chic  1/5/1997   102  27       11.2  15.3 20.8   3658 winter  1997
## # ... with 1,456 more rows</code></pre>
<p>The <code>lubridate</code> package great for date data but let’s just do some basic parsing of the <code>date</code> variable using <code>separate</code>. We can split the <code>date</code> variable by the <code>/</code> that separates the day, month, and year to create three new columns. Using <code>remove = FALSE</code> keeps the original variable (<code>date</code>) and <code>convert = TRUE</code> attempts to convert the newly created variables to numeric if possible.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb391-1" title="1">chicagoData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(date, <span class="kw">c</span>(<span class="st">&quot;Day&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Year&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>, </a>
<a class="sourceLine" id="cb391-2" title="2">                                                 <span class="dt">convert =</span> <span class="ot">TRUE</span>, <span class="dt">remove =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1,461 x 14
##       X city  date    Day Month  Year death  temp dewpoint  pm10    o3  time
##   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  3654 chic  1/1/~     1     1  1997   137  36       37.5  13.1  5.66  3654
## 2  3655 chic  1/2/~     1     2  1997   123  45       47.2  41.9  5.53  3655
## 3  3656 chic  1/3/~     1     3  1997   127  40       38    27.0  6.29  3656
## 4  3657 chic  1/4/~     1     4  1997   146  51.5     45.5  25.1  7.54  3657
## 5  3658 chic  1/5/~     1     5  1997   102  27       11.2  15.3 20.8   3658
## # ... with 1,456 more rows, and 2 more variables: season &lt;chr&gt;, year &lt;dbl&gt;</code></pre>
<p>Similarly we can combine columns with <code>unite</code>. Let’s create a new column that is just the day and month separated by a <code>-</code>.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb393-1" title="1">chicagoData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(date, <span class="kw">c</span>(<span class="st">&quot;Day&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Year&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>, </a>
<a class="sourceLine" id="cb393-2" title="2">                                                 <span class="dt">convert =</span> <span class="ot">TRUE</span>, <span class="dt">remove =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb393-3" title="3"><span class="st">  </span><span class="kw">unite</span>(DayMonth, Day, Month, <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1,461 x 13
##       X city  date  DayMonth  Year death  temp dewpoint  pm10    o3  time season
##   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
## 1  3654 chic  1/1/~ 1-1       1997   137  36       37.5  13.1  5.66  3654 winter
## 2  3655 chic  1/2/~ 1-2       1997   123  45       47.2  41.9  5.53  3655 winter
## 3  3656 chic  1/3/~ 1-3       1997   127  40       38    27.0  6.29  3656 winter
## 4  3657 chic  1/4/~ 1-4       1997   146  51.5     45.5  25.1  7.54  3657 winter
## 5  3658 chic  1/5/~ 1-5       1997   102  27       11.2  15.3 20.8   3658 winter
## # ... with 1,456 more rows, and 1 more variable: year &lt;dbl&gt;</code></pre>
<p>You should now be ready to use R to get data in and do some basic manipulation!</p>
</div>
</div>
<div id="sas" class="section level2">
<h2><span class="header-section-number">1.4</span> SAS</h2>
<p>The general workflow for programming in SAS is similar to that of R. First raw data must be imported to SAS. Once that data is imported you will find an appropriate PROC (or procedure) that will summarize or analyze your data appropriate. Often times relevant graphs and summaries are created with a single PROC.</p>
<p>At the end of this section the reader should be able to do the following:</p>
<ul>
<li>install SAS University Edition<br />
</li>
<li>read and write basic SAS programs<br />
</li>
<li>import well-formatted data into SAS</li>
<li>do basic data manipulation in SAS</li>
</ul>
<p>As the book progresses the steps of summarizing and analyzing the data will be covered. Let’s get started!</p>
<div id="basics-of-sas" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Basics of SAS</h3>
</div>
<div id="reading-data-with-sas" class="section level3">
<h3><span class="header-section-number">1.4.2</span> Reading Data with SAS</h3>
</div>
<div id="manipulating-data-with-sas" class="section level3">
<h3><span class="header-section-number">1.4.3</span> Manipulating Data with SAS</h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="sampling-schemes-and-experimental-design.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["StatisticalMethods.pdf", "StatisticalMethods.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
