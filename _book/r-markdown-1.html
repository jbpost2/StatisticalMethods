<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 26 R Markdown | Statistical Methods</title>
  <meta name="description" content="Applied statistical methods book." />
  <meta name="generator" content="bookdown 0.17.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 26 R Markdown | Statistical Methods" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Applied statistical methods book." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 26 R Markdown | Statistical Methods" />
  
  <meta name="twitter:description" content="Applied statistical methods book." />
  

<meta name="author" content="Post, Avery, Osborne" />


<meta name="date" content="2020-03-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="notation.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-the-book"><i class="fa fa-check"></i><b>1.1</b> About the book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i><b>1.2</b> Software</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>1.3</b> R</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>1.3.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#using-rstudio"><i class="fa fa-check"></i><b>1.3.2</b> Using RStudio</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#r-objects-and-classes"><i class="fa fa-check"></i><b>1.3.3</b> R Objects and Classes</a></li>
<li class="chapter" data-level="1.3.4" data-path="index.html"><a href="index.html#data-objects"><i class="fa fa-check"></i><b>1.3.4</b> Data Objects</a></li>
<li class="chapter" data-level="1.3.5" data-path="index.html"><a href="index.html#accessing-common-data-objects"><i class="fa fa-check"></i><b>1.3.5</b> Accessing Common Data Objects</a></li>
<li class="chapter" data-level="1.3.6" data-path="index.html"><a href="index.html#recap"><i class="fa fa-check"></i><b>1.3.6</b> Recap!</a></li>
<li class="chapter" data-level="1.3.7" data-path="index.html"><a href="index.html#r-reading-data"><i class="fa fa-check"></i><b>1.3.7</b> R Reading Data</a></li>
<li class="chapter" data-level="1.3.8" data-path="index.html"><a href="index.html#r-manipulating-data"><i class="fa fa-check"></i><b>1.3.8</b> R Manipulating Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>2</b> R Markdown</a><ul>
<li class="chapter" data-level="2.0.1" data-path="r-markdown.html"><a href="r-markdown.html#sas"><i class="fa fa-check"></i><b>2.0.1</b> SAS</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html"><i class="fa fa-check"></i><b>3</b> Sampling, Experiments, and Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#data-in-the-wild"><i class="fa fa-check"></i><b>3.1</b> Data in the Wild</a><ul>
<li class="chapter" data-level="3.1.1" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#data-from-experiments"><i class="fa fa-check"></i><b>3.1.1</b> Data from Experiments</a></li>
<li class="chapter" data-level="3.1.2" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#data-from-observational-studies"><i class="fa fa-check"></i><b>3.1.2</b> Data from Observational Studies</a></li>
<li class="chapter" data-level="3.1.3" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#observational-vs-experimental"><i class="fa fa-check"></i><b>3.1.3</b> Observational vs Experimental</a></li>
<li class="chapter" data-level="3.1.4" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#the-role-of-statistics"><i class="fa fa-check"></i><b>3.1.4</b> The Role of Statistics</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#descriptive-study---farmers-market"><i class="fa fa-check"></i><b>3.2</b> Descriptive Study - Farmer’s Market</a><ul>
<li class="chapter" data-level="3.2.1" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#define-objective-background"><i class="fa fa-check"></i><b>3.2.1</b> Define Objective &amp; Background</a></li>
<li class="chapter" data-level="3.2.2" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#select-response"><i class="fa fa-check"></i><b>3.2.2</b> Select Response</a></li>
<li class="chapter" data-level="3.2.3" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#determine-sources-of-variation"><i class="fa fa-check"></i><b>3.2.3</b> Determine Sources of Variation</a></li>
<li class="chapter" data-level="3.2.4" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#select-design"><i class="fa fa-check"></i><b>3.2.4</b> Select Design</a></li>
<li class="chapter" data-level="3.2.5" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#do-study"><i class="fa fa-check"></i><b>3.2.5</b> Do Study</a></li>
<li class="chapter" data-level="3.2.6" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#do-statistical-analysis"><i class="fa fa-check"></i><b>3.2.6</b> Do Statistical Analysis</a></li>
<li class="chapter" data-level="3.2.7" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#draw-conclusions-communicate"><i class="fa fa-check"></i><b>3.2.7</b> Draw Conclusions &amp; Communicate</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#statistical-testing-ideas---simulated-experiment"><i class="fa fa-check"></i><b>3.3</b> Statistical Testing Ideas - Simulated Experiment</a><ul>
<li class="chapter" data-level="3.3.1" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#define-objective-background-1"><i class="fa fa-check"></i><b>3.3.1</b> Define Objective &amp; Background</a></li>
<li class="chapter" data-level="3.3.2" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#select-response-1"><i class="fa fa-check"></i><b>3.3.2</b> Select Response</a></li>
<li class="chapter" data-level="3.3.3" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#determine-sources-of-variation-1"><i class="fa fa-check"></i><b>3.3.3</b> Determine Sources of Variation</a></li>
<li class="chapter" data-level="3.3.4" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#select-design-1"><i class="fa fa-check"></i><b>3.3.4</b> Select Design</a></li>
<li class="chapter" data-level="3.3.5" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#do-study-1"><i class="fa fa-check"></i><b>3.3.5</b> Do Study</a></li>
<li class="chapter" data-level="3.3.6" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#do-statistical-analysis-1"><i class="fa fa-check"></i><b>3.3.6</b> Do Statistical Analysis</a></li>
<li class="chapter" data-level="3.3.7" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#draw-conclusions-communicate-1"><i class="fa fa-check"></i><b>3.3.7</b> Draw Conclusions &amp; Communicate</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#statistical-ideas-and-concepts"><i class="fa fa-check"></i><b>3.4</b> Statistical Ideas and Concepts</a><ul>
<li class="chapter" data-level="3.4.1" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#study-purpose"><i class="fa fa-check"></i><b>3.4.1</b> Study Purpose</a></li>
<li class="chapter" data-level="3.4.2" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#summarizing-data"><i class="fa fa-check"></i><b>3.4.2</b> Summarizing Data</a></li>
<li class="chapter" data-level="3.4.3" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#study-types"><i class="fa fa-check"></i><b>3.4.3</b> Study Types</a></li>
<li class="chapter" data-level="3.4.4" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#suggestions-for-further-readings"><i class="fa fa-check"></i><b>3.4.4</b> Suggestions for Further Readings</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#software-1"><i class="fa fa-check"></i><b>3.5</b> Software</a><ul>
<li class="chapter" data-level="3.5.1" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#r-1"><i class="fa fa-check"></i><b>3.5.1</b> R</a></li>
<li class="chapter" data-level="3.5.2" data-path="sampling-experiments-and-exploratory-data-analysis.html"><a href="sampling-experiments-and-exploratory-data-analysis.html#sas-1"><i class="fa fa-check"></i><b>3.5.2</b> SAS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="point-estimates.html"><a href="point-estimates.html"><i class="fa fa-check"></i><b>4</b> Point Estimates</a><ul>
<li class="chapter" data-level="4.1" data-path="point-estimates.html"><a href="point-estimates.html#estiamte-with-means"><i class="fa fa-check"></i><b>4.1</b> Estiamte with means</a><ul>
<li class="chapter" data-level="4.1.1" data-path="point-estimates.html"><a href="point-estimates.html#experiment-background"><i class="fa fa-check"></i><b>4.1.1</b> Experiment background</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="point-estimates.html"><a href="point-estimates.html#estimate-with-quantiles"><i class="fa fa-check"></i><b>4.2</b> Estimate with quantiles</a><ul>
<li class="chapter" data-level="4.2.1" data-path="point-estimates.html"><a href="point-estimates.html#experiment-background-1"><i class="fa fa-check"></i><b>4.2.1</b> Experiment background</a></li>
<li class="chapter" data-level="4.2.2" data-path="point-estimates.html"><a href="point-estimates.html#define-the-object-of-the-experiment"><i class="fa fa-check"></i><b>4.2.2</b> Define the object of the experiment</a></li>
<li class="chapter" data-level="4.2.3" data-path="point-estimates.html"><a href="point-estimates.html#select-appropriate-response-variables"><i class="fa fa-check"></i><b>4.2.3</b> Select appropriate response variables</a></li>
<li class="chapter" data-level="4.2.4" data-path="point-estimates.html"><a href="point-estimates.html#identify-sources-of-variation"><i class="fa fa-check"></i><b>4.2.4</b> IDentify sources of variation</a></li>
<li class="chapter" data-level="4.2.5" data-path="point-estimates.html"><a href="point-estimates.html#choose-an-experimental-design"><i class="fa fa-check"></i><b>4.2.5</b> Choose an experimental design</a></li>
<li class="chapter" data-level="4.2.6" data-path="point-estimates.html"><a href="point-estimates.html#perform-the-test"><i class="fa fa-check"></i><b>4.2.6</b> Perform the test</a></li>
<li class="chapter" data-level="4.2.7" data-path="point-estimates.html"><a href="point-estimates.html#statistically-analyze-the-data"><i class="fa fa-check"></i><b>4.2.7</b> Statistically analyze the data</a></li>
<li class="chapter" data-level="4.2.8" data-path="point-estimates.html"><a href="point-estimates.html#draw-conclusions"><i class="fa fa-check"></i><b>4.2.8</b> Draw conclusions</a></li>
<li class="chapter" data-level="4.2.9" data-path="point-estimates.html"><a href="point-estimates.html#discussion"><i class="fa fa-check"></i><b>4.2.9</b> Discussion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="accounting-for-uncertainty.html"><a href="accounting-for-uncertainty.html"><i class="fa fa-check"></i><b>5</b> Accounting for Uncertainty</a><ul>
<li class="chapter" data-level="5.1" data-path="accounting-for-uncertainty.html"><a href="accounting-for-uncertainty.html#example-one"><i class="fa fa-check"></i><b>5.1</b> Example one</a></li>
<li class="chapter" data-level="5.2" data-path="accounting-for-uncertainty.html"><a href="accounting-for-uncertainty.html#example-two"><i class="fa fa-check"></i><b>5.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="HT.html"><a href="HT.html"><i class="fa fa-check"></i><b>6</b> Inference via Hypothesis Tests for One Sample</a><ul>
<li class="chapter" data-level="6.1" data-path="HT.html"><a href="HT.html#example-detection-probability"><i class="fa fa-check"></i><b>6.1</b> Example: Detection Probability</a><ul>
<li class="chapter" data-level="6.1.1" data-path="HT.html"><a href="HT.html#understanding-system-performance"><i class="fa fa-check"></i><b>6.1.1</b> Understanding system performance</a></li>
<li class="chapter" data-level="6.1.2" data-path="HT.html"><a href="HT.html#data-analysis"><i class="fa fa-check"></i><b>6.1.2</b> Data Analysis</a></li>
<li class="chapter" data-level="6.1.3" data-path="HT.html"><a href="HT.html#data-from-experiments-1"><i class="fa fa-check"></i><b>6.1.3</b> Data from Experiments</a></li>
<li class="chapter" data-level="6.1.4" data-path="HT.html"><a href="HT.html#data-from-observational-studies-1"><i class="fa fa-check"></i><b>6.1.4</b> Data from Observational Studies</a></li>
<li class="chapter" data-level="6.1.5" data-path="HT.html"><a href="HT.html#observational-vs-experimental-1"><i class="fa fa-check"></i><b>6.1.5</b> Observational vs Experimental</a></li>
<li class="chapter" data-level="6.1.6" data-path="HT.html"><a href="HT.html#the-role-of-statistics-1"><i class="fa fa-check"></i><b>6.1.6</b> The Role of Statistics</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="HT.html"><a href="HT.html#marketing-example"><i class="fa fa-check"></i><b>6.2</b> Marketing Example</a><ul>
<li class="chapter" data-level="6.2.1" data-path="HT.html"><a href="HT.html#experiment-background-2"><i class="fa fa-check"></i><b>6.2.1</b> Experiment Background</a></li>
<li class="chapter" data-level="6.2.2" data-path="HT.html"><a href="HT.html#selecting-response-variables"><i class="fa fa-check"></i><b>6.2.2</b> Selecting Response Variables</a></li>
<li class="chapter" data-level="6.2.3" data-path="HT.html"><a href="HT.html#identifying-sources-of-variation"><i class="fa fa-check"></i><b>6.2.3</b> Identifying Sources of Variation</a></li>
<li class="chapter" data-level="6.2.4" data-path="HT.html"><a href="HT.html#choose-an-experimental-design-1"><i class="fa fa-check"></i><b>6.2.4</b> Choose an Experimental Design <!-- Is this intended to include any sampling considerations?--></a></li>
<li class="chapter" data-level="6.2.5" data-path="HT.html"><a href="HT.html#peform-the-test"><i class="fa fa-check"></i><b>6.2.5</b> Peform the Test <!-- Wait, does this mean to actually execute the experiment? --></a></li>
<li class="chapter" data-level="6.2.6" data-path="HT.html"><a href="HT.html#look-at-the-data"><i class="fa fa-check"></i><b>6.2.6</b> Look at the Data <!-- I think we need to add this as a much needed step!  If nothing else than for data validation.  I'm assuming perform the test now means collect the data. Perhaps this could fall into the Statistically analyze the data part though... Might be good to separate out the exploring/validating part though.  --></a></li>
<li class="chapter" data-level="6.2.7" data-path="HT.html"><a href="HT.html#statistically-analyze-the-data-1"><i class="fa fa-check"></i><b>6.2.7</b> Statistically Analyze the Data</a></li>
<li class="chapter" data-level="6.2.8" data-path="HT.html"><a href="HT.html#draw-conclusions-1"><i class="fa fa-check"></i><b>6.2.8</b> Draw conclusions</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="HT.html"><a href="HT.html#statistical-testing-ideas"><i class="fa fa-check"></i><b>6.3</b> Statistical Testing Ideas</a><ul>
<li class="chapter" data-level="6.3.1" data-path="HT.html"><a href="HT.html#experiment-background-3"><i class="fa fa-check"></i><b>6.3.1</b> Experiment Background</a></li>
<li class="chapter" data-level="6.3.2" data-path="HT.html"><a href="HT.html#selecting-response-variables-1"><i class="fa fa-check"></i><b>6.3.2</b> Selecting Response Variables</a></li>
<li class="chapter" data-level="6.3.3" data-path="HT.html"><a href="HT.html#identifying-sources-of-variation-1"><i class="fa fa-check"></i><b>6.3.3</b> Identifying Sources of Variation</a></li>
<li class="chapter" data-level="6.3.4" data-path="HT.html"><a href="HT.html#choose-an-experimental-design-2"><i class="fa fa-check"></i><b>6.3.4</b> Choose an Experimental Design</a></li>
<li class="chapter" data-level="6.3.5" data-path="HT.html"><a href="HT.html#peform-the-test-1"><i class="fa fa-check"></i><b>6.3.5</b> Peform the Test</a></li>
<li class="chapter" data-level="6.3.6" data-path="HT.html"><a href="HT.html#explore-the-data"><i class="fa fa-check"></i><b>6.3.6</b> Explore the Data</a></li>
<li class="chapter" data-level="6.3.7" data-path="HT.html"><a href="HT.html#statistically-analyze-the-data-2"><i class="fa fa-check"></i><b>6.3.7</b> Statistically Analyze the Data</a></li>
<li class="chapter" data-level="6.3.8" data-path="HT.html"><a href="HT.html#draw-conclusions-2"><i class="fa fa-check"></i><b>6.3.8</b> Draw conclusions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="HT.html"><a href="HT.html#software-2"><i class="fa fa-check"></i><b>6.4</b> Software</a><ul>
<li class="chapter" data-level="6.4.1" data-path="HT.html"><a href="HT.html#r-2"><i class="fa fa-check"></i><b>6.4.1</b> R</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="HT.html"><a href="HT.html#finding-a-specific-value-from-a-probability-distribution-function-or-probability-mass-function"><i class="fa fa-check"></i><b>6.5</b> Finding a specific value from a Probability Distribution Function or Probability Mass Function</a></li>
<li class="chapter" data-level="6.6" data-path="HT.html"><a href="HT.html#finding-the-area-under-the-curve"><i class="fa fa-check"></i><b>6.6</b> Finding the area under the curve</a></li>
<li class="chapter" data-level="6.7" data-path="HT.html"><a href="HT.html#finding-quantiles-of-distributions"><i class="fa fa-check"></i><b>6.7</b> Finding quantiles of distributions</a></li>
<li class="chapter" data-level="6.8" data-path="HT.html"><a href="HT.html#generating-random-numbers"><i class="fa fa-check"></i><b>6.8</b> Generating random numbers</a></li>
<li class="chapter" data-level="6.9" data-path="HT.html"><a href="HT.html#other-distributions"><i class="fa fa-check"></i><b>6.9</b> Other distributions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="CI.html"><a href="CI.html"><i class="fa fa-check"></i><b>7</b> Inference via Confidence Intervals for One Sample</a><ul>
<li class="chapter" data-level="7.1" data-path="CI.html"><a href="CI.html#the-normal-approximation"><i class="fa fa-check"></i><b>7.1</b> The normal approximation</a><ul>
<li class="chapter" data-level="7.1.1" data-path="CI.html"><a href="CI.html#analog-ci"><i class="fa fa-check"></i><b>7.1.1</b> Analog CI</a></li>
<li class="chapter" data-level="7.1.2" data-path="CI.html"><a href="CI.html#easy-mode"><i class="fa fa-check"></i><b>7.1.2</b> Easy mode</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="CI.html"><a href="CI.html#other-types-of-binomial-confidence-intervals"><i class="fa fa-check"></i><b>7.2</b> Other types of binomial confidence intervals</a><ul>
<li class="chapter" data-level="7.2.1" data-path="CI.html"><a href="CI.html#exact-cis-aka-clopper-pearson"><i class="fa fa-check"></i><b>7.2.1</b> Exact CIs, aka Clopper-Pearson</a></li>
<li class="chapter" data-level="7.2.2" data-path="CI.html"><a href="CI.html#bayesian-intervals"><i class="fa fa-check"></i><b>7.2.2</b> Bayesian intervals</a></li>
<li class="chapter" data-level="7.2.3" data-path="CI.html"><a href="CI.html#a-good-general-use-ci"><i class="fa fa-check"></i><b>7.2.3</b> A good general-use CI</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="twocategorical.html"><a href="twocategorical.html"><i class="fa fa-check"></i><b>8</b> Inference for Two Categorical Variables</a></li>
<li class="chapter" data-level="9" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>9</b> One-Way ANOVA</a></li>
<li class="chapter" data-level="10" data-path="motivating-example.html"><a href="motivating-example.html"><i class="fa fa-check"></i><b>10</b> Motivating example</a></li>
<li class="chapter" data-level="11" data-path="simple-model-for-the-data.html"><a href="simple-model-for-the-data.html"><i class="fa fa-check"></i><b>11</b> Simple model for the data</a></li>
<li class="chapter" data-level="12" data-path="exploratory-analysis.html"><a href="exploratory-analysis.html"><i class="fa fa-check"></i><b>12</b> exploratory analysis</a></li>
<li class="chapter" data-level="13" data-path="sources-of-variation.html"><a href="sources-of-variation.html"><i class="fa fa-check"></i><b>13</b> sources of variation</a></li>
<li class="chapter" data-level="14" data-path="statistical-model-and-analysis.html"><a href="statistical-model-and-analysis.html"><i class="fa fa-check"></i><b>14</b> statistical model and analysis</a></li>
<li class="chapter" data-level="15" data-path="compare-analyses.html"><a href="compare-analyses.html"><i class="fa fa-check"></i><b>15</b> compare analyses</a></li>
<li class="chapter" data-level="16" data-path="multiway.html"><a href="multiway.html"><i class="fa fa-check"></i><b>16</b> Multi-way ANOVA</a></li>
<li class="chapter" data-level="17" data-path="block.html"><a href="block.html"><i class="fa fa-check"></i><b>17</b> Block Designs</a></li>
<li class="chapter" data-level="18" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>18</b> Regression Models</a></li>
<li class="chapter" data-level="19" data-path="glm.html"><a href="glm.html"><i class="fa fa-check"></i><b>19</b> The General Linear Model</a></li>
<li class="chapter" data-level="20" data-path="mixedmodels.html"><a href="mixedmodels.html"><i class="fa fa-check"></i><b>20</b> Mixed Models</a></li>
<li class="chapter" data-level="21" data-path="repeatedmeasures.html"><a href="repeatedmeasures.html"><i class="fa fa-check"></i><b>21</b> Split Plot and Repeated Measures Designs</a></li>
<li class="chapter" data-level="22" data-path="logistic.html"><a href="logistic.html"><i class="fa fa-check"></i><b>22</b> Logistic Regression and Generalized Linear Models</a><ul>
<li class="chapter" data-level="22.1" data-path="logistic.html"><a href="logistic.html#stuff-here"><i class="fa fa-check"></i><b>22.1</b> Stuff here</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="glmm.html"><a href="glmm.html"><i class="fa fa-check"></i><b>23</b> Generalized Linear Mixed Models</a></li>
<li class="chapter" data-level="24" data-path="learningobj.html"><a href="learningobj.html"><i class="fa fa-check"></i><b>24</b> Appendix - Learning Objectives</a><ul>
<li class="chapter" data-level="24.1" data-path="learningobj.html"><a href="learningobj.html#book-level"><i class="fa fa-check"></i><b>24.1</b> Book-level</a></li>
<li class="chapter" data-level="24.2" data-path="learningobj.html"><a href="learningobj.html#topic-level"><i class="fa fa-check"></i><b>24.2</b> Topic-level</a><ul>
<li class="chapter" data-level="24.2.1" data-path="learningobj.html"><a href="learningobj.html#chapter-2---sampling-design-and-exploratory-data-analysis"><i class="fa fa-check"></i><b>24.2.1</b> Chapter 2 - Sampling, Design, and Exploratory Data Analysis</a></li>
<li class="chapter" data-level="24.2.2" data-path="learningobj.html"><a href="learningobj.html#chapter-3---point-estimation"><i class="fa fa-check"></i><b>24.2.2</b> Chapter 3 - Point Estimation</a></li>
<li class="chapter" data-level="24.2.3" data-path="learningobj.html"><a href="learningobj.html#chapter-4---accounting-for-uncertainty-in-estimation"><i class="fa fa-check"></i><b>24.2.3</b> Chapter 4 - Accounting for Uncertainty in Estimation</a></li>
<li class="chapter" data-level="24.2.4" data-path="learningobj.html"><a href="learningobj.html#chapter-5---inference-via-hypothesis-testing-for-a-proportion-or-mean"><i class="fa fa-check"></i><b>24.2.4</b> Chapter 5 - Inference via Hypothesis Testing for a Proportion or Mean</a></li>
<li class="chapter" data-level="24.2.5" data-path="learningobj.html"><a href="learningobj.html#chapter-6---inference-via-confidence-intervals-for-a-proportion-or-mean"><i class="fa fa-check"></i><b>24.2.5</b> Chapter 6 - Inference via Confidence Intervals for a Proportion or Mean</a></li>
<li class="chapter" data-level="24.2.6" data-path="learningobj.html"><a href="learningobj.html#chapter-7---inference-on-two-categorical-variables"><i class="fa fa-check"></i><b>24.2.6</b> Chapter 7 - Inference on Two Categorical Variables</a></li>
<li class="chapter" data-level="24.2.7" data-path="learningobj.html"><a href="learningobj.html#chapter-8---inference-for-multiple-means"><i class="fa fa-check"></i><b>24.2.7</b> Chapter 8 - Inference for Multiple Means</a></li>
<li class="chapter" data-level="24.2.8" data-path="learningobj.html"><a href="learningobj.html#chapter-9---multiway-anova"><i class="fa fa-check"></i><b>24.2.8</b> Chapter 9 - Multiway ANOVA</a></li>
<li class="chapter" data-level="24.2.9" data-path="learningobj.html"><a href="learningobj.html#chapter-10---block-designs"><i class="fa fa-check"></i><b>24.2.9</b> Chapter 10 - Block Designs</a></li>
<li class="chapter" data-level="24.2.10" data-path="learningobj.html"><a href="learningobj.html#chapter-11---regression"><i class="fa fa-check"></i><b>24.2.10</b> Chapter 11 - Regression</a></li>
<li class="chapter" data-level="24.2.11" data-path="learningobj.html"><a href="learningobj.html#chapter-12---the-general-linear-model"><i class="fa fa-check"></i><b>24.2.11</b> Chapter 12 - The General Linear Model</a></li>
<li class="chapter" data-level="24.2.12" data-path="learningobj.html"><a href="learningobj.html#chapter-13---mixed-models"><i class="fa fa-check"></i><b>24.2.12</b> Chapter 13 - Mixed Models</a></li>
<li class="chapter" data-level="24.2.13" data-path="learningobj.html"><a href="learningobj.html#chapter-14---repeated-measures-and-split-plot-designs"><i class="fa fa-check"></i><b>24.2.13</b> Chapter 14 - Repeated Measures and Split Plot Designs</a></li>
<li class="chapter" data-level="24.2.14" data-path="learningobj.html"><a href="learningobj.html#chapter-15---logistic-regression-and-generalized-linear-models"><i class="fa fa-check"></i><b>24.2.14</b> Chapter 15 - Logistic Regression and Generalized Linear Models</a></li>
<li class="chapter" data-level="24.2.15" data-path="learningobj.html"><a href="learningobj.html#chapter-16---generalized-linear-mixed-models"><i class="fa fa-check"></i><b>24.2.15</b> Chapter 16 - Generalized Linear Mixed Models</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="learningobj.html"><a href="learningobj.html#from-st512"><i class="fa fa-check"></i><b>24.3</b> From ST512</a></li>
<li class="chapter" data-level="24.4" data-path="learningobj.html"><a href="learningobj.html#for-point-estimates-chapter"><i class="fa fa-check"></i><b>24.4</b> For Point Estimates Chapter</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="25" data-path="notation.html"><a href="notation.html"><i class="fa fa-check"></i><b>25</b> Appendix - Notation</a><ul>
<li class="chapter" data-level="25.1" data-path="notation.html"><a href="notation.html#standard-notation"><i class="fa fa-check"></i><b>25.1</b> Standard notation</a></li>
<li class="chapter" data-level="25.2" data-path="notation.html"><a href="notation.html#mixed-models"><i class="fa fa-check"></i><b>25.2</b> Mixed models</a></li>
<li class="chapter" data-level="25.3" data-path="notation.html"><a href="notation.html#effects-model-representation"><i class="fa fa-check"></i><b>25.3</b> Effects model representation</a></li>
<li class="chapter" data-level="25.4" data-path="notation.html"><a href="notation.html#estimators-vs.-estimates"><i class="fa fa-check"></i><b>25.4</b> Estimators vs. Estimates</a><ul>
<li class="chapter" data-level="25.4.1" data-path="notation.html"><a href="notation.html#installing-r-and-rstudio-1"><i class="fa fa-check"></i><b>25.4.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="25.4.2" data-path="notation.html"><a href="notation.html#using-rstudio-1"><i class="fa fa-check"></i><b>25.4.2</b> Using RStudio</a></li>
<li class="chapter" data-level="25.4.3" data-path="notation.html"><a href="notation.html#r-objects-and-classes-1"><i class="fa fa-check"></i><b>25.4.3</b> R Objects and Classes</a></li>
<li class="chapter" data-level="25.4.4" data-path="notation.html"><a href="notation.html#data-objects-1"><i class="fa fa-check"></i><b>25.4.4</b> Data Objects</a></li>
<li class="chapter" data-level="25.4.5" data-path="notation.html"><a href="notation.html#accessing-common-data-objects-1"><i class="fa fa-check"></i><b>25.4.5</b> Accessing Common Data Objects</a></li>
<li class="chapter" data-level="25.4.6" data-path="notation.html"><a href="notation.html#recap-1"><i class="fa fa-check"></i><b>25.4.6</b> Recap!</a></li>
<li class="chapter" data-level="25.4.7" data-path="notation.html"><a href="notation.html#r-manipulating-data-1"><i class="fa fa-check"></i><b>25.4.7</b> R Manipulating Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="r-markdown-1.html"><a href="r-markdown-1.html"><i class="fa fa-check"></i><b>26</b> R Markdown</a><ul>
<li class="chapter" data-level="26.0.1" data-path="r-markdown-1.html"><a href="r-markdown-1.html#r-reading-data-1"><i class="fa fa-check"></i><b>26.0.1</b> R Reading Data</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistical Methods</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-markdown-1" class="section level1">
<h1><span class="header-section-number">Chapter 26</span> R Markdown</h1>
<p>This is an R Markdown document. Markdown is a simple formatting syntax
for authoring HTML, PDF, and MS Word documents. For more details on
using R Markdown see <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>When you click the Knit button a document will be generated that
includes both content as well as the output of any embedded R code
chunks within the document.</p>
<p>Where do we go from here?</p>
<p>Briefly investigate:</p>
<ul>
<li><p>Markdown syntax</p></li>
<li><p>Code chunks and their options</p></li>
<li><p>Changing type of output</p></li>
</ul>
<p>Documenting with Markdown</p>
<p>Markdown syntax</p>
<ul>
<li><code>[Cheat Sheet link](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)</code> becomes <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">Cheat Sheet link</a></li>
</ul>
<p>Documenting with Markdown</p>
<p>Markdown syntax</p>
<ul>
<li><p><code>[Cheat Sheet link](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)</code> becomes <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">Cheat Sheet link</a></p></li>
<li><p><code># Header 1</code> becomes a large font header</p></li>
<li><p><code>Header 2</code> becomes a slightly smaller font header</p></li>
<li><p>Goes to 6 headers</p>
<ul>
<li>Use of headers can automatically create a Table of Contents!</li>
</ul></li>
</ul>
<p>Documenting with Markdown</p>
<p>Markdown syntax</p>
<ul>
<li><p><code>[Cheat Sheet link](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)</code> becomes <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">Cheat Sheet link</a></p></li>
<li><p><code># Header 1</code> becomes a large font header</p></li>
<li><p><code>Header 2</code> becomes a slightly smaller font header</p></li>
<li><p>Goes to 6 headers</p>
<ul>
<li>Use of headers can automatically create a Table of Contents!</li>
</ul></li>
<li><p><code>bold</code> and <code>__bold__</code></p></li>
<li><p>`code` becomes <code>code</code></p></li>
</ul>
<p>Documenting with Markdown</p>
<p>Markdown syntax</p>
<ul>
<li><p>Can do lists: be sure to end each line with two spaces!</p>
<ul>
<li>Indent sub lists four spaces</li>
</ul></li>
</ul>
<div style="float: left; width: 50%">
<pre><code>* unordered list  
* item 2  
    + sub-item 1  
    + sub-item 2  

1. ordered list  
2. item 2  
    + sub-item 1  
    + sub-item 2  </code></pre>
</div>
<div style="float: right; width: 50%">
<ul>
<li>unordered list<br />
</li>
<li>item 2
<ul>
<li>sub-item 1<br />
</li>
<li>sub-item 2</li>
</ul></li>
</ul>
<ol style="list-style-type: decimal">
<li>ordered list<br />
</li>
<li>item 2
<ul>
<li>sub-item 1<br />
</li>
<li>sub-item 2<br />
</li>
</ul></li>
</ol>
</div>
<p>Documenting with Markdown</p>
<p>Markdown syntax</p>
<ul>
<li>Can include nice tables (renders differently in slides than html doc)</li>
</ul>
<pre><code>Table Header  | Second Header | Col 3
------------- | ------------- | -----------
Table Cell    | Cell (1, 2)   | Cell (1, 3)
Cell (2, 1)   | Cell (2, 2)   | Cell (2, 3) </code></pre>
<table>
<thead>
<tr class="header">
<th>Table Header</th>
<th>Second Header</th>
<th>Col 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Table Cell</td>
<td>Cell (1, 2)</td>
<td>Cell (1, 3)</td>
</tr>
<tr class="even">
<td>Cell (2, 1)</td>
<td>Cell (2, 2)</td>
<td>Cell (2, 3)</td>
</tr>
</tbody>
</table>
<p>Documenting with Markdown</p>
<p>Code chunks and their options</p>
<ul>
<li><p>Any R code can go into the chunk</p></li>
<li><p>Chunks evaluate sequentially (can use output from prior chunk)</p></li>
</ul>
<blockquote>
<ul>
<li>Code can be added in line: Ex: The Iris dataset has 150 observations</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Added by beginning with back-tick <code>r</code> and ending with a back-tick: Iris has `r <code>length(iris$Sepal.Length)</code>`</li>
</ul>
</blockquote>
<p>Documenting with Markdown</p>
<p>Code chunks and their options</p>
<ul>
<li><p>Many options depending on chunk purpose!</p></li>
<li><p>Can hide/show code with <code>echo = FALSE/TRUE</code></p></li>
<li><p>Can choose if code is evaluated with <code>eval = TRUE/FALSE</code></p></li>
<li><p><code>message = TRUE/FALSE</code> and <code>warning = TRUE/FALSE</code> can turn on/off displaying messages/warnings</p></li>
</ul>
<p>Documenting with Markdown</p>
<p>Code chunks and their options</p>
<ul>
<li><p>Many options depending on chunk purpose!</p></li>
<li><p>Can hide/show code with <code>echo = FALSE/TRUE</code></p></li>
<li><p>Can choose if code is evaluated with <code>eval = TRUE/FALSE</code></p></li>
<li><p><code>message = TRUE/FALSE</code> and <code>warning = TRUE/FALSE</code> can turn on/off displaying messages/warnings</p></li>
<li><p>Can set global options for all chunks</p></li>
</ul>
<pre><code>opts_chunk$set(echo = FALSE, eval = TRUE, warning = FALSE)</code></pre>
<ul>
<li>Allows for easy change of audience!</li>
</ul>
<p>Documenting with Markdown</p>
<p>Changing type of output</p>
<p>R Markdown really flexible!</p>
<p><img src="img/compile.PNG" width="458" style="display: block; margin: auto;" /></p>
<p>Documenting with Markdown</p>
<p>Changing type of output</p>
<p>Change output type in the YAML header:</p>
<ul>
<li>Use CTRL/CMD + Shift + k or the Knit menu:</li>
</ul>
<p><img src="img/knit.PNG" width="150px" style="display: block; margin: auto;" /></p>
<blockquote>
<ul>
<li>Use code explicity:<br />
<code>rmarkdown::render("file.Rmd", output_format = "word_document")</code></li>
</ul>
</blockquote>
<p>Documenting with Markdown</p>
<p>Changing type of output</p>
<p>For HTML &amp; PDF can include Table of Contents with options</p>
<pre><code>output:
  html_document:
    toc: true
    toc_float: true</code></pre>
<p>Documenting with Markdown</p>
<p>Changing type of output</p>
<p>For HTML &amp; PDF can include Table of Contents with options</p>
<pre><code>output:
  html_document:
    toc: true
    toc_float: true</code></pre>
<p>For HTML another option is to make the code chunks hidden by default, but visible with a click:</p>
<pre><code>output:
  html_document:
    code_folding: hide</code></pre>
<p>Documenting with Markdown</p>
<p>Changing type of output</p>
<p>HTML documents inherently interactive</p>
<ul>
<li>Widgets can be included with appropriate R package</li>
</ul>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb611-1" title="1"><span class="kw">library</span>(leaflet)</a>
<a class="sourceLine" id="cb611-2" title="2"><span class="kw">leaflet</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb611-3" title="3"><span class="st">  </span><span class="kw">setView</span>(<span class="fl">174.764</span>, <span class="fl">-36.877</span>, <span class="dt">zoom =</span> <span class="dv">16</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb611-4" title="4"><span class="st">  </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb611-5" title="5"><span class="st">  </span><span class="kw">addMarkers</span>(<span class="fl">174.764</span>, <span class="fl">-36.877</span>, <span class="dt">popup =</span> <span class="st">&quot;Maungawhau&quot;</span>) </a></code></pre></div>
<p>Documenting with Markdown</p>
<p>Changing type of output</p>
<div id="htmlwidget-5dc301bce2803d6f6401" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5dc301bce2803d6f6401">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[-36.877,174.764],16,[]],"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[-36.877,174.764,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"Maungawhau",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-36.877,-36.877],"lng":[174.764,174.764]}},"evals":[],"jsHooks":[]}</script>
<p>Documenting with Markdown</p>
<p>Changing type of output</p>
<ul>
<li>PDF
<ul>
<li>Install MikTex and update its packages</li>
</ul></li>
</ul>
<pre><code>output: pdf_document   </code></pre>
<p>Documenting with Markdown</p>
<p>Changing type of output</p>
<ul>
<li>PDF
<ul>
<li>Install MikTex and update its packages</li>
</ul></li>
</ul>
<pre><code>output: pdf_document   </code></pre>
<ul>
<li>Word</li>
</ul>
<pre><code>output: word_document</code></pre>
<ul>
<li>Slides ( for new slide)</li>
</ul>
<p>Recap/Next Up!</p>
<ul>
<li><p>Data manipulation idea</p></li>
<li><p>Documenting with Markdown</p></li>
<li><p>Logical statements</p></li>
<li><p><code>dplyr</code></p></li>
<li><p>Creating new variables</p>
<ul>
<li>Conditional execution (if then)<br />
</li>
<li>For loops<br />
</li>
<li>Vectorized functions</li>
</ul></li>
<li><p>Reshaping Data</p></li>
</ul>
<p>Where are we at?</p>
<ul>
<li><p>Data manipulation idea</p></li>
<li><p>Documenting with Markdown</p></li>
<li><p>Logical statements</p></li>
<li><p><code>dplyr</code></p></li>
<li><p>Creating new variables</p>
<ul>
<li>Conditional execution (if then)<br />
</li>
<li>For loops<br />
</li>
<li>Vectorized functions</li>
</ul></li>
<li><p>Reshaping Data</p></li>
</ul>
<p>Data manipulation idea</p>
<p>We may want to subset our full data set or create new data</p>
<ul>
<li>Grab only certain types of observations (filter rows)</li>
</ul>
<p><img src="img/filterVisual.png" width="400px" style="display: block; margin: auto;" /></p>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li>logical statement - comparison that resolves as <code>TRUE</code> or <code>FALSE</code></li>
</ul>
<div style="float: left; width: 45%;">
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb615-1" title="1"><span class="st">&quot;hi&quot;</span> <span class="op">==</span><span class="st"> &quot; hi&quot;</span> <span class="co">#== is comparison</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb617-1" title="1"><span class="st">&quot;hi&quot;</span> <span class="op">==</span><span class="st"> &quot;hi&quot;</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb619-1" title="1"><span class="dv">4</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div style="float: right; width: 45%;">
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb621-1" title="1"><span class="dv">4</span> <span class="op">!=</span><span class="st"> </span><span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb623-1" title="1"><span class="kw">sqrt</span>(<span class="dv">3</span>)<span class="op">^</span><span class="dv">2</span>  <span class="op">==</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb625-1" title="1">dplyr<span class="op">::</span><span class="kw">near</span>(<span class="kw">sqrt</span>(<span class="dv">3</span>)<span class="op">^</span><span class="dv">2</span>, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li>logical statement - comparison that resolves as <code>TRUE</code> or <code>FALSE</code></li>
</ul>
<div style="float: left; width: 45%;">
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb627-1" title="1"><span class="co">#use of is. functions</span></a>
<a class="sourceLine" id="cb627-2" title="2"><span class="kw">is.numeric</span>(<span class="st">&quot;Word&quot;</span>)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb629-1" title="1"><span class="kw">is.numeric</span>(<span class="dv">10</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div style="float: right; width: 45%;">
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb631-1" title="1"><span class="kw">is.character</span>(<span class="st">&quot;10&quot;</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb633-1" title="1"><span class="kw">is.na</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">3</span>))</a></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb635-1" title="1"><span class="kw">is.matrix</span>(<span class="kw">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;world&quot;</span>))</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li>logical statement - useful for indexing an R object</li>
</ul>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb637-1" title="1">iris &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(iris)</a>
<a class="sourceLine" id="cb637-2" title="2">iris</a></code></pre></div>
<pre><code>## # A tibble: 150 x 6
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species extra
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt;
##  1          5.1         3.5          1.4         0.2 setosa  a    
##  2          4.9         3            1.4         0.2 setosa  a    
##  3          4.7         3.2          1.3         0.2 setosa  a    
##  4          4.6         3.1          1.5         0.2 setosa  a    
##  5          5           3.6          1.4         0.2 setosa  a    
##  6          5.4         3.9          1.7         0.4 setosa  a    
##  7          4.6         3.4          1.4         0.3 setosa  a    
##  8          5           3.4          1.5         0.2 setosa  a    
##  9          4.4         2.9          1.4         0.2 setosa  a    
## 10          4.9         3.1          1.5         0.1 setosa  a    
## # ... with 140 more rows</code></pre>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li><p>logical statement - useful for indexing an R object</p></li>
<li>Concept:
<ul>
<li>Feed index a vector of <code>TRUE</code>/<code>FALSE</code> or <code>0</code>/<code>1</code> values<br />
</li>
<li>R returns elements where <code>TRUE</code> or <code>1</code> occurred</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb639-1" title="1">iris[iris<span class="op">$</span>Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>, ]</a></code></pre></div>
<p>Logical statements</p>
<ul>
<li><p>logical statement - useful for indexing an R object</p></li>
<li>Concept:
<ul>
<li>Feed index a vector of <code>TRUE</code>/<code>FALSE</code> or <code>0</code>/<code>1</code> values<br />
</li>
<li>R returns elements where <code>TRUE</code> or <code>1</code> occurred</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb640-1" title="1">iris<span class="op">$</span>Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span> <span class="co">#vector indicating setosa values</span></a></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li>logical statement - useful for indexing an R object</li>
</ul>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb642-1" title="1">iris[iris<span class="op">$</span>Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>, ]</a></code></pre></div>
<pre><code>## # A tibble: 50 x 6
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species extra
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt;
##  1          5.1         3.5          1.4         0.2 setosa  a    
##  2          4.9         3            1.4         0.2 setosa  a    
##  3          4.7         3.2          1.3         0.2 setosa  a    
##  4          4.6         3.1          1.5         0.2 setosa  a    
##  5          5           3.6          1.4         0.2 setosa  a    
##  6          5.4         3.9          1.7         0.4 setosa  a    
##  7          4.6         3.4          1.4         0.3 setosa  a    
##  8          5           3.4          1.5         0.2 setosa  a    
##  9          4.4         2.9          1.4         0.2 setosa  a    
## 10          4.9         3.1          1.5         0.1 setosa  a    
## # ... with 40 more rows</code></pre>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li><p>logical statement - useful for indexing an R object</p></li>
<li><p>Similarly, can use <code>subset</code> function</p></li>
</ul>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb644-1" title="1"><span class="kw">subset</span>(iris, Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 50 x 6
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species extra
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt;
##  1          5.1         3.5          1.4         0.2 setosa  a    
##  2          4.9         3            1.4         0.2 setosa  a    
##  3          4.7         3.2          1.3         0.2 setosa  a    
##  4          4.6         3.1          1.5         0.2 setosa  a    
##  5          5           3.6          1.4         0.2 setosa  a    
##  6          5.4         3.9          1.7         0.4 setosa  a    
##  7          4.6         3.4          1.4         0.3 setosa  a    
##  8          5           3.4          1.5         0.2 setosa  a    
##  9          4.4         2.9          1.4         0.2 setosa  a    
## 10          4.9         3.1          1.5         0.1 setosa  a    
## # ... with 40 more rows</code></pre>
<p><code>dplyr</code></p>
<p>Goal: Subset rows or columns</p>
<ul>
<li><p>logical statement - useful for indexing an R object</p></li>
<li><p>Similarly, can use <code>filter</code> from <code>dplyr</code> (installed with <code>tidyverse</code>)</p></li>
</ul>
<div class="sourceCode" id="cb646"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb646-1" title="1"><span class="kw">filter</span>(iris, Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 50 x 6
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species extra
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt;
##  1          5.1         3.5          1.4         0.2 setosa  a    
##  2          4.9         3            1.4         0.2 setosa  a    
##  3          4.7         3.2          1.3         0.2 setosa  a    
##  4          4.6         3.1          1.5         0.2 setosa  a    
##  5          5           3.6          1.4         0.2 setosa  a    
##  6          5.4         3.9          1.7         0.4 setosa  a    
##  7          4.6         3.4          1.4         0.3 setosa  a    
##  8          5           3.4          1.5         0.2 setosa  a    
##  9          4.4         2.9          1.4         0.2 setosa  a    
## 10          4.9         3.1          1.5         0.1 setosa  a    
## # ... with 40 more rows</code></pre>
<p>Logical statements</p>
<p>Compound logicals via Logical Operators</p>
<ul>
<li><code>&amp;</code> ‘and’</li>
<li><code>|</code> ‘or’</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>A,B true</th>
<th>A true, B false</th>
<th>A,B false</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&amp;</code></td>
<td><code>A &amp; B = TRUE</code></td>
<td><code>A &amp; B = FALSE</code></td>
<td><code>A &amp; B = FALSE</code></td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td><code>A | B = TRUE</code></td>
<td><code>A | B = TRUE</code></td>
<td><code>A | B = FALSE</code></td>
</tr>
</tbody>
</table>
<p>Logical statements</p>
<p>Compound logicals via Logical Operators</p>
<ul>
<li><code>&amp;</code> ‘and’</li>
<li><code>|</code> ‘or’</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>A,B true</th>
<th>A true, B false</th>
<th>A,B false</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&amp;</code></td>
<td><code>A &amp; B = TRUE</code></td>
<td><code>A &amp; B = FALSE</code></td>
<td><code>A &amp; B = FALSE</code></td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td><code>A | B = TRUE</code></td>
<td><code>A | B = TRUE</code></td>
<td><code>A | B = FALSE</code></td>
</tr>
</tbody>
</table>
<ul>
<li><code>&amp;&amp;</code> and <code>||</code> are alternatives
<ul>
<li>Looks at only first comparison if given a vector of comparisons</li>
</ul></li>
</ul>
<p>Logical statements</p>
<p>Compound logicals via Logical Operators</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb648-1" title="1"><span class="kw">set.seed</span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb648-2" title="2">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>); x</a></code></pre></div>
<pre><code>##  [1] 0.1680415 0.8075164 0.3849424 0.3277343 0.6021007 0.6043941 0.1246334
##  [8] 0.2946009 0.5776099 0.6309793</code></pre>
<div class="sourceCode" id="cb650"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb650-1" title="1">(x <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.25</span>) <span class="op">|</span><span class="st"> </span>(x <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.75</span>)</a></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb652-1" title="1">(x <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.25</span>) <span class="op">||</span><span class="st"> </span>(x <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.75</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li>Only pull out large petal setosa flowers</li>
</ul>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb654-1" title="1">(iris<span class="op">$</span>Petal.Length <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.5</span>) <span class="op">&amp;</span><span class="st"> </span>(iris<span class="op">$</span>Petal.Width <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.3</span>) <span class="op">&amp;</span><span class="st"> </span>(iris<span class="op">$</span>Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>)</a></code></pre></div>
<pre><code>##   [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
##  [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
##  [25] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE
##  [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li>Only pull out large petal setosa flowers</li>
</ul>
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb656-1" title="1">iris[(iris<span class="op">$</span>Petal.Length <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.5</span>) <span class="op">&amp;</span><span class="st"> </span>(iris<span class="op">$</span>Petal.Width <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.3</span>) <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb656-2" title="2"><span class="st">         </span>(iris<span class="op">$</span>Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>), ]</a></code></pre></div>
<pre><code>## # A tibble: 5 x 6
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species extra
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt;
## 1          5.4         3.9          1.7         0.4 setosa  a    
## 2          5.1         3.3          1.7         0.5 setosa  a    
## 3          5           3.4          1.6         0.4 setosa  a    
## 4          5           3.5          1.6         0.6 setosa  a    
## 5          5.1         3.8          1.9         0.4 setosa  a</code></pre>
<p>Logical statements</p>
<p>Goal: Subset rows or columns</p>
<ul>
<li><p>Only pull out large petal setosa flowers</p></li>
<li><p>Easier with <code>subset</code> or <code>filter</code>!</p></li>
</ul>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb658-1" title="1"><span class="kw">filter</span>(iris, (Petal.Length <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.5</span>) <span class="op">&amp;</span><span class="st"> </span>(Petal.Width <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.3</span>) <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb658-2" title="2"><span class="st">         </span>(Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 5 x 6
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species extra
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt;
## 1          5.4         3.9          1.7         0.4 setosa  a    
## 2          5.1         3.3          1.7         0.5 setosa  a    
## 3          5           3.4          1.6         0.4 setosa  a    
## 4          5           3.5          1.6         0.6 setosa  a    
## 5          5.1         3.8          1.9         0.4 setosa  a</code></pre>
<p><code>dplyr</code></p>
<p>Overview of dplyr and tidyr packages</p>
<ul>
<li><p><code>dplry</code> package made for most standard data manipulation tasks</p></li>
<li><p><code>tidyr</code> package reshapes data</p></li>
<li><p>Both part of <code>tidyverse</code></p></li>
<li><p>Make sure <code>library(tidyverse)</code> has been run!</p></li>
</ul>
<p><code>dplyr</code></p>
<ul>
<li>Basic commands
<ul>
<li><code>tbl_df()</code> - convert data frame to one with better printing<br />
</li>
<li><code>filter()</code> - subset rows<br />
</li>
<li><code>arrange()</code> - reorder rows<br />
</li>
<li><code>select()</code> - subset columns<br />
</li>
<li><code>rename()</code> - rename columns<br />
</li>
<li><code>mutate()</code> - add newly created column<br />
</li>
<li><code>transmute()</code> - create new variable<br />
</li>
<li><code>group_by()</code> - group rows by a variable<br />
</li>
<li><code>summarise()</code> - apply basic function to data</li>
</ul></li>
</ul>
<p>Tidyverse Syntax</p>
<ul>
<li>Reason to prefer <code>dplyr</code> and packages from the <code>tidyverse</code></li>
</ul>
<blockquote>
<ul>
<li>Fast!</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Good defaults</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>All packages have similar syntax! All work on <code>tibbles</code> (data frames)</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Syntax:
<code>function(tibble, actions, ...)</code></li>
</ul>
</blockquote>
<p><code>dplyr</code></p>
<p><code>tbl_df()</code> - convert data frame to one with better printing and no simplification</p>
<ul>
<li>Just ‘wrap’ data frame</li>
</ul>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb660-1" title="1"><span class="co">#install.packages(&quot;Lahman&quot;)</span></a>
<a class="sourceLine" id="cb660-2" title="2"><span class="kw">library</span>(Lahman)</a>
<a class="sourceLine" id="cb660-3" title="3"><span class="kw">head</span>(Batting, <span class="dt">n =</span> <span class="dv">4</span>) <span class="co">#look at just first 4 observations</span></a></code></pre></div>
<pre><code>## # A tibble: 4 x 22
##   playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 abercda~   1871     1 TRO    NA        1     4     0     0     0     0     0
## 2 addybo01   1871     1 RC1    NA       25   118    30    32     6     0     0
## 3 allisar~   1871     1 CL1    NA       29   137    28    40     4     5     0
## 4 allisdo~   1871     1 WS3    NA       27   133    28    44    10     2     2
## # ... with 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;,
## #   SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<p><code>dplyr</code></p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb662-1" title="1">Batting &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(Batting)</a>
<a class="sourceLine" id="cb662-2" title="2">Batting</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 abercda~   1871     1 TRO    NA        1     4     0     0     0     0     0
##  2 addybo01   1871     1 RC1    NA       25   118    30    32     6     0     0
##  3 allisar~   1871     1 CL1    NA       29   137    28    40     4     5     0
##  4 allisdo~   1871     1 WS3    NA       27   133    28    44    10     2     2
##  5 ansonca~   1871     1 RC1    NA       25   120    29    39    11     3     0
##  6 armstbo~   1871     1 FW1    NA       12    49     9    11     2     1     0
##  7 barkeal~   1871     1 RC1    NA        1     4     0     1     0     0     0
##  8 barnero~   1871     1 BS1    NA       31   157    66    63    10     9     0
##  9 barrebi~   1871     1 FW1    NA        1     5     1     1     1     0     0
## 10 barrofr~   1871     1 BS1    NA       18    86    13    13     2     1     0
## # ... with 105,851 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<ul>
<li>If data read in with <code>haven</code>, <code>readxl</code>, or <code>readr</code> probably in this format!</li>
</ul>
<p><code>dplyr</code></p>
<p><code>filter()</code> - subset rows</p>
<ul>
<li>Use <code>filter()</code> to obtain only PIT data</li>
</ul>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb664-1" title="1"><span class="kw">filter</span>(Batting, teamID <span class="op">==</span><span class="st"> &quot;PIT&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 4,817 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 barklsa~   1887     1 PIT    NL       89   340    44    76    10     4     1
##  2 beeched~   1887     1 PIT    NL       41   169    15    41     8     0     2
##  3 bishobi~   1887     1 PIT    NL        3     9     0     0     0     0     0
##  4 brownto~   1887     1 PIT    NL       47   192    30    47     3     4     0
##  5 carrofr~   1887     1 PIT    NL      102   421    71   138    24    15     6
##  6 colemjo~   1887     1 PIT    NL      115   475    75   139    21    11     2
##  7 dalryab~   1887     1 PIT    NL       92   358    45    76    18     5     2
##  8 fieldjo~   1887     1 PIT    NL       43   164    26    44     9     2     0
##  9 galvipu~   1887     1 PIT    NL       49   193    10    41     7     3     2
## 10 kuehnbi~   1887     1 PIT    NL      102   402    68   120    18    15     1
## # ... with 4,807 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p><code>dplyr</code></p>
<p><code>filter()</code> - subset rows</p>
<ul>
<li>Multiple filters</li>
</ul>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb666-1" title="1"><span class="kw">filter</span>(Batting, teamID <span class="op">==</span><span class="st"> &quot;PIT&quot;</span> <span class="op">&amp;</span><span class="st"> </span>yearID <span class="op">==</span><span class="st"> </span><span class="dv">2000</span>)</a></code></pre></div>
<pre><code>## # A tibble: 46 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 anderji~   2000     1 PIT    NL       27    50     5     7     1     0     0
##  2 arroybr~   2000     1 PIT    NL       21    21     2     3     2     0     0
##  3 avenbr01   2000     1 PIT    NL       72   148    18    37    11     0     5
##  4 benjami~   2000     1 PIT    NL       93   233    28    63    18     2     2
##  5 bensokr~   2000     1 PIT    NL       32    65     3     6     2     0     0
##  6 brownad~   2000     1 PIT    NL      104   308    64    97    18     3     4
##  7 brownem~   2000     1 PIT    NL       50   119    13    26     5     0     3
##  8 chrisja~   2000     1 PIT    NL       44     0     0     0     0     0     0
##  9 clontbr~   2000     1 PIT    NL        5     0     1     0     0     0     0
## 10 cordewi~   2000     1 PIT    NL       89   348    46    98    24     3    16
## # ... with 36 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;,
## #   BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<p><code>dplyr</code></p>
<p><code>arrange()</code> - reorder rows</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb668-1" title="1"><span class="co">#reorder by teamID</span></a>
<a class="sourceLine" id="cb668-2" title="2"><span class="kw">arrange</span>(Batting, teamID)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 berrych~   1884     1 ALT    UA        7    25     2     6     0     0     0
##  2 brownji~   1884     1 ALT    UA       21    88    12    22     2     2     1
##  3 carropa~   1884     1 ALT    UA       11    49     4    13     1     0     0
##  4 connojo~   1884     1 ALT    UA        3    11     0     1     0     0     0
##  5 crosscl~   1884     1 ALT    UA        2     7     1     4     1     0     0
##  6 daisege~   1884     1 ALT    UA        1     4     0     0     0     0     0
##  7 doughch~   1884     1 ALT    UA       23    85     6    22     5     0     0
##  8 gradyjo~   1884     1 ALT    UA        9    36     5    11     3     0     0
##  9 harrifr~   1884     1 ALT    UA       24    95    10    25     2     1     0
## 10 koonsha~   1884     1 ALT    UA       21    78     8    18     2     1     0
## # ... with 105,851 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p><code>dplyr</code></p>
<p><code>arrange()</code> - reorder rows</p>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb670-1" title="1"><span class="co">#get secondary arrangement as well</span></a>
<a class="sourceLine" id="cb670-2" title="2"><span class="kw">arrange</span>(Batting, teamID, G)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 daisege~   1884     1 ALT    UA        1     4     0     0     0     0     0
##  2 crosscl~   1884     1 ALT    UA        2     7     1     4     1     0     0
##  3 manloch~   1884     1 ALT    UA        2     7     1     3     0     0     0
##  4 connojo~   1884     1 ALT    UA        3    11     0     1     0     0     0
##  5 shafff01   1884     1 ALT    UA        6    19     1     3     0     0     0
##  6 berrych~   1884     1 ALT    UA        7    25     2     6     0     0     0
##  7 noftsge~   1884     1 ALT    UA        7    25     0     1     0     0     0
##  8 learyja~   1884     1 ALT    UA        8    33     1     3     0     0     0
##  9 gradyjo~   1884     1 ALT    UA        9    36     5    11     3     0     0
## 10 carropa~   1884     1 ALT    UA       11    49     4    13     1     0     0
## # ... with 105,851 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p><code>dplyr</code></p>
<p><code>arrange()</code> - reorder rows</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb672-1" title="1"><span class="co">#descending instead</span></a>
<a class="sourceLine" id="cb672-2" title="2"><span class="kw">arrange</span>(Batting, teamID, <span class="kw">desc</span>(G))</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B    HR
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 smithge~   1884     1 ALT    UA       25   108     9    34     8     1     0
##  2 harrifr~   1884     1 ALT    UA       24    95    10    25     2     1     0
##  3 doughch~   1884     1 ALT    UA       23    85     6    22     5     0     0
##  4 murphjo~   1884     1 ALT    UA       23    94    10    14     1     0     0
##  5 brownji~   1884     1 ALT    UA       21    88    12    22     2     2     1
##  6 koonsha~   1884     1 ALT    UA       21    78     8    18     2     1     0
##  7 mooreje~   1884     1 ALT    UA       20    80    10    25     3     1     1
##  8 shaffta~   1884     1 ALT    UA       13    55    10    18     2     0     0
##  9 carropa~   1884     1 ALT    UA       11    49     4    13     1     0     0
## 10 gradyjo~   1884     1 ALT    UA        9    36     5    11     3     0     0
## # ... with 105,851 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p>Data manipulation idea</p>
<p>We may want to subset our full data set or create new data</p>
<ul>
<li>Look at only certain variables (select columns)</li>
</ul>
<p><img src="img/selectVisual.png" width="300px" style="display: block; margin: auto;" /></p>
<p><code>dplyr</code></p>
<p><code>select()</code> - subset columns</p>
<ul>
<li>Often only want select variables (saw <code>$</code> and <code>[ , ]</code>)</li>
<li><code>select()</code> function has same syntax as other <code>dplyr</code> functions!</li>
</ul>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb674-1" title="1"><span class="co">#Choose a single column by name</span></a>
<a class="sourceLine" id="cb674-2" title="2"><span class="kw">select</span>(Batting, X2B)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 1
##      X2B
##    &lt;int&gt;
##  1     0
##  2     6
##  3     4
##  4    10
##  5    11
##  6     2
##  7     0
##  8    10
##  9     1
## 10     2
## # ... with 105,851 more rows</code></pre>
<p><code>dplyr</code></p>
<p><code>select()</code> - subset columns</p>
<ul>
<li>Often only want select variables (saw <code>$</code> and <code>[ , ]</code>)</li>
<li><code>select()</code> function has same syntax as other <code>dplyr</code> functions!</li>
</ul>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb676-1" title="1"><span class="co">#Choose a single column by name</span></a>
<a class="sourceLine" id="cb676-2" title="2"><span class="kw">select</span>(Batting, playerID, X2B)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 2
##    playerID    X2B
##    &lt;chr&gt;     &lt;int&gt;
##  1 abercda01     0
##  2 addybo01      6
##  3 allisar01     4
##  4 allisdo01    10
##  5 ansonca01    11
##  6 armstbo01     2
##  7 barkeal01     0
##  8 barnero01    10
##  9 barrebi01     1
## 10 barrofr01     2
## # ... with 105,851 more rows</code></pre>
<p>Aside: Piping or Chaining</p>
<ul>
<li>Applying multiple functions: nesting hard to parse!</li>
<li>Piping or Chaining with <code>%&gt;%</code> operator helps</li>
</ul>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb678-1" title="1"><span class="kw">arrange</span>(<span class="kw">select</span>(<span class="kw">filter</span>(Batting, teamID <span class="op">==</span><span class="st"> &quot;PIT&quot;</span>), playerID, G, X2B), <span class="kw">desc</span>(X2B))</a></code></pre></div>
<pre><code>## # A tibble: 4,817 x 3
##    playerID      G   X2B
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt;
##  1 wanerpa01   154    62
##  2 wanerpa01   148    53
##  3 sanchfr01   157    53
##  4 wanerpa01   152    50
##  5 comorad01   152    47
##  6 mclouna01   152    46
##  7 wagneho01   135    45
##  8 parkeda01   158    45
##  9 vanslan01   154    45
## 10 wagneho01   132    44
## # ... with 4,807 more rows</code></pre>
<p>Aside: Piping or Chaining</p>
<ul>
<li>Applying multiple functions: nesting hard to parse!</li>
<li>Piping or Chaining with <code>%&gt;%</code> operator helps</li>
</ul>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb680-1" title="1">Batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(teamID <span class="op">==</span><span class="st"> &quot;PIT&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(playerID, G, X2B) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(X2B)) </a></code></pre></div>
<pre><code>## # A tibble: 4,817 x 3
##    playerID      G   X2B
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt;
##  1 wanerpa01   154    62
##  2 wanerpa01   148    53
##  3 sanchfr01   157    53
##  4 wanerpa01   152    50
##  5 comorad01   152    47
##  6 mclouna01   152    46
##  7 wagneho01   135    45
##  8 parkeda01   158    45
##  9 vanslan01   154    45
## 10 wagneho01   132    44
## # ... with 4,807 more rows</code></pre>
<p>Aside: Piping or Chaining</p>
<ul>
<li>Generically, pipe does the following</li>
</ul>
<p><code>x %&gt;% f(y)</code> turns into <code>f(x,y)</code></p>
<p><code>x %&gt;% f(y) %&gt;% g(z)</code> turns into <code>g(f(x, y), z)</code></p>
<ul>
<li>Can be used with functions outside the tidyverse if this structure works!</li>
</ul>
<p><code>dplyr</code></p>
<p><code>select()</code> - subset columns</p>
<ul>
<li>Many ways to select variables</li>
</ul>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb682-1" title="1"><span class="co">#all columns between</span></a>
<a class="sourceLine" id="cb682-2" title="2">Batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(X2B<span class="op">:</span>HR)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 3
##      X2B   X3B    HR
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1     0     0     0
##  2     6     0     0
##  3     4     5     0
##  4    10     2     2
##  5    11     3     0
##  6     2     1     0
##  7     0     0     0
##  8    10     9     0
##  9     1     0     0
## 10     2     1     0
## # ... with 105,851 more rows</code></pre>
<p><code>dplyr</code></p>
<p><code>select()</code> - subset columns</p>
<ul>
<li>Many ways to select variables</li>
</ul>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb684-1" title="1"><span class="co">#all columns containing</span></a>
<a class="sourceLine" id="cb684-2" title="2">Batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;X&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 2
##      X2B   X3B
##    &lt;int&gt; &lt;int&gt;
##  1     0     0
##  2     6     0
##  3     4     5
##  4    10     2
##  5    11     3
##  6     2     1
##  7     0     0
##  8    10     9
##  9     1     0
## 10     2     1
## # ... with 105,851 more rows</code></pre>
<p><code>dplyr</code></p>
<p><code>select()</code> - subset columns</p>
<ul>
<li>Many ways to select variables</li>
</ul>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb686-1" title="1"><span class="co">#all columns starting with</span></a>
<a class="sourceLine" id="cb686-2" title="2">Batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;X&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 2
##      X2B   X3B
##    &lt;int&gt; &lt;int&gt;
##  1     0     0
##  2     6     0
##  3     4     5
##  4    10     2
##  5    11     3
##  6     2     1
##  7     0     0
##  8    10     9
##  9     1     0
## 10     2     1
## # ... with 105,851 more rows</code></pre>
<p><code>dplyr</code></p>
<p><code>select()</code> - subset columns</p>
<ul>
<li>Many ways to select variables</li>
</ul>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb688-1" title="1"><span class="co">#multiple selections</span></a>
<a class="sourceLine" id="cb688-2" title="2">Batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;X&quot;</span>), <span class="kw">ends_with</span>(<span class="st">&quot;ID&quot;</span>), G)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 7
##      X2B   X3B playerID  yearID teamID lgID      G
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt;
##  1     0     0 abercda01   1871 TRO    NA        1
##  2     6     0 addybo01    1871 RC1    NA       25
##  3     4     5 allisar01   1871 CL1    NA       29
##  4    10     2 allisdo01   1871 WS3    NA       27
##  5    11     3 ansonca01   1871 RC1    NA       25
##  6     2     1 armstbo01   1871 FW1    NA       12
##  7     0     0 barkeal01   1871 RC1    NA        1
##  8    10     9 barnero01   1871 BS1    NA       31
##  9     1     0 barrebi01   1871 FW1    NA        1
## 10     2     1 barrofr01   1871 BS1    NA       18
## # ... with 105,851 more rows</code></pre>
<p><code>dplyr</code></p>
<p><code>select()</code> - subset columns</p>
<ul>
<li>Sometimes want to rename variables</li>
</ul>
<div class="sourceCode" id="cb690"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb690-1" title="1"><span class="co">#rename our previous</span></a>
<a class="sourceLine" id="cb690-2" title="2">Batting <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb690-3" title="3"><span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;X&quot;</span>), <span class="kw">ends_with</span>(<span class="st">&quot;ID&quot;</span>), G) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename</span>(<span class="st">&quot;Doubles&quot;</span> =<span class="st"> </span>X2B, <span class="st">&quot;Triples&quot;</span> =<span class="st"> </span>X3B)</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 7
##    Doubles Triples playerID  yearID teamID lgID      G
##      &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt;
##  1       0       0 abercda01   1871 TRO    NA        1
##  2       6       0 addybo01    1871 RC1    NA       25
##  3       4       5 allisar01   1871 CL1    NA       29
##  4      10       2 allisdo01   1871 WS3    NA       27
##  5      11       3 ansonca01   1871 RC1    NA       25
##  6       2       1 armstbo01   1871 FW1    NA       12
##  7       0       0 barkeal01   1871 RC1    NA        1
##  8      10       9 barnero01   1871 BS1    NA       31
##  9       1       0 barrebi01   1871 FW1    NA        1
## 10       2       1 barrofr01   1871 BS1    NA       18
## # ... with 105,851 more rows</code></pre>
<p><code>dplyr</code></p>
<p><code>select()</code> - subset columns</p>
<ul>
<li>May want to reorder variables</li>
</ul>
<div class="sourceCode" id="cb692"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb692-1" title="1"><span class="co">#reorder</span></a>
<a class="sourceLine" id="cb692-2" title="2">Batting <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(playerID, HR, <span class="kw">everything</span>())</a></code></pre></div>
<pre><code>## # A tibble: 105,861 x 22
##    playerID    HR yearID stint teamID lgID      G    AB     R     H   X2B   X3B
##    &lt;chr&gt;    &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 abercda~     0   1871     1 TRO    NA        1     4     0     0     0     0
##  2 addybo01     0   1871     1 RC1    NA       25   118    30    32     6     0
##  3 allisar~     0   1871     1 CL1    NA       29   137    28    40     4     5
##  4 allisdo~     2   1871     1 WS3    NA       27   133    28    44    10     2
##  5 ansonca~     0   1871     1 RC1    NA       25   120    29    39    11     3
##  6 armstbo~     0   1871     1 FW1    NA       12    49     9    11     2     1
##  7 barkeal~     0   1871     1 RC1    NA        1     4     0     1     0     0
##  8 barnero~     0   1871     1 BS1    NA       31   157    66    63    10     9
##  9 barrebi~     0   1871     1 FW1    NA        1     5     1     1     1     0
## 10 barrofr~     0   1871     1 BS1    NA       18    86    13    13     2     1
## # ... with 105,851 more rows, and 10 more variables: RBI &lt;int&gt;, SB &lt;int&gt;,
## #   CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;,
## #   GIDP &lt;int&gt;</code></pre>
<p><code>dplyr</code></p>
<p><a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">Cheat sheet</a></p>
<ul>
<li>Basic commands
<ul>
<li><code>tbl_df()</code> - convert data frame to one with better printing</li>
<li><code>filter()</code> - subset rows</li>
<li><code>arrange()</code> - reorder rows</li>
<li><code>select()</code> - subset columns</li>
</ul></li>
<li>Many <code>joins</code> to combine tibbles too! (Similar to SQL)</li>
</ul>
<p>Recap/Next Up!</p>
<ul>
<li><p>Data manipulation idea</p></li>
<li><p>Documenting with Markdown</p></li>
<li><p>Logical statements</p></li>
<li><p><code>dplyr</code></p></li>
<li><p>Creating new variables</p>
<ul>
<li>Conditional execution (if then)<br />
</li>
<li>For loops<br />
</li>
<li>Vectorized functions</li>
</ul></li>
<li><p>Reshaping Data</p></li>
</ul>
<p>Recap/Next Up!</p>
<ul>
<li><p>Data manipulation idea</p></li>
<li><p>Documenting with Markdown</p></li>
<li><p>Logical statements</p></li>
<li><p><code>dplyr</code></p></li>
<li><p>Creating new variables</p>
<ul>
<li>Conditional execution (if then)<br />
</li>
<li>For loops<br />
</li>
<li>Vectorized functions</li>
</ul></li>
<li><p>Reshaping data</p></li>
</ul>
<p>Data manipulation idea</p>
<p>We may want to subset our full data set or create new data</p>
<ul>
<li>Create new variables</li>
</ul>
<p><img src="img/createVarVisual.png" width="450px" style="display: block; margin: auto;" /></p>
<p>Creating New Variables</p>
<p>Given a data frame and an appropriate length vector (new variable) can use <code>cbind</code> (column bind)</p>
<div class="sourceCode" id="cb694"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb694-1" title="1">temp &lt;-<span class="st"> </span><span class="kw">cbind</span>(iris, <span class="dt">extra =</span> <span class="kw">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">150</span>))</a>
<a class="sourceLine" id="cb694-2" title="2"><span class="kw">str</span>(temp)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  7 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ extra       : chr  &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;a&quot; ...
##  $ extra       : Factor w/ 1 level &quot;a&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>Creating New Variables</p>
<p>Or simply add as a named (list) element!</p>
<div class="sourceCode" id="cb696"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb696-1" title="1">iris<span class="op">$</span>extra &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb696-2" title="2"><span class="kw">str</span>(iris)</a></code></pre></div>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    150 obs. of  6 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ extra       : chr  &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;a&quot; ...</code></pre>
<p>Creating New Variables</p>
<p>Better method: use <code>dplyr</code>!</p>
<ul>
<li><p><code>mutate()</code> - add newly created column(s) to current data frame</p></li>
<li><p><code>transmute()</code> - create new data frame with created variable(s)</p></li>
</ul>
<p>Creating New Variables</p>
<p>Better method: use <code>dplyr</code>!</p>
<ul>
<li><p><code>mutate()</code> - add newly created column(s) to current data frame</p></li>
<li><p><code>transmute()</code> - create new data frame with created variable(s)</p></li>
<li><p>Syntax:</p></li>
</ul>
<p><code>mutate(data, newVarName = functionOfData, newVarName2 = functionOfData, ...)</code></p>
<p>Creating New Variables</p>
<ul>
<li>Consider a data set on movie ratings</li>
</ul>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb698-1" title="1"><span class="kw">library</span>(fivethirtyeight)</a>
<a class="sourceLine" id="cb698-2" title="2">fandango</a></code></pre></div>
<pre><code>## # A tibble: 146 x 23
##    film   year rottentomatoes rottentomatoes_~ metacritic metacritic_user  imdb
##    &lt;chr&gt; &lt;dbl&gt;          &lt;int&gt;            &lt;int&gt;      &lt;int&gt;           &lt;dbl&gt; &lt;dbl&gt;
##  1 Aven~  2015             74               86         66             7.1   7.8
##  2 Cind~  2015             85               80         67             7.5   7.1
##  3 Ant-~  2015             80               90         64             8.1   7.8
##  4 Do Y~  2015             18               84         22             4.7   5.4
##  5 Hot ~  2015             14               28         29             3.4   5.1
##  6 The ~  2015             63               62         50             6.8   7.2
##  7 Irra~  2015             42               53         53             7.6   6.9
##  8 Top ~  2014             86               64         81             6.8   6.5
##  9 Shau~  2015             99               82         81             8.8   7.4
## 10 Love~  2015             89               87         80             8.5   7.8
## # ... with 136 more rows, and 16 more variables: fandango_stars &lt;dbl&gt;,
## #   fandango_ratingvalue &lt;dbl&gt;, rt_norm &lt;dbl&gt;, rt_user_norm &lt;dbl&gt;,
## #   metacritic_norm &lt;dbl&gt;, metacritic_user_nom &lt;dbl&gt;, imdb_norm &lt;dbl&gt;,
## #   rt_norm_round &lt;dbl&gt;, rt_user_norm_round &lt;dbl&gt;, metacritic_norm_round &lt;dbl&gt;,
## #   metacritic_user_norm_round &lt;dbl&gt;, imdb_norm_round &lt;dbl&gt;,
## #   metacritic_user_vote_count &lt;int&gt;, imdb_user_vote_count &lt;int&gt;,
## #   fandango_votes &lt;int&gt;, fandango_difference &lt;dbl&gt;</code></pre>
<p>Creating New Variables</p>
<ul>
<li><code>mutate()</code> - add newly created column(s) to current data frame</li>
</ul>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb700-1" title="1"><span class="co">#Create an average rottentomatoes score variable</span></a>
<a class="sourceLine" id="cb700-2" title="2">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## # A tibble: 146 x 24
##    film   year rottentomatoes rottentomatoes_~ metacritic metacritic_user  imdb
##    &lt;chr&gt; &lt;dbl&gt;          &lt;int&gt;            &lt;int&gt;      &lt;int&gt;           &lt;dbl&gt; &lt;dbl&gt;
##  1 Aven~  2015             74               86         66             7.1   7.8
##  2 Cind~  2015             85               80         67             7.5   7.1
##  3 Ant-~  2015             80               90         64             8.1   7.8
##  4 Do Y~  2015             18               84         22             4.7   5.4
##  5 Hot ~  2015             14               28         29             3.4   5.1
##  6 The ~  2015             63               62         50             6.8   7.2
##  7 Irra~  2015             42               53         53             7.6   6.9
##  8 Top ~  2014             86               64         81             6.8   6.5
##  9 Shau~  2015             99               82         81             8.8   7.4
## 10 Love~  2015             89               87         80             8.5   7.8
## # ... with 136 more rows, and 17 more variables: fandango_stars &lt;dbl&gt;,
## #   fandango_ratingvalue &lt;dbl&gt;, rt_norm &lt;dbl&gt;, rt_user_norm &lt;dbl&gt;,
## #   metacritic_norm &lt;dbl&gt;, metacritic_user_nom &lt;dbl&gt;, imdb_norm &lt;dbl&gt;,
## #   rt_norm_round &lt;dbl&gt;, rt_user_norm_round &lt;dbl&gt;, metacritic_norm_round &lt;dbl&gt;,
## #   metacritic_user_norm_round &lt;dbl&gt;, imdb_norm_round &lt;dbl&gt;,
## #   metacritic_user_vote_count &lt;int&gt;, imdb_user_vote_count &lt;int&gt;,
## #   fandango_votes &lt;int&gt;, fandango_difference &lt;dbl&gt;, avgRotten &lt;dbl&gt;</code></pre>
<p>Creating New Variables</p>
<ul>
<li><code>mutate()</code> - add newly created column(s) to current data frame</li>
</ul>
<div class="sourceCode" id="cb702"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb702-1" title="1"><span class="co">#can&#39;t see it!</span></a>
<a class="sourceLine" id="cb702-2" title="2">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb702-3" title="3"><span class="st">  </span><span class="kw">select</span>(film, year, avgRotten, <span class="kw">everything</span>())</a></code></pre></div>
<pre><code>## # A tibble: 146 x 24
##    film   year avgRotten rottentomatoes rottentomatoes_~ metacritic
##    &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt;          &lt;int&gt;            &lt;int&gt;      &lt;int&gt;
##  1 Aven~  2015      80               74               86         66
##  2 Cind~  2015      82.5             85               80         67
##  3 Ant-~  2015      85               80               90         64
##  4 Do Y~  2015      51               18               84         22
##  5 Hot ~  2015      21               14               28         29
##  6 The ~  2015      62.5             63               62         50
##  7 Irra~  2015      47.5             42               53         53
##  8 Top ~  2014      75               86               64         81
##  9 Shau~  2015      90.5             99               82         81
## 10 Love~  2015      88               89               87         80
## # ... with 136 more rows, and 18 more variables: metacritic_user &lt;dbl&gt;,
## #   imdb &lt;dbl&gt;, fandango_stars &lt;dbl&gt;, fandango_ratingvalue &lt;dbl&gt;,
## #   rt_norm &lt;dbl&gt;, rt_user_norm &lt;dbl&gt;, metacritic_norm &lt;dbl&gt;,
## #   metacritic_user_nom &lt;dbl&gt;, imdb_norm &lt;dbl&gt;, rt_norm_round &lt;dbl&gt;,
## #   rt_user_norm_round &lt;dbl&gt;, metacritic_norm_round &lt;dbl&gt;,
## #   metacritic_user_norm_round &lt;dbl&gt;, imdb_norm_round &lt;dbl&gt;,
## #   metacritic_user_vote_count &lt;int&gt;, imdb_user_vote_count &lt;int&gt;,
## #   fandango_votes &lt;int&gt;, fandango_difference &lt;dbl&gt;</code></pre>
<p>Creating New Variables</p>
<ul>
<li><p><code>mutate()</code> - add newly created column(s) to current data frame</p></li>
<li><p>Add more than one variable</p></li>
</ul>
<div class="sourceCode" id="cb704"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb704-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb704-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb704-3" title="3">         <span class="dt">avgMeta =</span> (metacritic_norm <span class="op">+</span><span class="st"> </span>metacritic_user_nom)<span class="op">/</span><span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb704-4" title="4"><span class="st">  </span><span class="kw">select</span>(film, year, avgRotten, avgMeta, <span class="kw">everything</span>())</a></code></pre></div>
<pre><code>## # A tibble: 146 x 25
##    film   year avgRotten avgMeta rottentomatoes rottentomatoes_~ metacritic
##    &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;          &lt;int&gt;            &lt;int&gt;      &lt;int&gt;
##  1 Aven~  2015      80      3.42             74               86         66
##  2 Cind~  2015      82.5    3.55             85               80         67
##  3 Ant-~  2015      85      3.62             80               90         64
##  4 Do Y~  2015      51      1.72             18               84         22
##  5 Hot ~  2015      21      1.58             14               28         29
##  6 The ~  2015      62.5    2.95             63               62         50
##  7 Irra~  2015      47.5    3.22             42               53         53
##  8 Top ~  2014      75      3.72             86               64         81
##  9 Shau~  2015      90.5    4.22             99               82         81
## 10 Love~  2015      88      4.12             89               87         80
## # ... with 136 more rows, and 18 more variables: metacritic_user &lt;dbl&gt;,
## #   imdb &lt;dbl&gt;, fandango_stars &lt;dbl&gt;, fandango_ratingvalue &lt;dbl&gt;,
## #   rt_norm &lt;dbl&gt;, rt_user_norm &lt;dbl&gt;, metacritic_norm &lt;dbl&gt;,
## #   metacritic_user_nom &lt;dbl&gt;, imdb_norm &lt;dbl&gt;, rt_norm_round &lt;dbl&gt;,
## #   rt_user_norm_round &lt;dbl&gt;, metacritic_norm_round &lt;dbl&gt;,
## #   metacritic_user_norm_round &lt;dbl&gt;, imdb_norm_round &lt;dbl&gt;,
## #   metacritic_user_vote_count &lt;int&gt;, imdb_user_vote_count &lt;int&gt;,
## #   fandango_votes &lt;int&gt;, fandango_difference &lt;dbl&gt;</code></pre>
<p>Creating New Variables</p>
<ul>
<li><code>transmute()</code> - create new data frame with created variable(s)</li>
</ul>
<div class="sourceCode" id="cb706"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb706-1" title="1"><span class="co">#transmute will keep the new variable(s) only</span></a>
<a class="sourceLine" id="cb706-2" title="2">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">transmute</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## # A tibble: 146 x 1
##    avgRotten
##        &lt;dbl&gt;
##  1      80  
##  2      82.5
##  3      85  
##  4      51  
##  5      21  
##  6      62.5
##  7      47.5
##  8      75  
##  9      90.5
## 10      88  
## # ... with 136 more rows</code></pre>
<p>Creating New Variables</p>
<ul>
<li><code>transmute()</code> - create new data frame with created variable(s)</li>
</ul>
<div class="sourceCode" id="cb708"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb708-1" title="1"><span class="co">#transmute will keep the new variable(s) only</span></a>
<a class="sourceLine" id="cb708-2" title="2">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">transmute</span>(<span class="dt">avgRotten =</span> (rottentomatoes <span class="op">+</span><span class="st"> </span>rottentomatoes_user)<span class="op">/</span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb708-3" title="3">                       <span class="dt">avgMeta =</span> (metacritic_norm <span class="op">+</span><span class="st"> </span>metacritic_user_nom)<span class="op">/</span><span class="dv">2</span>) </a></code></pre></div>
<pre><code>## # A tibble: 146 x 2
##    avgRotten avgMeta
##        &lt;dbl&gt;   &lt;dbl&gt;
##  1      80      3.42
##  2      82.5    3.55
##  3      85      3.62
##  4      51      1.72
##  5      21      1.58
##  6      62.5    2.95
##  7      47.5    3.22
##  8      75      3.72
##  9      90.5    4.22
## 10      88      4.12
## # ... with 136 more rows</code></pre>
<p>Creating New Variables</p>
<p><code>mutate</code> and <code>transmute</code> can also use ‘window’ functions</p>
<ul>
<li>functions that take a vector of values and return another vector of values (see <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">Cheat sheet</a>)</li>
</ul>
<div class="sourceCode" id="cb710"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb710-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(rottentomatoes) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">cumulativeSum =</span> <span class="kw">cumsum</span>(rottentomatoes))</a></code></pre></div>
<pre><code>## # A tibble: 146 x 2
##    rottentomatoes cumulativeSum
##             &lt;int&gt;         &lt;int&gt;
##  1             74            74
##  2             85           159
##  3             80           239
##  4             18           257
##  5             14           271
##  6             63           334
##  7             42           376
##  8             86           462
##  9             99           561
## 10             89           650
## # ... with 136 more rows</code></pre>
<p>Creating New Variables</p>
<p><code>mutate</code> and <code>transmute</code> can also use some statistical functions</p>
<div class="sourceCode" id="cb712"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb712-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(rottentomatoes) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb712-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">avg =</span> <span class="kw">mean</span>(rottentomatoes), <span class="dt">sd =</span> <span class="kw">sd</span>(rottentomatoes))</a></code></pre></div>
<pre><code>## # A tibble: 146 x 3
##    rottentomatoes   avg    sd
##             &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1             74  60.8  30.2
##  2             85  60.8  30.2
##  3             80  60.8  30.2
##  4             18  60.8  30.2
##  5             14  60.8  30.2
##  6             63  60.8  30.2
##  7             42  60.8  30.2
##  8             86  60.8  30.2
##  9             99  60.8  30.2
## 10             89  60.8  30.2
## # ... with 136 more rows</code></pre>
<p>Creating New Variables</p>
<p><code>mutate</code> and <code>transmute</code> can also use some statistical functions</p>
<ul>
<li><code>group_by</code> to create summaries for groups (more on this later)</li>
</ul>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb714-1" title="1">fandango <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(year, rottentomatoes) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb714-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">avg =</span> <span class="kw">mean</span>(rottentomatoes), <span class="dt">sd =</span> <span class="kw">sd</span>(rottentomatoes))</a></code></pre></div>
<pre><code>## # A tibble: 146 x 4
## # Groups:   year [2]
##     year rottentomatoes   avg    sd
##    &lt;dbl&gt;          &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2015             74  58.4  30.3
##  2  2015             85  58.4  30.3
##  3  2015             80  58.4  30.3
##  4  2015             18  58.4  30.3
##  5  2015             14  58.4  30.3
##  6  2015             63  58.4  30.3
##  7  2015             42  58.4  30.3
##  8  2014             86  79.5  21.6
##  9  2015             99  58.4  30.3
## 10  2015             89  58.4  30.3
## # ... with 136 more rows</code></pre>
<p>Creating New Variables<br />
Conditional Execution with If then, If then else</p>
<ul>
<li><p>Often want to execute statements conditionally</p></li>
<li><p><code>if</code> <code>then</code> <code>else</code> syntax</p></li>
</ul>
<div style="float: left; width: 45%;">
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb716-1" title="1"><span class="cf">if</span> (condition) {</a>
<a class="sourceLine" id="cb716-2" title="2">  then execute code</a>
<a class="sourceLine" id="cb716-3" title="3">} </a>
<a class="sourceLine" id="cb716-4" title="4"></a>
<a class="sourceLine" id="cb716-5" title="5"><span class="co">#if then else</span></a>
<a class="sourceLine" id="cb716-6" title="6"><span class="cf">if</span> (condition) {</a>
<a class="sourceLine" id="cb716-7" title="7">  execute this code  </a>
<a class="sourceLine" id="cb716-8" title="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb716-9" title="9">  execute this code</a>
<a class="sourceLine" id="cb716-10" title="10">}</a></code></pre></div>
</div>
<div style="float: right; width: 45%;">
<div class="sourceCode" id="cb717"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb717-1" title="1"><span class="co">#Or more if statements</span></a>
<a class="sourceLine" id="cb717-2" title="2"><span class="cf">if</span> (condition) {</a>
<a class="sourceLine" id="cb717-3" title="3">  execute this code  </a>
<a class="sourceLine" id="cb717-4" title="4">} <span class="cf">else</span> <span class="cf">if</span> (condition2) {</a>
<a class="sourceLine" id="cb717-5" title="5">  execute this code</a>
<a class="sourceLine" id="cb717-6" title="6">} <span class="cf">else</span> <span class="cf">if</span> (condition3) {</a>
<a class="sourceLine" id="cb717-7" title="7">  execute this code</a>
<a class="sourceLine" id="cb717-8" title="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb717-9" title="9">  <span class="co">#if no conditions met</span></a>
<a class="sourceLine" id="cb717-10" title="10">  execute this code</a>
<a class="sourceLine" id="cb717-11" title="11">}</a></code></pre></div>
</div>
<p>Creating New Variables<br />
Conditional Execution with If then, If then else</p>
<ul>
<li><p>Consider built-in data set <code>airquality</code></p>
<ul>
<li><p>daily air quality measurements in New York</p></li>
<li><p>from May (Day 1) to September (Day 153) in 1973</p></li>
</ul></li>
</ul>
<p>Creating New Variables<br />
Conditional Execution with If then, If then else</p>
<ul>
<li>Consider built-in data set <code>airquality</code></li>
</ul>
<div class="sourceCode" id="cb718"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb718-1" title="1">airquality &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(airquality)</a>
<a class="sourceLine" id="cb718-2" title="2">airquality</a></code></pre></div>
<pre><code>## # A tibble: 153 x 7
##    Ozone Solar.R  Wind  Temp Month   Day status   
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    
##  1    41     190   7.4    67     5     1 LightWind
##  2    36     118   8      72     5     2 LightWind
##  3    12     149  12.6    74     5     3 Windy    
##  4    18     313  11.5    62     5     4 Windy    
##  5    NA      NA  14.3    56     5     5 Windy    
##  6    28      NA  14.9    66     5     6 Windy    
##  7    23     299   8.6    65     5     7 LightWind
##  8    19      99  13.8    59     5     8 Windy    
##  9     8      19  20.1    61     5     9 HighWind 
## 10    NA     194   8.6    69     5    10 LightWind
## # ... with 143 more rows</code></pre>
<p>Creating New Variables<br />
Conditional Execution with If then, If then else</p>
<p>Want to code a wind category variable</p>
<ul>
<li>high wind days (15mph <span class="math inline">\(\leq\)</span> wind)<br />
</li>
<li>windy days (10mph <span class="math inline">\(\leq\)</span> wind &lt; 15mph)<br />
</li>
<li>lightwind days (6mph <span class="math inline">\(\leq\)</span> wind &lt; 10mph)<br />
</li>
<li>calm days (wind <span class="math inline">\(\leq\)</span> 6mph)</li>
</ul>
<p>Creating New Variables<br />
Conditional Execution with If then, If then else</p>
<p>Want to code a wind category variable</p>
<p>Issue: <code>if(condition)</code> can only take in a single comparison</p>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb720-1" title="1"><span class="cf">if</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>) { </a>
<a class="sourceLine" id="cb720-2" title="2">  <span class="st">&quot;High Wind&quot;</span></a>
<a class="sourceLine" id="cb720-3" title="3">  }</a></code></pre></div>
<pre><code>## Warning in if (airquality$Wind &gt;= 15) {: the condition has length &gt; 1 and only
## the first element will be used</code></pre>
<p>Creating New Variables<br />
Conditional Execution with If then, If then else</p>
<p>Want to code a wind category variable</p>
<ul>
<li>high wind days (15mph <span class="math inline">\(\leq\)</span> wind)<br />
</li>
<li>windy days (10mph <span class="math inline">\(\leq\)</span> wind &lt; 15mph)<br />
</li>
<li>lightwind days (6mph <span class="math inline">\(\leq\)</span> wind &lt; 10mph)<br />
</li>
<li>calm days (wind <span class="math inline">\(\leq\)</span> 6mph)</li>
</ul>
<p>Initial plan</p>
<ul>
<li><p>loop through each observation</p></li>
<li><p>use if then else to determine wind status</p></li>
</ul>
<p>Looping in R</p>
<ul>
<li><p>There are a number of ways to do looping in R</p>
<ul>
<li><code>for()</code><br />
</li>
<li><code>while()</code></li>
<li><code>repeat()</code></li>
</ul></li>
<li>Idea:
<ul>
<li>Run code repeatedly changing something each time</li>
</ul></li>
</ul>
<p>Looping in R</p>
<ul>
<li>Syntax</li>
</ul>
<div class="sourceCode" id="cb722"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb722-1" title="1"><span class="cf">for</span>(index <span class="cf">in</span> values){</a>
<a class="sourceLine" id="cb722-2" title="2">  code to be run</a>
<a class="sourceLine" id="cb722-3" title="3">}</a></code></pre></div>
<blockquote>
<ul>
<li>index defines ‘counter’ or variable that varies</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>‘values’ define which values index takes on</li>
</ul>
</blockquote>
<p>Looping in R</p>
<ul>
<li><p>index defines ‘counter’ or variable that varies</p></li>
<li><p>‘values’ define which values index takes on</p></li>
</ul>
<div class="sourceCode" id="cb723"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb723-1" title="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb723-2" title="2">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb723-3" title="3">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Looping in R</p>
<ul>
<li><p>index defines ‘counter’ or variable that varies</p></li>
<li><p>‘values’ define which values index takes on</p></li>
</ul>
<div class="sourceCode" id="cb725"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb725-1" title="1"><span class="cf">for</span> (index <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>,<span class="st">&quot;hat&quot;</span>,<span class="st">&quot;worm&quot;</span>)){</a>
<a class="sourceLine" id="cb725-2" title="2">  <span class="kw">print</span>(index)</a>
<a class="sourceLine" id="cb725-3" title="3">}</a></code></pre></div>
<pre><code>## [1] &quot;cat&quot;
## [1] &quot;hat&quot;
## [1] &quot;worm&quot;</code></pre>
<p>Creating New Variables<br />
Conditional Execution with If then, If then else</p>
<p>Want to code a wind category variable</p>
<div class="sourceCode" id="cb727"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb727-1" title="1">status&lt;-<span class="kw">vector</span>() <span class="co">#initialize vector to save results</span></a>
<a class="sourceLine" id="cb727-2" title="2"></a>
<a class="sourceLine" id="cb727-3" title="3"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(airquality)){</a>
<a class="sourceLine" id="cb727-4" title="4">  <span class="cf">if</span>(airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>){</a>
<a class="sourceLine" id="cb727-5" title="5">    status[i] &lt;-<span class="st"> &quot;HighWind&quot;</span></a>
<a class="sourceLine" id="cb727-6" title="6">  } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb727-7" title="7">    status[i] &lt;-<span class="st"> &quot;Windy&quot;</span></a>
<a class="sourceLine" id="cb727-8" title="8">  } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>){</a>
<a class="sourceLine" id="cb727-9" title="9">    status[i] &lt;-<span class="st"> &quot;LightWind&quot;</span></a>
<a class="sourceLine" id="cb727-10" title="10">  } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb727-11" title="11">    status[i] &lt;-<span class="st"> &quot;Calm&quot;</span></a>
<a class="sourceLine" id="cb727-12" title="12">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb727-13" title="13">    status[i] &lt;-<span class="st"> &quot;Error&quot;</span></a>
<a class="sourceLine" id="cb727-14" title="14">  }</a>
<a class="sourceLine" id="cb727-15" title="15">}</a></code></pre></div>
<p>Creating New Variables<br />
Conditional Execution with If then, If then else</p>
<div class="sourceCode" id="cb728"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb728-1" title="1">airquality<span class="op">$</span>status &lt;-<span class="st"> </span>status</a>
<a class="sourceLine" id="cb728-2" title="2">airquality<span class="op">$</span>status</a></code></pre></div>
<pre><code>##   [1] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##   [7] &quot;LightWind&quot; &quot;Windy&quot;     &quot;HighWind&quot;  &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot;
##  [13] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot; 
##  [19] &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;HighWind&quot;  &quot;LightWind&quot; &quot;Windy&quot;    
##  [25] &quot;HighWind&quot;  &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Calm&quot;     
##  [31] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;HighWind&quot;  &quot;LightWind&quot; &quot;LightWind&quot;
##  [37] &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##  [43] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot; 
##  [49] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;     
##  [55] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##  [61] &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Calm&quot;     
##  [67] &quot;Windy&quot;     &quot;Calm&quot;      &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot;
##  [73] &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;    
##  [79] &quot;LightWind&quot; &quot;Calm&quot;      &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;    
##  [85] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
##  [91] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
##  [97] &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;      &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
## [103] &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;    
## [109] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot;  &quot;Windy&quot;    
## [115] &quot;Windy&quot;     &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot;
## [121] &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;     
## [127] &quot;Calm&quot;      &quot;LightWind&quot; &quot;HighWind&quot;  &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
## [133] &quot;LightWind&quot; &quot;Windy&quot;     &quot;HighWind&quot;  &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;    
## [139] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;    
## [145] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot;  &quot;LightWind&quot; &quot;Windy&quot;    
## [151] &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;</code></pre>
<p>Looping in R</p>
<p>Other things to know</p>
<ul>
<li><code>break</code> kicks you out of the loop</li>
</ul>
<div class="sourceCode" id="cb730"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb730-1" title="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb730-2" title="2">    <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="dv">3</span>){ </a>
<a class="sourceLine" id="cb730-3" title="3">      <span class="cf">break</span> </a>
<a class="sourceLine" id="cb730-4" title="4">      }</a>
<a class="sourceLine" id="cb730-5" title="5">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb730-6" title="6">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 2</code></pre>
<p>Looping in R</p>
<p>Other things to know</p>
<ul>
<li><code>next</code> jumps to the next iteration of the loop</li>
</ul>
<div class="sourceCode" id="cb732"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb732-1" title="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb732-2" title="2">    <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb732-3" title="3">      <span class="cf">next</span></a>
<a class="sourceLine" id="cb732-4" title="4">    } </a>
<a class="sourceLine" id="cb732-5" title="5">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb732-6" title="6">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 4
## [1] 5</code></pre>
<p>Looping in R</p>
<p>Other things to know</p>
<ul>
<li><code>while</code> loop similar</li>
</ul>
<div class="sourceCode" id="cb734"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb734-1" title="1"><span class="cf">while</span>(condition) {</a>
<a class="sourceLine" id="cb734-2" title="2">    expression to evaluate</a>
<a class="sourceLine" id="cb734-3" title="3">  modify condition?</a>
<a class="sourceLine" id="cb734-4" title="4">}</a></code></pre></div>
<p>Looping in R</p>
<p>Other things to know</p>
<p>For loops inefficient in R</p>
<blockquote>
<ul>
<li>R interpreted language</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Must figure out how to evaluate code at each iteration of loop</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Slows it down</li>
</ul>
</blockquote>
<p>Looping in R</p>
<p>Other things to know</p>
<p>For loops inefficient in R</p>
<ul>
<li><p>R interpreted language</p></li>
<li><p>Must figure out how to evaluate code at each iteration of loop</p></li>
<li><p>Slows it down</p></li>
</ul>
<p>Vectorized functions much faster!</p>
<blockquote>
<ul>
<li>Vectorized function: works on entire vector at once</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Avoids costly computation time</li>
</ul>
</blockquote>
<p>Creating New Variables<br />
Vectorized ifelse</p>
<ul>
<li><p><code>ifelse()</code> is vectorized version of <code>if then else</code></p></li>
<li><p>Syntax</p></li>
</ul>
<div class="sourceCode" id="cb735"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb735-1" title="1"><span class="kw">ifelse</span>(vector_condition, if_true_do_this, if_false_do_this)</a></code></pre></div>
<p>Creating New Variables<br />
Vectorized ifelse</p>
<div class="sourceCode" id="cb736"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb736-1" title="1"><span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>, <span class="st">&quot;HighWind&quot;</span>,</a>
<a class="sourceLine" id="cb736-2" title="2">          <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;Windy&quot;</span>,</a>
<a class="sourceLine" id="cb736-3" title="3">                 <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>, <span class="st">&quot;LightWind&quot;</span>, <span class="st">&quot;Calm&quot;</span>)))</a></code></pre></div>
<pre><code>##   [1] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##   [7] &quot;LightWind&quot; &quot;Windy&quot;     &quot;HighWind&quot;  &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot;
##  [13] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot; 
##  [19] &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;HighWind&quot;  &quot;LightWind&quot; &quot;Windy&quot;    
##  [25] &quot;HighWind&quot;  &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Calm&quot;     
##  [31] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;HighWind&quot;  &quot;LightWind&quot; &quot;LightWind&quot;
##  [37] &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##  [43] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot; 
##  [49] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;     
##  [55] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
##  [61] &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Calm&quot;     
##  [67] &quot;Windy&quot;     &quot;Calm&quot;      &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot;
##  [73] &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;    
##  [79] &quot;LightWind&quot; &quot;Calm&quot;      &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;    
##  [85] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
##  [91] &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
##  [97] &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;      &quot;Windy&quot;     &quot;LightWind&quot; &quot;LightWind&quot;
## [103] &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;    
## [109] &quot;LightWind&quot; &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot;  &quot;Windy&quot;    
## [115] &quot;Windy&quot;     &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot; &quot;Calm&quot;      &quot;LightWind&quot;
## [121] &quot;Calm&quot;      &quot;LightWind&quot; &quot;LightWind&quot; &quot;LightWind&quot; &quot;Calm&quot;      &quot;Calm&quot;     
## [127] &quot;Calm&quot;      &quot;LightWind&quot; &quot;HighWind&quot;  &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;    
## [133] &quot;LightWind&quot; &quot;Windy&quot;     &quot;HighWind&quot;  &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;    
## [139] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;    
## [145] &quot;LightWind&quot; &quot;Windy&quot;     &quot;Windy&quot;     &quot;HighWind&quot;  &quot;LightWind&quot; &quot;Windy&quot;    
## [151] &quot;Windy&quot;     &quot;LightWind&quot; &quot;Windy&quot;</code></pre>
<p>Creating New Variables<br />
Vectorized ifelse</p>
<ul>
<li>Can use with <code>transmute()</code> or <code>mutate()</code></li>
</ul>
<div class="sourceCode" id="cb738"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb738-1" title="1"><span class="kw">mutate</span>(airquality, <span class="dt">status =</span> <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>, <span class="st">&quot;HighWind&quot;</span>,</a>
<a class="sourceLine" id="cb738-2" title="2">                                <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;Windy&quot;</span>,</a>
<a class="sourceLine" id="cb738-3" title="3">                                       <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>, <span class="st">&quot;LightWind&quot;</span>, <span class="st">&quot;Calm&quot;</span>)))</a>
<a class="sourceLine" id="cb738-4" title="4">)</a></code></pre></div>
<pre><code>## # A tibble: 153 x 7
##    Ozone Solar.R  Wind  Temp Month   Day status   
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    
##  1    41     190   7.4    67     5     1 LightWind
##  2    36     118   8      72     5     2 LightWind
##  3    12     149  12.6    74     5     3 Windy    
##  4    18     313  11.5    62     5     4 Windy    
##  5    NA      NA  14.3    56     5     5 Windy    
##  6    28      NA  14.9    66     5     6 Windy    
##  7    23     299   8.6    65     5     7 LightWind
##  8    19      99  13.8    59     5     8 Windy    
##  9     8      19  20.1    61     5     9 HighWind 
## 10    NA     194   8.6    69     5    10 LightWind
## # ... with 143 more rows</code></pre>
<p>Creating New Variables</p>
<ul>
<li><p>Compare speed of for loop and vectorized version</p></li>
<li><p><code>microbenchmark</code> package runs code repeatedly, returns summary stats</p></li>
</ul>
<div class="sourceCode" id="cb740"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb740-1" title="1"><span class="co">#install if needed</span></a>
<a class="sourceLine" id="cb740-2" title="2"><span class="kw">library</span>(microbenchmark)</a></code></pre></div>
<p>Creating New Variables</p>
<ul>
<li>Compare speed of for loop and vectorized version</li>
</ul>
<div class="sourceCode" id="cb741"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb741-1" title="1">loopTime &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(</a>
<a class="sourceLine" id="cb741-2" title="2">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(airquality)){</a>
<a class="sourceLine" id="cb741-3" title="3">    <span class="cf">if</span>(airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>){</a>
<a class="sourceLine" id="cb741-4" title="4">      status[i] &lt;-<span class="st"> &quot;HighWind&quot;</span></a>
<a class="sourceLine" id="cb741-5" title="5">    } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb741-6" title="6">      status[i] &lt;-<span class="st"> &quot;Windy&quot;</span></a>
<a class="sourceLine" id="cb741-7" title="7">    } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>){</a>
<a class="sourceLine" id="cb741-8" title="8">      status[i] &lt;-<span class="st"> &quot;LightWind&quot;</span></a>
<a class="sourceLine" id="cb741-9" title="9">    } <span class="cf">else</span> <span class="cf">if</span> (airquality<span class="op">$</span>Wind[i] <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb741-10" title="10">      status[i] &lt;-<span class="st"> &quot;Calm&quot;</span></a>
<a class="sourceLine" id="cb741-11" title="11">    } <span class="cf">else</span>{</a>
<a class="sourceLine" id="cb741-12" title="12">      status[i] &lt;-<span class="st"> &quot;Error&quot;</span></a>
<a class="sourceLine" id="cb741-13" title="13">    }</a>
<a class="sourceLine" id="cb741-14" title="14">  }</a>
<a class="sourceLine" id="cb741-15" title="15">, <span class="dt">unit =</span> <span class="st">&quot;us&quot;</span>)</a></code></pre></div>
<p>Creating New Variables</p>
<ul>
<li>Compare speed of for loop and vectorized version</li>
</ul>
<div class="sourceCode" id="cb742"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb742-1" title="1">vectorTime &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(</a>
<a class="sourceLine" id="cb742-2" title="2">  <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>, <span class="st">&quot;HighWind&quot;</span>,</a>
<a class="sourceLine" id="cb742-3" title="3">            <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;Windy&quot;</span>,</a>
<a class="sourceLine" id="cb742-4" title="4">                   <span class="kw">ifelse</span>(airquality<span class="op">$</span>Wind <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>, <span class="st">&quot;LightWind&quot;</span>, <span class="st">&quot;Calm&quot;</span>)))</a>
<a class="sourceLine" id="cb742-5" title="5">, <span class="dt">unit =</span> <span class="st">&quot;us&quot;</span>)</a></code></pre></div>
<p>Creating New Variables</p>
<div class="sourceCode" id="cb743"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb743-1" title="1">loopTime</a></code></pre></div>
<pre><code>## Unit: microseconds
##                                                                                                                                                                                                                                                                                                                                                                                            expr
##  for (i in 1:nrow(airquality)) {     if (airquality$Wind[i] &gt;= 15) {         status[i] &lt;- &quot;HighWind&quot;     }     else if (airquality$Wind[i] &gt;= 10) {         status[i] &lt;- &quot;Windy&quot;     }     else if (airquality$Wind[i] &gt;= 6) {         status[i] &lt;- &quot;LightWind&quot;     }     else if (airquality$Wind[i] &gt;= 0) {         status[i] &lt;- &quot;Calm&quot;     }     else {         status[i] &lt;- &quot;Error&quot;     } }
##   min      lq     mean median     uq     max neval
##  7559 7669.95 9075.678 7963.2 8990.5 67956.5   100</code></pre>
<div class="sourceCode" id="cb745"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb745-1" title="1">vectorTime</a></code></pre></div>
<pre><code>## Unit: microseconds
##                                                                                                                                       expr
##  ifelse(airquality$Wind &gt;= 15, &quot;HighWind&quot;, ifelse(airquality$Wind &gt;=      10, &quot;Windy&quot;, ifelse(airquality$Wind &gt;= 6, &quot;LightWind&quot;, &quot;Calm&quot;)))
##   min     lq    mean median    uq max neval
##  95.5 104.05 104.613  104.9 105.9 135   100</code></pre>
<p>Creating New Variables Recap!</p>
<ul>
<li><p>Add new column with <code>$</code></p></li>
<li><p><code>mutate()</code> - add newly created column(s) to current data frame</p></li>
<li><p><code>transmute()</code> - create new data frame with created variable(s)</p>
<ul>
<li><p>Can use with window functions</p></li>
<li><p>Use <code>ifelse()</code> to do conditional creation</p></li>
<li><p>Note: <code>cut()</code> can be used to categorize a numeric variable too!</p></li>
</ul></li>
</ul>
<p>Reshaping Data<br />
<code>tidyr</code> package</p>
<p>Easily allows for two very important actions</p>
<blockquote>
<ul>
<li><code>gather()</code> - takes multiple columns, and gathers them into key-value pairs<br />

<ul>
<li>
Make wide data longer
</li>
<li>
Most important as analysis methods often prefer this form
</li>
</ul></li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><code>spread()</code> - takes two columns (key &amp; value) and spreads in to multiple columns<br />

<ul>
<li>
Make “long” data wider
</li>
</ul></li>
</ul>
</blockquote>
<p>Reshaping Data<br />
<code>tidyr</code> package</p>
<p>Easily allows for two very important actions</p>
<ul>
<li><p><code>gather()</code> - takes multiple columns, and gathers them into key-value pairs</p>
<ul>
<li>Make wide data longer<br />
</li>
<li>Most important as analysis methods often prefer this form</li>
</ul></li>
<li><code>spread()</code> - takes two columns (key &amp; value) and spreads in to multiple columns<br />

<ul>
<li>
Make “long” data wider
</li>
</ul></li>
</ul>
<p>Also gives an easy method to separate a column (or combine two columns) using <code>separate()</code> and <code>unite()</code></p>
<p>Reshaping Data<br />
<code>tidyr</code> package</p>
<ul>
<li>Data in ‘Wide’ form</li>
</ul>
<div class="sourceCode" id="cb747"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb747-1" title="1">tempsData &lt;-<span class="st"> </span><span class="kw">read_table2</span>(<span class="dt">file =</span> <span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/cityTemps.txt&quot;</span>) </a>
<a class="sourceLine" id="cb747-2" title="2">tempsData</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   city = col_character(),
##   sun = col_double(),
##   mon = col_double(),
##   tue = col_double(),
##   wed = col_double(),
##   thr = col_double(),
##   fri = col_double(),
##   sat = col_double()
## )</code></pre>
<pre><code>## # A tibble: 6 x 8
##   city        sun   mon   tue   wed   thr   fri   sat
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 atlanta      81    87    83    79    88    91    94
## 2 baltimore    73    75    70    78    73    75    79
## 3 charlotte    82    80    75    82    83    88    93
## 4 denver       72    71    67    68    72    71    58
## 5 ellington    51    42    47    52    55    56    59
## 6 frankfort    70    70    72    70    74    74    79</code></pre>
<p>Manipulating Data
tidyr package</p>
<ul>
<li>Switch to ‘Long’ form with <code>gather()</code>
<ul>
<li>key = new name for values in columns<br />
</li>
<li>value = new name for data values<br />
</li>
<li>columns describe which columns to take</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb750"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb750-1" title="1">tempsData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gather</span>(<span class="dt">key =</span> day, <span class="dt">value =</span> temp, <span class="dv">2</span><span class="op">:</span><span class="dv">8</span>)</a></code></pre></div>
<pre><code>## # A tibble: 42 x 3
##    city      day    temp
##    &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;
##  1 atlanta   sun      81
##  2 baltimore sun      73
##  3 charlotte sun      82
##  4 denver    sun      72
##  5 ellington sun      51
##  6 frankfort sun      70
##  7 atlanta   mon      87
##  8 baltimore mon      75
##  9 charlotte mon      80
## 10 denver    mon      71
## # ... with 32 more rows</code></pre>
<p>Reshaping Data<br />
tidyr package</p>
<ul>
<li>Switch to ‘Long’ form with <code>gather()</code><br />
</li>
<li>Can provide columns to <code>gather()</code> in many ways!</li>
</ul>
<div class="sourceCode" id="cb752"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb752-1" title="1">newTempsData &lt;-<span class="st"> </span>tempsData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gather</span>(<span class="dt">key =</span> day, <span class="dt">value =</span> temp, sun<span class="op">:</span>sat)</a>
<a class="sourceLine" id="cb752-2" title="2">newTempsData</a></code></pre></div>
<pre><code>## # A tibble: 42 x 3
##    city      day    temp
##    &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;
##  1 atlanta   sun      81
##  2 baltimore sun      73
##  3 charlotte sun      82
##  4 denver    sun      72
##  5 ellington sun      51
##  6 frankfort sun      70
##  7 atlanta   mon      87
##  8 baltimore mon      75
##  9 charlotte mon      80
## 10 denver    mon      71
## # ... with 32 more rows</code></pre>
<p>Reshaping Data<br />
tidyr package</p>
<ul>
<li>Switch to ‘Wide’ form with <code>spread()</code>
<ul>
<li>opposite from gather<br />
</li>
<li>key = new column names<br />
</li>
<li>value = value to spread out</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb754"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb754-1" title="1">newTempsData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">spread</span>(<span class="dt">key =</span> day, <span class="dt">value =</span> temp)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 8
##   city        fri   mon   sat   sun   thr   tue   wed
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 atlanta      91    87    94    81    88    83    79
## 2 baltimore    75    75    79    73    73    70    78
## 3 charlotte    88    80    93    82    83    75    82
## 4 denver       71    71    58    72    72    67    68
## 5 ellington    56    42    59    51    55    47    52
## 6 frankfort    74    70    79    70    74    72    70</code></pre>
<p>Reshaping Data<br />
tidyr package</p>
<ul>
<li><p>Separate a column (or combine two columns) using <code>separate()</code> and <code>unite()</code></p></li>
<li><p>Consider data set on air pollution in Chicago</p></li>
</ul>
<div class="sourceCode" id="cb756"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb756-1" title="1">chicagoData &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/Chicago.csv&quot;</span>)</a>
<a class="sourceLine" id="cb756-2" title="2">chicagoData</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   X = col_double(),
##   city = col_character(),
##   date = col_character(),
##   death = col_double(),
##   temp = col_double(),
##   dewpoint = col_double(),
##   pm10 = col_double(),
##   o3 = col_double(),
##   time = col_double(),
##   season = col_character(),
##   year = col_double()
## )</code></pre>
<pre><code>## # A tibble: 1,461 x 11
##        X city  date      death  temp dewpoint  pm10    o3  time season  year
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
##  1  3654 chic  1/1/1997    137  36      37.5  13.1   5.66  3654 winter  1997
##  2  3655 chic  1/2/1997    123  45      47.2  41.9   5.53  3655 winter  1997
##  3  3656 chic  1/3/1997    127  40      38    27.0   6.29  3656 winter  1997
##  4  3657 chic  1/4/1997    146  51.5    45.5  25.1   7.54  3657 winter  1997
##  5  3658 chic  1/5/1997    102  27      11.2  15.3  20.8   3658 winter  1997
##  6  3659 chic  1/6/1997    127  17       5.75  9.36 14.9   3659 winter  1997
##  7  3660 chic  1/7/1997    116  16       7    20.2  11.9   3660 winter  1997
##  8  3661 chic  1/8/1997    118  19      17.8  33.1   8.68  3661 winter  1997
##  9  3662 chic  1/9/1997    148  26      24    12.1  13.4   3662 winter  1997
## 10  3663 chic  1/10/1997   121  16       5.38 24.8  10.4   3663 winter  1997
## # ... with 1,451 more rows</code></pre>
<p>Manipulating Data
tidyr package</p>
<ul>
<li><code>lubridate</code> package great for date data! Can parse with <code>separate</code>:</li>
</ul>
<div class="sourceCode" id="cb759"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb759-1" title="1">chicagoData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(date, <span class="kw">c</span>(<span class="st">&quot;Day&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Year&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>, </a>
<a class="sourceLine" id="cb759-2" title="2">                                                 <span class="dt">convert =</span> <span class="ot">TRUE</span>, <span class="dt">remove =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1,461 x 14
##        X city  date    Day Month  Year death  temp dewpoint  pm10    o3  time
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  3654 chic  1/1/~     1     1  1997   137  36      37.5  13.1   5.66  3654
##  2  3655 chic  1/2/~     1     2  1997   123  45      47.2  41.9   5.53  3655
##  3  3656 chic  1/3/~     1     3  1997   127  40      38    27.0   6.29  3656
##  4  3657 chic  1/4/~     1     4  1997   146  51.5    45.5  25.1   7.54  3657
##  5  3658 chic  1/5/~     1     5  1997   102  27      11.2  15.3  20.8   3658
##  6  3659 chic  1/6/~     1     6  1997   127  17       5.75  9.36 14.9   3659
##  7  3660 chic  1/7/~     1     7  1997   116  16       7    20.2  11.9   3660
##  8  3661 chic  1/8/~     1     8  1997   118  19      17.8  33.1   8.68  3661
##  9  3662 chic  1/9/~     1     9  1997   148  26      24    12.1  13.4   3662
## 10  3663 chic  1/10~     1    10  1997   121  16       5.38 24.8  10.4   3663
## # ... with 1,451 more rows, and 2 more variables: season &lt;chr&gt;, year &lt;dbl&gt;</code></pre>
<p>Manipulating Data
tidyr package</p>
<ul>
<li><code>lubridate</code> package great for date data! Combine with <code>unite</code>:</li>
</ul>
<div class="sourceCode" id="cb761"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb761-1" title="1">chicagoData <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(date, <span class="kw">c</span>(<span class="st">&quot;Day&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Year&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>, </a>
<a class="sourceLine" id="cb761-2" title="2">                                                 <span class="dt">convert =</span> <span class="ot">TRUE</span>, <span class="dt">remove =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb761-3" title="3"><span class="st">  </span><span class="kw">unite</span>(DayMonth, Day, Month, <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1,461 x 13
##        X city  date  DayMonth  Year death  temp dewpoint  pm10    o3  time
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  3654 chic  1/1/~ 1-1       1997   137  36      37.5  13.1   5.66  3654
##  2  3655 chic  1/2/~ 1-2       1997   123  45      47.2  41.9   5.53  3655
##  3  3656 chic  1/3/~ 1-3       1997   127  40      38    27.0   6.29  3656
##  4  3657 chic  1/4/~ 1-4       1997   146  51.5    45.5  25.1   7.54  3657
##  5  3658 chic  1/5/~ 1-5       1997   102  27      11.2  15.3  20.8   3658
##  6  3659 chic  1/6/~ 1-6       1997   127  17       5.75  9.36 14.9   3659
##  7  3660 chic  1/7/~ 1-7       1997   116  16       7    20.2  11.9   3660
##  8  3661 chic  1/8/~ 1-8       1997   118  19      17.8  33.1   8.68  3661
##  9  3662 chic  1/9/~ 1-9       1997   148  26      24    12.1  13.4   3662
## 10  3663 chic  1/10~ 1-10      1997   121  16       5.38 24.8  10.4   3663
## # ... with 1,451 more rows, and 2 more variables: season &lt;chr&gt;, year &lt;dbl&gt;</code></pre>
<p>Recap/Next Up!</p>
<ul>
<li><p>Data manipulation idea</p></li>
<li><p>Documenting with Markdown</p></li>
<li><p>Logical statements</p></li>
<li><p><code>dplyr</code></p></li>
<li><p>Creating new variables</p>
<ul>
<li>Conditional execution (if then)<br />
</li>
<li>For loops<br />
</li>
<li>Vectorized functions</li>
</ul></li>
<li><p>Reshaping data</p></li>
</ul>

<div id="r-reading-data-1" class="section level3">
<h3><span class="header-section-number">26.0.1</span> R Reading Data</h3>
<p>When it comes to reading in data, where do we start? Our plan for this section is as follows:</p>
<ul>
<li><p>Look at common raw data formats</p></li>
<li><p>Take a few quick asides: R projects, <code>factors</code>, and R packages</p></li>
<li><p>Read ‘clean’ delimited data</p></li>
<li><p>Read Excel, SAS, &amp; SPSS data</p></li>
<li><p>Resources for JSON data, XML data, databases, and APIs</p></li>
</ul>
<p><strong>How to read in data depends on raw/external data type!</strong></p>
<p>We’ll start by focusing on delimited data.</p>
<ul>
<li>Delimiter - Character (such as a <code>,</code>) that separates data entries</li>
</ul>
<p><img src="img/delimitedData.png" width="600px" style="display: block; margin: auto;" /></p>
<p>To read in data we’ll need functions to do so. When you open R a few <code>packages</code> are loaded.</p>
<p><img src="img/loadR.PNG" width="250px" style="display: block; margin: auto;" /></p>
<p>R Packages:</p>
<ul>
<li><p>Collection of functions/datasets/etc. in one place</p></li>
<li><p>Packages exist to do almost anything</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">List of CRAN</a> approved packages on R’s website</p></li>
<li><p>Plenty of other packages on places like GitHub</p></li>
</ul>
<p>The <code>utils</code> package that automatically loads has <em>family</em> of <code>read.</code> functions ready for use! Reading data with these functions is often referred to as reading with a standard R or base R method.</p>
<p>Function and purpose:</p>
<table>
<thead>
<tr class="header">
<th>Type of Delimeter</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Comma</td>
<td><code>read.csv()</code></td>
</tr>
<tr class="even">
<td>Semicolon (<code>,</code> for decimal)</td>
<td><code>read.csv2()</code></td>
</tr>
<tr class="odd">
<td>Tab</td>
<td><code>read.delim()</code></td>
</tr>
<tr class="even">
<td>White Space/General</td>
<td><code>read.table(sep = "")</code></td>
</tr>
</tbody>
</table>
<p>Each of these functions requires a <strong>path</strong> to the file in order to read it in. Let’s read in the ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv">neuralgia.csv</a>’ file. This is a comma separated value file (.csv). This requires the <code>read.csv</code> function.</p>
<p>R locates the file by the path you give it. You can give <em>full path name</em>. For example,</p>
<ul>
<li>ex: C:/Users/jbpost2/repos/StatisticalMethods/datasets/neuralgia.csv<br />
</li>
<li>ex: C:\\Users\\jbpost2\\repos\\StatisticalMethods\\datasets\\neuralgia.csv</li>
</ul>
<p><img src="img/pathVis.PNG" width="450px" style="display: block; margin: auto;" /></p>
<p>Notice that a double <code>\</code> is needed because <code>\</code> is an escape character in R so <code>\\</code> is really read as <code>\</code>.</p>
<p>Ok, let’s read in the neuralgia csv file using <code>read.csv</code>.</p>
<div class="sourceCode" id="cb763"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb763-1" title="1">neuralgiaData &lt;-<span class="st"> </span><span class="kw">read.csv</span>(</a>
<a class="sourceLine" id="cb763-2" title="2">           <span class="st">&quot;C:/Users/jbpost2/repos/StatisticalMethods/datasets/neuralgia.csv&quot;</span></a>
<a class="sourceLine" id="cb763-3" title="3">           )</a></code></pre></div>
<div class="sourceCode" id="cb764"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb764-1" title="1"><span class="kw">head</span>(neuralgiaData)</a></code></pre></div>
<pre><code>##   Treatment Sex Age Duration Pain
## 1         P   F  68        1   No
## 2         B   M  74       16   No
## 3         P   F  67       30   No
## 4         P   M  66       26  Yes
## 5         B   F  67       28   No
## 6         B   F  77       16   No</code></pre>
<p>Pretty simply if the data is nicely formatted! Using a full local path not recommended though! Doing so makes it difficult to share code without having to go in and change the paths. Instead you can change the <em>working directory</em> R is using. That is, the folder by default R is ‘looking’ for files. THen we can supply a <strong>relative</strong> path. As long as other users have the same folder structure as you (say if you are using a github repo), no changes need to be made for them to run the code!</p>
<p>We can determine the working directory using <code>getwd</code>.</p>
<div class="sourceCode" id="cb766"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb766-1" title="1"><span class="kw">getwd</span>()</a></code></pre></div>
<pre><code>## [1] &quot;C:/Users/jbpost2/repos/StatisticalMethods&quot;</code></pre>
<p>This can be changed using <code>setwd</code>.</p>
<div class="sourceCode" id="cb768"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb768-1" title="1"><span class="kw">setwd</span>(<span class="st">&quot;C:/Users/jbpost2/repos/StatisticalMethods/datasets&quot;</span>)</a>
<a class="sourceLine" id="cb768-2" title="2"><span class="co">#or</span></a>
<a class="sourceLine" id="cb768-3" title="3"><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">jbpost2</span><span class="ch">\\</span><span class="st">repos</span><span class="ch">\\</span><span class="st">StatisticalMethods</span><span class="ch">\\</span><span class="st">datasets&quot;</span>)</a></code></pre></div>
<p>The working directory can also be changed via the menus in RStudio.</p>
<p><img src="img/setwd.png" width="800px" /></p>
<p>Another way to supply a path is via a URL. This is really handy if you have a place to host your datasets!</p>
<div class="sourceCode" id="cb769"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb769-1" title="1">neuralgiaData &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv&quot;</span>)</a></code></pre></div>
<p>To recap, to read a csv file you can</p>
<ul>
<li><p>Use full local path (not recommended)</p></li>
<li><p>Use relative path</p>
<ul>
<li>set working directory with <code>setwd()</code></li>
</ul></li>
<li><p>Pull from a URL</p></li>
</ul>
<div id="quick-aside-rstudio-project-1" class="section level4">
<h4><span class="header-section-number">26.0.1.1</span> Quick Aside: RStudio Project</h4>
<p>Often we have many files associated with an analysis. When working on multiple undertakings things get cluttered in R… With each analysis we may want to associate different</p>
<pre><code>+ environments  
+ histories  
+ working directories  
+ source documents  </code></pre>
<p>The “Project” feature in R Studio allows us to easily do this! To create you can use the drop down menus.</p>
<p><img src="img/project.PNG" width="600px" style="display: block; margin: auto;" /></p>
<p>Now you can easily switch between analyses by using “File –&gt; Open Project” or by using the little drop down menu in the top right of RStudio.</p>
</div>
<div id="quick-aside-factors-1" class="section level4">
<h4><span class="header-section-number">26.0.1.2</span> Quick Aside: Factors</h4>
<p>As mentioned above there are <code>read.</code> functions for many different types of delimited data. These functions work really well but there are a few areas they could be improved.</p>
<ul>
<li>A poor default function behavior as strings are read as <code>factors</code></li>
</ul>
<p>Understanding factors is important enough to warrant a quick discussion. Let’s look at the structure of our neuralgiaData object we read in with <code>read.csv</code>.</p>
<div class="sourceCode" id="cb771"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb771-1" title="1"><span class="kw">str</span>(neuralgiaData)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    60 obs. of  5 variables:
##  $ Treatment: Factor w/ 3 levels &quot;A&quot;,&quot;B&quot;,&quot;P&quot;: 3 2 3 3 2 2 1 2 2 1 ...
##  $ Sex      : Factor w/ 2 levels &quot;F&quot;,&quot;M&quot;: 1 2 1 2 1 1 1 1 1 2 ...
##  $ Age      : int  68 74 67 66 67 77 71 72 76 71 ...
##  $ Duration : int  1 16 30 26 28 16 12 50 9 17 ...
##  $ Pain     : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 2 1 1 1 1 2 2 ...</code></pre>
<p>We can see that all of the character variables are <code>Factor</code> vectors. A factor is special class of vector with a <code>levels</code> attribute. The levels define all possible values for that variable. This is a great concept for a variable that can only take on a certain values such as <code>Day</code> (Monday, Tuesday, …, Sunday). However, if you have a variable like <code>Name</code> that you will eventually add new values (levels) to factors become a bit of a nuisance.</p>
<p>For example, in the neuralgia data set we may have a fourth treatment we want to add to the <code>Treatment</code> variable. Let’s try to assign the first observation value with a ‘new’ treatment called ‘M’.</p>
<div class="sourceCode" id="cb773"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb773-1" title="1">neuralgiaData<span class="op">$</span>Treatment</a></code></pre></div>
<pre><code>##  [1] P B P P B B A B B A A A B A P A P A P B B A A A B P B B P P A A B B B A P B
## [39] B P P P A B A P P A B P P P B A P A P A B A
## Levels: A B P</code></pre>
<div class="sourceCode" id="cb775"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb775-1" title="1">neuralgiaData<span class="op">$</span>Treatment[<span class="dv">1</span>] &lt;-<span class="st"> &quot;M&quot;</span></a></code></pre></div>
<pre><code>## Warning in `[&lt;-.factor`(`*tmp*`, 1, value = structure(c(NA, 2L, 3L, 3L, :
## invalid factor level, NA generated</code></pre>
<p>We can see this throws an error because ‘M’ is not one of the levels defined for the variable. To add the new value we have to alter the <code>levels</code> attribute of the factor.</p>
<div class="sourceCode" id="cb777"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb777-1" title="1"><span class="co">#overwrite with another possible level</span></a>
<a class="sourceLine" id="cb777-2" title="2"><span class="kw">levels</span>(neuralgiaData<span class="op">$</span>Treatment) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">levels</span>(neuralgiaData<span class="op">$</span>Treatment), <span class="st">&quot;M&quot;</span>)</a>
<a class="sourceLine" id="cb777-3" title="3"><span class="kw">levels</span>(neuralgiaData<span class="op">$</span>Treatment)</a></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;M&quot;</code></pre>
<div class="sourceCode" id="cb779"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb779-1" title="1">neuralgiaData<span class="op">$</span>Treatment[<span class="dv">1</span>] &lt;-<span class="st"> &quot;M&quot;</span></a></code></pre></div>
<p>Factors are very useful for plotting as we’ll see later.</p>
<p>For the other issues with the <code>read.</code> family we can look at useful functions from other R packages. R packages deserve a brief discussion as well!</p>
</div>
<div id="quick-aside-r-packages-1" class="section level4">
<h4><span class="header-section-number">26.0.1.3</span> Quick Aside: R Packages</h4>
<p>An R package is a collection of functions in one place. There are tons of packages to do most anything. In particular a group of packages called the “<a href="http://tidyverse.org/">TidyVerse</a>” has modernized the use of R for a larger audience. The tidyverse is a package that is a collection of eight R packages that share common philosophies and are designed to work together! One of these packages, <code>readr</code>, is extremely useful for reading in data and remedies the concerns mentioned above about the <code>read.</code> family of functions.</p>
<p>The first time using a package you must ‘install’ the package (download the files). You can do this</p>
<ul>
<li>Using code:</li>
</ul>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb780-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</a>
<a class="sourceLine" id="cb780-2" title="2"><span class="co">#can do multiple packages at once</span></a>
<a class="sourceLine" id="cb780-3" title="3"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;readr&quot;</span>, <span class="st">&quot;readxl&quot;</span>, <span class="st">&quot;haven&quot;</span>, <span class="st">&quot;DBI&quot;</span>, <span class="st">&quot;httr&quot;</span>))</a></code></pre></div>
<ul>
<li>Using menus:</li>
</ul>
<p><img src="img/packages.png" width="800px" style="display: block; margin: auto;" /></p>
<p>Note that you can also install packages from local sources (such as a downloaded .zip or .tar) but that isn’t usually required unless you are behind a firewall or R updates and the packages haven’t bene updated for that version of R.</p>
<p>The good thing is that you only need to install the packages once! However, this doesn’t mean you have direct access to your package functions or datasets in your R session. <strong>Each R session</strong> you open you need to read in the package using <code>library()</code> or <code>require()</code>.</p>
<div class="sourceCode" id="cb781"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb781-1" title="1"><span class="kw">library</span>(<span class="st">&quot;readr&quot;</span>)</a>
<a class="sourceLine" id="cb781-2" title="2"><span class="kw">require</span>(<span class="st">&quot;haven&quot;</span>)</a></code></pre></div>
<p>These functions are very similar; they both give you direct access to the functions or data in your R session. The difference is that if you try to load a package that doesn’t exist <code>library</code> throws an error where <code>require()</code> returns <code>FALSE</code>.</p>
<div class="sourceCode" id="cb782"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb782-1" title="1"><span class="kw">library</span>(<span class="st">&quot;notAPackage&quot;</span>)</a></code></pre></div>
<pre><code>## Error in library(&quot;notAPackage&quot;): there is no package called &#39;notAPackage&#39;</code></pre>
<div class="sourceCode" id="cb784"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb784-1" title="1"><span class="kw">require</span>(<span class="st">&quot;notAPackage&quot;</span>)</a></code></pre></div>
<pre><code>## Loading required package: notAPackage</code></pre>
<pre><code>## Warning in library(package, lib.loc = lib.loc, character.only = TRUE,
## logical.return = TRUE, : there is no package called &#39;notAPackage&#39;</code></pre>
<p>Now is a good time to install the <code>tidyverse</code> package if you haven’t already.</p>
<div class="sourceCode" id="cb787"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb787-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</a></code></pre></div>
<p>The functions in the <code>tidyverse</code> generally have</p>
<ul>
<li><p>Fast code</p></li>
<li><p>Easy syntax</p></li>
<li><p>Good default settings on functions</p></li>
<li><p>A nice set of examples and vignettes</p></li>
</ul>
<p>Read the package into your R session.</p>
<div class="sourceCode" id="cb788"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb788-1" title="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>You’ll likely see a message about functions being masked. This implies that one of the functions just loaded has a function under the same name as a function that already exists. If you type <code>help(filter)</code>, R will now give you an option of which <code>filter</code> to look at. R uses the most recently loaded function and “masks” the old ones. You can access specific package’s functions using <code>::</code>. This allows you to call functions without loading a full library.</p>
<div class="sourceCode" id="cb789"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb789-1" title="1">readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Treatment = col_character(),
##   Sex = col_character(),
##   Age = col_double(),
##   Duration = col_double(),
##   Pain = col_character()
## )</code></pre>
<pre><code>## # A tibble: 60 x 5
##    Treatment Sex     Age Duration Pain 
##    &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;
##  1 P         F        68        1 No   
##  2 B         M        74       16 No   
##  3 P         F        67       30 No   
##  4 P         M        66       26 Yes  
##  5 B         F        67       28 No   
##  6 B         F        77       16 No   
##  7 A         F        71       12 No   
##  8 B         F        72       50 No   
##  9 B         F        76        9 Yes  
## 10 A         M        71       17 Yes  
## # ... with 50 more rows</code></pre>
</div>
<div id="reading-delimited-data-1" class="section level4">
<h4><span class="header-section-number">26.0.1.4</span> Reading Delimited Data</h4>
<p>Again the <code>read.</code> functions exist to read in many different types of delimited data. These functions work really well but there are a few areas they could be improved.</p>
<ul>
<li><p>A poor default function behavior as strings are read as <code>factors</code></p></li>
<li><p>Raw data row &amp; column names can be troublesome</p></li>
<li><p>Slow processing (relatively speaking)</p></li>
<li><p>(Slightly) different behavior on different computers</p></li>
</ul>
<p>Functions from the <code>tidyverse</code> (and <code>readr</code> in particular) remedy all of these!</p>
<table>
<thead>
<tr class="header">
<th>Type of Delimeter</th>
<th><code>utils</code> Function</th>
<th><code>readr</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Comma</td>
<td><code>read.csv()</code></td>
<td><code>read_csv()</code></td>
</tr>
<tr class="even">
<td>Semicolon (<code>,</code> for decimal)</td>
<td><code>read.csv2()</code></td>
<td><code>read_csv2()</code></td>
</tr>
<tr class="odd">
<td>Tab</td>
<td><code>read.delim()</code></td>
<td><code>read_tsv()</code></td>
</tr>
<tr class="even">
<td>General</td>
<td><code>read.table(sep = "")</code></td>
<td><code>read_delim()</code></td>
</tr>
<tr class="odd">
<td>White Space</td>
<td><code>read.table(sep = "")</code></td>
<td><code>read_table()</code> <code>read_table2()</code></td>
</tr>
</tbody>
</table>
<p>Let’s reread the ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv">neuralgia.csv</a>’ file using <code>read_csv</code> from the <code>readr</code> package.</p>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb792-1" title="1">neuralgiaData &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/neuralgia.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Treatment = col_character(),
##   Sex = col_character(),
##   Age = col_double(),
##   Duration = col_double(),
##   Pain = col_character()
## )</code></pre>
<p>You can see that the package displays a bit of information about how the data was parsed.</p>
<div class="sourceCode" id="cb794"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb794-1" title="1">neuralgiaData</a></code></pre></div>
<pre><code>## # A tibble: 60 x 5
##    Treatment Sex     Age Duration Pain 
##    &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;
##  1 P         F        68        1 No   
##  2 B         M        74       16 No   
##  3 P         F        67       30 No   
##  4 P         M        66       26 Yes  
##  5 B         F        67       28 No   
##  6 B         F        77       16 No   
##  7 A         F        71       12 No   
##  8 B         F        72       50 No   
##  9 B         F        76        9 Yes  
## 10 A         M        71       17 Yes  
## # ... with 50 more rows</code></pre>
<p>You’ll also notice the fancy printing. This gives a quick check for the column type you have, which is a basic data validation step. The <code>tidyverse</code> has a special class of data frames called <code>tibbles</code>.</p>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb796-1" title="1"><span class="kw">class</span>(neuralgiaData)</a></code></pre></div>
<pre><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;         &quot;data.frame&quot;</code></pre>
<p>The behavior of <code>tibbles</code> is slightly different than that of a standard <code>data frame</code>. One is the printing method. The other major difference is that <code>tibbles</code> don’t simplify.</p>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb798-1" title="1">neuralgiaData[,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## # A tibble: 60 x 1
##    Treatment
##    &lt;chr&gt;    
##  1 P        
##  2 B        
##  3 P        
##  4 P        
##  5 B        
##  6 B        
##  7 A        
##  8 B        
##  9 B        
## 10 A        
## # ... with 50 more rows</code></pre>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb800-1" title="1"><span class="kw">as.data.frame</span>(neuralgiaData)[,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>##  [1] &quot;P&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [20] &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;B&quot;
## [39] &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [58] &quot;A&quot; &quot;B&quot; &quot;A&quot;</code></pre>
<p>As this behavior can cause some issues with functions that are expecting a vector it is useful to force simplification sometimes. You can either use the <code>pull</code> function or the <code>$</code> operator to return a column as a vector.</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb802-1" title="1"><span class="kw">pull</span>(neuralgiaData, <span class="dv">1</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;P&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [20] &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;B&quot;
## [39] &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [58] &quot;A&quot; &quot;B&quot; &quot;A&quot;</code></pre>
<div class="sourceCode" id="cb804"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb804-1" title="1">neuralgiaData<span class="op">$</span>Treatment </a></code></pre></div>
<pre><code>##  [1] &quot;P&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [20] &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;B&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;B&quot;
## [39] &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;P&quot; &quot;A&quot; &quot;B&quot; &quot;P&quot; &quot;P&quot; &quot;P&quot; &quot;B&quot; &quot;A&quot; &quot;P&quot; &quot;A&quot; &quot;P&quot;
## [58] &quot;A&quot; &quot;B&quot; &quot;A&quot;</code></pre>
<p>One question you may have about the column types is, how did R determine the column types? The help file for <code>read_csv</code> tells us that it checks the first 1000 rows of data and uses those to figure out the type of data. You can of course override this default behavior.</p>
<p>Some useful inputs you may want to change when reading in data are</p>
<ul>
<li><p><code>skip = 0</code></p></li>
<li><p><code>col_names = TRUE</code></p></li>
<li><p><code>na = c("", "NA")</code></p></li>
</ul>
<p>These allow you to skip lines of data, specify column names, and define what represents a missing value in the raw data (<code>NA</code> is the missing data indicator in R).</p>
<p>Generally, reading <em>clean</em> delimited data pretty easy with the <code>read_</code> family of functions! Let’s go through a few examples.</p>
<p>First, let’s read in the space delimited file ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/chemical.txt">chemical.txt</a>’. Since this is space delimited we’ll use <code>read_table</code>.</p>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb806-1" title="1"><span class="kw">read_table</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/chemical.txt&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   `temp conc time percent` = col_character()
## )</code></pre>
<pre><code>## # A tibble: 19 x 1
##    `temp conc time percent`
##    &lt;chr&gt;                   
##  1 -1 -1 -1 45.9           
##  2 1 -1 -1 60.6            
##  3 -1 1 -1 57.5            
##  4 1 1 -1 58.6             
##  5 -1 -1 1 53.3            
##  6 1 -1 1 58               
##  7 -1 1 1 58.8             
##  8 1 1 1 52.4              
##  9 -2 0 0 46.9             
## 10 2 0 0 55.4              
## 11 0 -2 0 55               
## 12 0 2 0 57.5              
## 13 0 0 -2 56.3             
## 14 0 0 2 58.9              
## 15 0 0 0 56.9              
## 16 2 -3 0 61.1             
## 17 2 -3 0 62.9             
## 18 -1.4 2.6 0.7 60         
## 19 -1.4 2.6 0.7 60.6</code></pre>
<p>Next, let’s read in the tab delimited file ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/crabs.txt">crabs.txt</a>’. Since this is tab delimited we’ll use <code>read_tsv</code>.</p>
<div class="sourceCode" id="cb809"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb809-1" title="1"><span class="kw">read_tsv</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/crabs.txt&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   color = col_double(),
##   spine = col_double(),
##   width = col_double(),
##   satell = col_double(),
##   weight = col_double(),
##   y = col_double()
## )</code></pre>
<pre><code>## # A tibble: 173 x 6
##    color spine width satell weight     y
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
##  1     3     3  28.3      8   3050     1
##  2     4     3  22.5      0   1550     0
##  3     2     1  26        9   2300     1
##  4     4     3  24.8      0   2100     0
##  5     4     3  26        4   2600     1
##  6     3     3  23.8      0   2100     0
##  7     2     1  26.5      0   2350     0
##  8     4     2  24.7      0   1900     0
##  9     3     1  23.7      0   1950     0
## 10     4     3  25.6      0   2150     0
## # ... with 163 more rows</code></pre>
<p>Lastly, let’s read in the <code>&gt;</code> delimited file ‘<a href="https://www4.stat.ncsu.edu/~online/datasets/umps2012.txt">umps2012.txt</a>’. As this isn’t a standard delimiter we’ll use <code>read_delim</code> and specify the <code>delim =</code> input. However, this file doesn’t contain column names in the raw data. The columns represent Year, Month, Day, Home, Away, and HPUmpire. The column names can be specified using the <code>col_names</code> input and specifying them with a character vector.</p>
<div class="sourceCode" id="cb812"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb812-1" title="1"><span class="kw">read_delim</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/umps2012.txt&quot;</span>, <span class="dt">delim =</span> <span class="st">&quot;&gt;&quot;</span>,</a>
<a class="sourceLine" id="cb812-2" title="2">           <span class="dt">col_names =</span> <span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Day&quot;</span>, <span class="st">&quot;Home&quot;</span>, <span class="st">&quot;Away&quot;</span>, <span class="st">&quot;HPUmpire&quot;</span>))</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Year = col_double(),
##   Month = col_double(),
##   Day = col_double(),
##   Home = col_character(),
##   Away = col_character(),
##   HPUmpire = col_character()
## )</code></pre>
<pre><code>## # A tibble: 2,359 x 6
##     Year Month   Day Home  Away  HPUmpire        
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;           
##  1  2012     4    12 MIN   LAA   D.J. Reyburn    
##  2  2012     4    12 SD    ARI   Marty Foster    
##  3  2012     4    12 WSH   CIN   Mike Everitt    
##  4  2012     4    12 PHI   MIA   Jeff Nelson     
##  5  2012     4    12 CHC   MIL   Fieldin Culbreth
##  6  2012     4    12 LAD   PIT   Wally Bell      
##  7  2012     4    12 TEX   SEA   Doug Eddings    
##  8  2012     4    12 COL   SF    Ron Kulpa       
##  9  2012     4    12 DET   TB    Mark Carlson    
## 10  2012     4    13 NYY   LAA   Mike DiMuro     
## # ... with 2,349 more rows</code></pre>
</div>
<div id="non-standard-data-1" class="section level4">
<h4><span class="header-section-number">26.0.1.5</span> Non-Standard Data</h4>
<p>To read in tricky, non-standard data there are a few functions that can help.</p>
<ul>
<li><p><code>read_file</code> - reads an entire file into a single string</p></li>
<li><p><code>read_lines</code> - reads a file into a character vector with one element per line</p></li>
</ul>
<p>These are often parsed with <code>regular expressions</code>.</p>
</div>
<div id="excel-data-1" class="section level4">
<h4><span class="header-section-number">26.0.1.6</span> Excel data</h4>
<p>Next we’ll cover reading data from Excel files (<code>readxl</code> package), SAS datasets (<code>haven</code> package), and SPSS files (<code>haven</code> package).</p>
<table>
<thead>
<tr class="header">
<th>Type of file</th>
<th>Package</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Delimited</td>
<td><code>readr</code></td>
<td><code>read_csv()</code>, <code>read_tsv()</code>,<code>read_table()</code>, <code>read_delim()</code></td>
</tr>
<tr class="even">
<td>Excel (.xls,.xlsx)</td>
<td><code>readxl</code></td>
<td><code>read_excel()</code></td>
</tr>
<tr class="odd">
<td>SAS (.sas7bdat)</td>
<td><code>haven</code></td>
<td><code>read_sas()</code></td>
</tr>
<tr class="even">
<td>SPSS (.sav)</td>
<td><code>haven</code></td>
<td><code>read_spss()</code></td>
</tr>
</tbody>
</table>
<p>Let’s read in the <a href="https://www4.stat.ncsu.edu/~online/datasets/censusEd.xlsx">censusEd.xlsx</a> file.This can be done with the <code>read_excel()</code> from <code>readxl</code> package! This funcion reads in both xls and xlsx files. It detects the format from the file extension given in the path name. One issue is that excel files can be read from the web so they do need to be downloaded locally.</p>
<div class="sourceCode" id="cb815"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb815-1" title="1"><span class="co">#install package if necessary</span></a>
<a class="sourceLine" id="cb815-2" title="2"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb815-3" title="3"><span class="co">#reads first sheet by default</span></a>
<a class="sourceLine" id="cb815-4" title="4">edData &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;datasets/censusEd.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb815-5" title="5">edData</a></code></pre></div>
<pre><code>## # A tibble: 3,198 x 42
##    Area_name STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F
##    &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
##  1 UNITED S~ 00000          0   40024299 0000        0000                 0
##  2 ALABAMA   01000          0     733735 0000        0000                 0
##  3 Autauga,~ 01001          0       6829 0000        0000                 0
##  4 Baldwin,~ 01003          0      16417 0000        0000                 0
##  5 Barbour,~ 01005          0       5071 0000        0000                 0
##  6 Bibb, AL  01007          0       3557 0000        0000                 0
##  7 Blount, ~ 01009          0       7319 0000        0000                 0
##  8 Bullock,~ 01011          0       2014 0000        0000                 0
##  9 Butler, ~ 01013          0       4640 0000        0000                 0
## 10 Calhoun,~ 01015          0      20939 0000        0000                 0
## # ... with 3,188 more rows, and 35 more variables: EDU010188D &lt;dbl&gt;,
## #   EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;, EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;,
## #   EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;, EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;,
## #   EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;, EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;,
## #   EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;, EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;,
## #   EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;, EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;,
## #   EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;, EDU010194F &lt;dbl&gt;, EDU010194D &lt;dbl&gt;,
## #   EDU010194N1 &lt;chr&gt;, EDU010194N2 &lt;chr&gt;, EDU010195F &lt;dbl&gt;, EDU010195D &lt;dbl&gt;,
## #   EDU010195N1 &lt;chr&gt;, EDU010195N2 &lt;chr&gt;, EDU010196F &lt;dbl&gt;, EDU010196D &lt;dbl&gt;,
## #   EDU010196N1 &lt;chr&gt;, EDU010196N2 &lt;chr&gt;</code></pre>
<p>If you want to read in a sheet other than the first sheet, you can do so with the <code>sheet =</code> argument. To look at the available sheets without opening in Excel you can use the <code>excel_sheets</code> function.</p>
<div class="sourceCode" id="cb817"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb817-1" title="1"><span class="kw">excel_sheets</span>(<span class="st">&quot;datasets/censusEd.xlsx&quot;</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;EDU01A&quot; &quot;EDU01B&quot; &quot;EDU01C&quot; &quot;EDU01D&quot; &quot;EDU01E&quot; &quot;EDU01F&quot; &quot;EDU01G&quot; &quot;EDU01H&quot;
##  [9] &quot;EDU01I&quot; &quot;EDU01J&quot;</code></pre>
<div class="sourceCode" id="cb819"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb819-1" title="1"><span class="kw">read_excel</span>(<span class="st">&quot;datasets/censusEd.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="st">&quot;EDU01D&quot;</span>)</a></code></pre></div>
<p>There are also ways to specify which cells to read in with the <code>range =</code> argument. You can select cells that are contiguous only (next to each other).</p>
<div class="sourceCode" id="cb820"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb820-1" title="1">edData &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;datasets/censusEd.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="st">&quot;EDU01A&quot;</span>, </a>
<a class="sourceLine" id="cb820-2" title="2">                   <span class="dt">range =</span> <span class="kw">cell_cols</span>(<span class="st">&quot;A:D&quot;</span>))</a>
<a class="sourceLine" id="cb820-3" title="3">edData</a></code></pre></div>
<pre><code>## # A tibble: 3,198 x 4
##    Area_name     STCOU EDU010187F EDU010187D
##    &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;
##  1 UNITED STATES 00000          0   40024299
##  2 ALABAMA       01000          0     733735
##  3 Autauga, AL   01001          0       6829
##  4 Baldwin, AL   01003          0      16417
##  5 Barbour, AL   01005          0       5071
##  6 Bibb, AL      01007          0       3557
##  7 Blount, AL    01009          0       7319
##  8 Bullock, AL   01011          0       2014
##  9 Butler, AL    01013          0       4640
## 10 Calhoun, AL   01015          0      20939
## # ... with 3,188 more rows</code></pre>
</div>
<div id="sas-data-1" class="section level4">
<h4><span class="header-section-number">26.0.1.7</span> SAS Data</h4>
<p>SAS datasets have a file extension of ‘.sas7bdat’. Let’s read in the <a href="https://www4.stat.ncsu.edu/~online/datasets/smoke2003.sas7bdat">smoke2003.sas7bdat</a> dataset. This can be done using the <code>read_sas</code> function from the <code>haven</code> package. As .sas7bdat files are pretty structured there aren’t many options to use with this function.</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb822-1" title="1"><span class="co">#install if necessary</span></a>
<a class="sourceLine" id="cb822-2" title="2"><span class="kw">library</span>(haven)</a>
<a class="sourceLine" id="cb822-3" title="3">smokeData &lt;-<span class="st"> </span><span class="kw">read_sas</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/smoke2003.sas7bdat&quot;</span>)</a>
<a class="sourceLine" id="cb822-4" title="4">smokeData</a></code></pre></div>
<pre><code>## # A tibble: 443 x 54
##     SEQN SDDSRVYR RIDSTATR RIDEXMON RIAGENDR RIDAGEYR RIDAGEMN RIDAGEEX RIDRETH1
##    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 21010        3        2        2        2       52      633      634        3
##  2 21012        3        2        2        1       63      765      766        4
##  3 21048        3        2        1        2       42      504      504        1
##  4 21084        3        2        1        2       57      692      693        3
##  5 21093        3        2        1        2       64      778      778        2
##  6 21117        3        2        2        2       63      763      763        3
##  7 21118        3        2        1        1       66      801      801        1
##  8 21120        3        2        2        2       60      731      732        3
##  9 21169        3        2        1        1       65      786      787        3
## 10 21184        3        2        1        2       47      573      573        3
## # ... with 433 more rows, and 45 more variables: RIDRETH2 &lt;dbl&gt;,
## #   DMQMILIT &lt;dbl&gt;, DMDBORN &lt;dbl&gt;, DMDCITZN &lt;dbl&gt;, DMDYRSUS &lt;dbl&gt;,
## #   DMDEDUC3 &lt;dbl&gt;, DMDEDUC2 &lt;dbl&gt;, DMDEDUC &lt;dbl&gt;, DMDSCHOL &lt;dbl&gt;,
## #   DMDMARTL &lt;dbl&gt;, DMDHHSIZ &lt;dbl&gt;, INDHHINC &lt;dbl&gt;, INDFMINC &lt;dbl&gt;,
## #   INDFMPIR &lt;dbl&gt;, RIDEXPRG &lt;dbl&gt;, DMDHRGND &lt;dbl&gt;, DMDHRAGE &lt;dbl&gt;,
## #   DMDHRBRN &lt;dbl&gt;, DMDHREDU &lt;dbl&gt;, DMDHRMAR &lt;dbl&gt;, DMDHSEDU &lt;dbl&gt;,
## #   SIALANG &lt;dbl&gt;, SIAPROXY &lt;dbl&gt;, SIAINTRP &lt;dbl&gt;, FIALANG &lt;dbl&gt;,
## #   FIAPROXY &lt;dbl&gt;, FIAINTRP &lt;dbl&gt;, MIALANG &lt;dbl&gt;, MIAPROXY &lt;dbl&gt;,
## #   MIAINTRP &lt;dbl&gt;, AIALANG &lt;dbl&gt;, WTINT2YR &lt;dbl&gt;, WTMEC2YR &lt;dbl&gt;,
## #   SDMVPSU &lt;dbl&gt;, SDMVSTRA &lt;dbl&gt;, Gender &lt;dbl&gt;, Age &lt;dbl&gt;, IncomeGroup &lt;chr&gt;,
## #   Ethnicity &lt;chr&gt;, Education &lt;dbl&gt;, SMD070 &lt;dbl&gt;, SMQ077 &lt;dbl&gt;, SMD650 &lt;dbl&gt;,
## #   PacksPerDay &lt;dbl&gt;, lbdvid &lt;dbl&gt;</code></pre>
<p>Often times SAS datasets have labels associated with the variable names. These are more descriptive titles that will print in SAS if requested. This is the case here. However, as you see above the labels did not print out. The labels will show if you look at the data set using the <code>View</code> function (or click on smokeData object from environment tab). How do we get to those labels?</p>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb824-1" title="1"><span class="kw">str</span>(smokeData)</a></code></pre></div>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    443 obs. of  54 variables:
##  $ SEQN       : num  21010 21012 21048 21084 21093 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Patient ID&quot;
##  $ SDDSRVYR   : num  3 3 3 3 3 3 3 3 3 3 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Data Release Number&quot;
##  $ RIDSTATR   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Interview/Examination Status&quot;
##  $ RIDEXMON   : num  2 2 1 1 1 2 1 2 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Six month time period&quot;
##  $ RIAGENDR   : num  2 1 2 2 2 2 1 2 1 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Gender 1=M 2=F&quot;
##  $ RIDAGEYR   : num  52 63 42 57 64 63 66 60 65 47 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Age in Years at Exam&quot;
##  $ RIDAGEMN   : num  633 765 504 692 778 763 801 731 786 573 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Age in Months - Recode&quot;
##  $ RIDAGEEX   : num  634 766 504 693 778 763 801 732 787 573 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Exam Age in Months - Recode&quot;
##  $ RIDRETH1   : num  3 4 1 3 2 3 1 3 3 3 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot; Ethnicity 1=MexAm 2=OthHisp 3=OthCauc 4=OthBla 5=Oth&quot;
##  $ RIDRETH2   : num  1 2 3 1 5 1 3 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Linked NH3 Race/Ethnicity - Recode&quot;
##  $ DMQMILIT   : num  2 2 2 2 2 2 2 2 1 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Veteran/Military Status&quot;
##  $ DMDBORN    : num  1 1 1 1 3 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Country of Birth - Recode&quot;
##  $ DMDCITZN   : num  1 1 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Citizenship Status&quot;
##  $ DMDYRSUS   : num  NA NA NA NA 9 NA NA NA NA NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Length of time in US&quot;
##  $ DMDEDUC3   : num  NA NA NA NA NA NA NA NA NA NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Education Level - Children/Youth 6-19&quot;
##  $ DMDEDUC2   : num  4 3 3 4 1 3 1 4 4 4 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Education Level for Over 20&quot;
##  $ DMDEDUC    : num  3 2 2 3 1 2 1 3 3 3 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Education - Recode (old version)&quot;
##  $ DMDSCHOL   : num  NA NA NA NA NA NA NA NA NA NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Now attending school?&quot;
##  $ DMDMARTL   : num  6 6 3 1 2 1 6 3 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Marital Status&quot;
##  $ DMDHHSIZ   : num  3 2 5 2 2 2 2 3 2 6 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Total number of people in the Household&quot;
##  $ INDHHINC   : num  6 2 5 9 2 5 3 6 8 5 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Annual Household Income&quot;
##  $ INDFMINC   : num  4 2 2 9 2 5 3 6 8 4 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Family Income&quot;
##  $ INDFMPIR   : num  1.24 0.89 0.48 4.62 0.61 1.92 1.39 2.21 3.71 1.23 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Family PIR&quot;
##  $ RIDEXPRG   : num  2 NA 2 2 NA NA NA NA NA 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Pregnancy Status at Exam - Recode&quot;
##  $ DMDHRGND   : num  1 1 2 2 2 1 1 2 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Gender&quot;
##  $ DMDHRAGE   : num  54 63 59 57 64 66 66 84 65 50 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Age&quot;
##  $ DMDHRBRN   : num  1 1 1 1 3 1 1 1 1 NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Country of Birth&quot;
##  $ DMDHREDU   : num  1 3 4 4 1 3 1 5 4 NA ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Education Level&quot;
##  $ DMDHRMAR   : num  6 6 3 1 2 1 6 2 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person Marital Status&quot;
##  $ DMDHSEDU   : num  NA NA NA 3 NA 3 NA NA 2 4 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;HH Ref Person&#39;s Spouse Education Level&quot;
##  $ SIALANG    : num  1 1 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Language of SP Interview&quot;
##  $ SIAPROXY   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Proxy used in SP Interview?&quot;
##  $ SIAINTRP   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Interpreter used in SP Interview?&quot;
##  $ FIALANG    : num  1 1 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Language of Family Interview&quot;
##  $ FIAPROXY   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Proxy used in Family Interview?&quot;
##  $ FIAINTRP   : num  2 2 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Interpreter used in Family Interview?&quot;
##  $ MIALANG    : num  1 NA 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Language of MEC Interview&quot;
##  $ MIAPROXY   : num  2 NA 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Proxy used in MEC Interview?&quot;
##  $ MIAINTRP   : num  2 NA 2 2 2 2 2 2 2 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Interpreter used in MEC Interview?&quot;
##  $ AIALANG    : num  1 NA 1 1 NA NA NA NA NA 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Language of ACASI Interview&quot;
##  $ WTINT2YR   : num  39599 12629 18792 91437 24475 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Full Sample 2 Year Interview Weight&quot;
##  $ WTMEC2YR   : num  43287 12947 19035 93163 27829 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Full Sample 2 Year MEC Exam Weight&quot;
##  $ SDMVPSU    : num  1 2 2 1 1 2 1 2 1 2 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Masked Variance Pseudo-PSU&quot;
##  $ SDMVSTRA   : num  29 33 39 34 35 30 34 30 38 34 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Masked Variance Pseudo-Stratum&quot;
##  $ Gender     : num  2 1 2 2 2 2 1 2 1 2 ...
##  $ Age        : num  52 63 42 57 64 63 66 60 65 47 ...
##  $ IncomeGroup: chr  &quot;Less Than 20K&quot; &quot;Less Than 20K&quot; &quot;Less Than 20K&quot; &quot;More Than 20K&quot; ...
##  $ Ethnicity  : chr  &quot;Non-Hispanic Caucasian&quot; &quot;Non-Hispanic Black&quot; &quot;MexicanAmerican &amp; Hispanic&quot; &quot;Non-Hispanic Caucasian&quot; ...
##  $ Education  : num  4 3 3 4 1 3 1 4 4 4 ...
##  $ SMD070     : num  20 20 20 20 20 16 20 20 10 6 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Number of Cagarettes Smoked/day now&quot;
##  $ SMQ077     : num  2 2 1 3 2 2 2 1 3 3 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;How soon after waking do you smoke?&quot;
##  $ SMD650     : num  20 20 20 20 20 10 20 20 10 1 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Number of Cigarettes/day for last 30 days&quot;
##  $ PacksPerDay: num  1 1 1 1 1 0.5 1 1 0.5 0.05 ...
##  $ lbdvid     : num  16 18 16 17 18 25 9 27 9 25 ...
##  - attr(*, &quot;label&quot;)= chr &quot;DATA2003&quot;</code></pre>
<p>The labels are an <strong>attribute</strong> of the dataset. The attribute is called “label”. These can be accessed using the <code>attr</code> function.</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb826-1" title="1"><span class="kw">attr</span>(smokeData<span class="op">$</span>SDDSRVYR, <span class="st">&quot;label&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Data Release Number&quot;</code></pre>
</div>
<div id="spss-data-1" class="section level4">
<h4><span class="header-section-number">26.0.1.8</span> SPSS Data</h4>
<p>SPSS datasets have a file extension of “.sav”. Let’s read in the <a href="https://www4.stat.ncsu.edu/~online/datasets/bodyFat.sav">bodyFat.sav</a> dataset. This can be done using the <code>read_spss</code> function from the <code>haven</code> package. As with SAS datasets, these are well structured so there aren’t many options to use with the function.</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb828-1" title="1">bodyFatData &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">&quot;https://www4.stat.ncsu.edu/~online/datasets/bodyFat.sav&quot;</span>)</a>
<a class="sourceLine" id="cb828-2" title="2">bodyFatData</a></code></pre></div>
<pre><code>## # A tibble: 20 x 4
##        y    x1    x2    x3
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  19.5  43.1  29.1  11.9
##  2  24.7  49.8  28.2  22.8
##  3  30.7  51.9  37    18.7
##  4  29.8  54.3  31.1  20.1
##  5  19.1  42.2  30.9  12.9
##  6  25.6  53.9  23.7  21.7
##  7  31.4  58.5  27.6  27.1
##  8  27.9  52.1  30.6  25.4
##  9  22.1  49.9  23.2  21.3
## 10  25.5  53.5  24.8  19.3
## 11  31.1  56.6  30    25.4
## 12  30.4  56.7  28.3  27.2
## 13  18.7  46.5  23    11.7
## 14  19.7  44.2  28.6  17.8
## 15  14.6  42.7  21.3  12.8
## 16  29.5  54.4  30.1  23.9
## 17  27.7  55.3  25.7  22.6
## 18  30.2  58.6  24.6  25.4
## 19  22.7  48.2  27.1  14.8
## 20  25.2  51    27.5  21.1</code></pre>
</div>
<div id="json-1" class="section level4">
<h4><span class="header-section-number">26.0.1.9</span> JSON</h4>
<p><strong>JSON</strong> stands for JavaScript Object Notation. This data format is used widely across the internet and in databases. JSON data can represent our usual 2D data or heirarchical data. JSON uses key-value pairs. An example of raw JSON data is given below.</p>
<div class="sourceCode" id="cb830"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb830-1" title="1">{  </a>
<a class="sourceLine" id="cb830-2" title="2">  {  </a>
<a class="sourceLine" id="cb830-3" title="3">    <span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st"> &quot;Barry Sanders&quot;</span>  </a>
<a class="sourceLine" id="cb830-4" title="4">    <span class="st">&quot;games&quot;</span> <span class="op">:</span><span class="st"> </span><span class="dv">153</span>  </a>
<a class="sourceLine" id="cb830-5" title="5">    <span class="st">&quot;position&quot;</span><span class="op">:</span><span class="st"> &quot;RB&quot;</span>  </a>
<a class="sourceLine" id="cb830-6" title="6">  },  </a>
<a class="sourceLine" id="cb830-7" title="7">  {  </a>
<a class="sourceLine" id="cb830-8" title="8">    <span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st"> &quot;Joe Montana&quot;</span>  </a>
<a class="sourceLine" id="cb830-9" title="9">    <span class="st">&quot;games&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">192</span>  </a>
<a class="sourceLine" id="cb830-10" title="10">    <span class="st">&quot;position&quot;</span><span class="op">:</span><span class="st"> &quot;QB&quot;</span>  </a>
<a class="sourceLine" id="cb830-11" title="11">  }  </a>
<a class="sourceLine" id="cb830-12" title="12">} </a></code></pre></div>
<p>There are three major R packages for reading in JSON data:</p>
<ol style="list-style-type: decimal">
<li><p><code>rjson</code></p></li>
<li><p><code>RJSONIO</code></p></li>
<li><p><code>jsonlite</code></p></li>
</ol>
<p>We prefer <code>jsonlite</code>. It has many nice features to simplify reading in data, but these features do make the package’s functions a little slower. The most useful functions from <a href="https://www.rdocumentation.org/packages/jsonlite/versions/1.6"><code>jsonlite</code></a> are summarized below:</p>
<table>
<colgroup>
<col width="18%" />
<col width="81%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>fromJSON</code></td>
<td>Reads JSON data from file path or character string. Converts and simplfies to R object</td>
</tr>
<tr class="even">
<td><code>toJSON</code></td>
<td>Writes R object to JSON object</td>
</tr>
<tr class="odd">
<td><code>stream_in</code></td>
<td>Accepts a <em>file connection</em> - can read streaming JSON data</td>
</tr>
</tbody>
</table>
</div>
<div id="xml-1" class="section level4">
<h4><span class="header-section-number">26.0.1.10</span> XML</h4>
<p>XML stands for eXtensible Markup Language. This is another data format that is used widely across the internet and in databases. This type of data can again represent our usual 2D data or heirarchical data. XML uss tags &lt; &gt; similar to HTML. An example of raw XML data is given below.</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb831-1" title="1"><span class="op">&lt;</span>roster<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-2" title="2"><span class="st">  </span><span class="er">&lt;</span>player<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-3" title="3"><span class="st">    </span><span class="er">&lt;</span>name<span class="op">&gt;</span>Barry Sanders<span class="op">&lt;</span><span class="er">/</span>name<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-4" title="4"><span class="st">    </span><span class="er">&lt;</span>games<span class="op">&gt;</span><span class="dv">153</span><span class="op">&lt;</span><span class="er">/</span>games<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-5" title="5"><span class="st">    </span><span class="er">&lt;</span>position<span class="op">&gt;</span>RB<span class="op">&lt;</span><span class="er">/</span>position<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-6" title="6"><span class="st">  </span><span class="er">&lt;/</span>player<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-7" title="7"><span class="st">  </span><span class="er">&lt;</span>player<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-8" title="8"><span class="st">    </span><span class="er">&lt;</span>name<span class="op">&gt;</span>Joe Montana<span class="op">&lt;</span><span class="er">/</span>name<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-9" title="9"><span class="st">    </span><span class="er">&lt;</span>games<span class="op">&gt;</span><span class="dv">192</span><span class="op">&lt;</span><span class="er">/</span>games<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-10" title="10"><span class="st">    </span><span class="er">&lt;</span>position<span class="op">&gt;</span>QB<span class="op">&lt;</span><span class="er">/</span>position<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-11" title="11"><span class="st">  </span><span class="er">&lt;/</span>player<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb831-12" title="12"><span class="er">&lt;/</span>roster<span class="op">&gt;</span></a></code></pre></div>
<p>The structure of the nodes has parent nodes, child nodes, etc. A basic diagram is given below.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-208"></span>
<img src="img/xmlDiagram.jpg" alt="Source: mysamplecode.com" width="600px" />
<p class="caption">
Figure 26.1: Source: mysamplecode.com
</p>
</div>
<p>There are two major R packages for reading in XML data:</p>
<ol style="list-style-type: decimal">
<li><p><code>XML</code></p></li>
<li><p><code>xml2</code></p></li>
</ol>
<p><code>xml2</code> has all the basic functionality to get data into R. Reading XML data is generally tough since the structure of tags varies by data source! The <a href="https://cran.r-project.org/web/packages/xml2/index.html"><code>xml2</code></a> core functions are:</p>
<table>
<colgroup>
<col width="23%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>read_xml</code></td>
<td>Accepts string, file path, or url argument. Returns XML data object</td>
</tr>
<tr class="even">
<td><code>xml_children</code></td>
<td>Returns list of elements downstream from current node</td>
</tr>
<tr class="odd">
<td><code>xml_parents</code></td>
<td>Returns list of all parent elements from current node</td>
</tr>
<tr class="even">
<td><code>xml_contents</code></td>
<td>Returns list of contents from current node</td>
</tr>
<tr class="odd">
<td><code>as_list</code></td>
<td>Converts XML document or node set to equivalent R list</td>
</tr>
</tbody>
</table>
</div>
<div id="databases-1" class="section level4">
<h4><span class="header-section-number">26.0.1.11</span> Databases</h4>
<p>A database is a collection of data, usually a bunch of 2D tables that have keys that connect them. The Database Management System (DBMS) controls how users interact with the database. There is a common and very useful Structured Query Language (SQL - pronounced ess-que-el or sequel) used by relational database management systems (RDBMS) for retrieving and combining datasets from a database.</p>
<p>An example of a relational database structure is given below. Notice there are keys that link different tables.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-209"></span>
<img src="img/lahman.jpg" alt="Source: oreilly.com" width="550px" />
<p class="caption">
Figure 26.2: Source: oreilly.com
</p>
</div>
<p>There are many popular RDBMS. Some are free and some are proprietary. These are often simply referred to as databases.</p>
<ul>
<li><p>Oracle - most popular (cross platform)</p></li>
<li><p>SQL Server - Microsoft product</p></li>
<li><p>DB2 - IBM product</p></li>
<li><p>MySQL (open source) - Not as many features but popular</p></li>
<li><p>PostgreSQL (open source)</p></li>
</ul>
<p>Again there is a <a href="http://www.sqltutorial.org/sql-cheat-sheet/">Basic SQL language</a> that is constant across all these database types.</p>
<p>The common flow to connect to a database using R is:</p>
<ol style="list-style-type: decimal">
<li>Connect to the database with <code>DBI::dbConnect()</code><br />
</li>
</ol>
<ul>
<li>Need appropriate R package for database backend
<ul>
<li><code>RSQLite::SQLite()</code> for RSQLite<br />
</li>
<li><code>RMySQL::MySQL()</code> for RMySQL<br />
</li>
<li><code>RPostgreSQL::PostgreSQL()</code> for RPostgreSQL<br />
</li>
<li><code>odbc::odbc()</code> for Open Database Connectivity<br />
</li>
<li><code>bigrquery::bigquery()</code> for google’s bigQuery</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb832"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb832-1" title="1">con &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbConnect</span>(RMySQL<span class="op">::</span><span class="kw">MySQL</span>(), </a>
<a class="sourceLine" id="cb832-2" title="2">  <span class="dt">host =</span> <span class="st">&quot;hostname.website&quot;</span>,</a>
<a class="sourceLine" id="cb832-3" title="3">  <span class="dt">user =</span> <span class="st">&quot;username&quot;</span>,</a>
<a class="sourceLine" id="cb832-4" title="4">  <span class="dt">password =</span> rstudioapi<span class="op">::</span><span class="kw">askForPassword</span>(<span class="st">&quot;DB password&quot;</span>)</a>
<a class="sourceLine" id="cb832-5" title="5">)</a></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Use <code>tbl()</code> to reference a table in the database</li>
</ol>
<div class="sourceCode" id="cb833"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb833-1" title="1"><span class="kw">tbl</span>(con, <span class="st">&quot;name_of_table&quot;</span>)</a></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Query the database with <code>SQL</code> or <code>dplyr/dbplyr</code></li>
</ol>
<p>There is much more about <a href="https://db.rstudio.com/">R Studio and Databases here</a>.</p>
</div>
<div id="apis-1" class="section level4">
<h4><span class="header-section-number">26.0.1.12</span> APIs</h4>
<p>API stands for Application Programming Interfaces. This is essentially a defined method for asking for information from a computer. They are useful for getting data or allowing others to run a model you’ve built.</p>
<p>There are many open APIs. They usually just require you to register and obtain a key. Once you have a key you simply need to construct the proper URL to return the information you want from the API.</p>
<p>As a quick example we will query the Harry Potter database at <a href="https://www.potterapi.com/">https://www.potterapi.com/</a>. There is a button on the top right where you can register and obtain a key.</p>
<p><img src="img/HPAPI.PNG" width="800px" style="display: block; margin: auto;" /></p>
<p>The documentation for returning Harry Potter spells states:</p>
<pre><code>+ All routes need to be prefixed with https://www.potterapi.com/v1/  

+ GET request: /spells returns all spells 

+ Key goes on the end  </code></pre>
<p>This tells us how to construct the appropriate URL. The <code>paste</code> and <code>paste0</code> functions are useful for combining strings (check their help).</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb835-1" title="1">baseURL &lt;-<span class="st"> &quot;https://www.potterapi.com/v1/&quot;</span></a>
<a class="sourceLine" id="cb835-2" title="2">value &lt;-<span class="st"> &quot;spells?&quot;</span></a>
<a class="sourceLine" id="cb835-3" title="3">key &lt;-<span class="st"> &quot;key=$2a$10$UMvDCH.93fa2KOjKbJYkOOPMNzdzQpJ0gMnVEtcHzW5Ic04HUmcsa&quot;</span></a>
<a class="sourceLine" id="cb835-4" title="4">URL &lt;-<span class="st"> </span><span class="kw">paste0</span>(baseURL, value, key)</a>
<a class="sourceLine" id="cb835-5" title="5">URL</a></code></pre></div>
<pre><code>## [1] &quot;https://www.potterapi.com/v1/spells?key=$2a$10$UMvDCH.93fa2KOjKbJYkOOPMNzdzQpJ0gMnVEtcHzW5Ic04HUmcsa&quot;</code></pre>
<p>Now we use the <code>RCurl</code> package and the <code>getURL</code> function to ping the URL we just created. This will return the spell data set in JSON form as that is the default response format for this API.</p>
<div class="sourceCode" id="cb837"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb837-1" title="1">spellData &lt;-<span class="st"> </span>RCurl<span class="op">::</span><span class="kw">getURL</span>(URL)</a></code></pre></div>
<p>This is a reasonably large string of information so we can just look at the first 100 characters using the <code>substr</code> function.</p>
<div class="sourceCode" id="cb838"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb838-1" title="1"><span class="kw">substr</span>(spellData, <span class="dv">1</span>, <span class="dv">100</span>) </a></code></pre></div>
<pre><code>## [1] &quot;[{\&quot;_id\&quot;:\&quot;5b74ebd5fb6fc0739646754c\&quot;,\&quot;spell\&quot;:\&quot;Aberto\&quot;,\&quot;type\&quot;:\&quot;Charm\&quot;,\&quot;effect\&quot;:\&quot;opens objects\&quot;},{\&quot;_id\&quot;:&quot;</code></pre>
<p>To convert this to a data frame we can use the <code>fromJSON</code> function in the <code>jsonlite</code> package. <code>tbl_df</code> converts the dataframe to a <code>tibble</code> (for printing purposes).</p>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb840-1" title="1">spellDataDF &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(spellData)</a>
<a class="sourceLine" id="cb840-2" title="2"><span class="kw">tbl_df</span>(spellDataDF)</a></code></pre></div>
<pre><code>## # A tibble: 151 x 5
##    `_id`                spell          type      effect                    `__v`
##    &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;                     &lt;int&gt;
##  1 5b74ebd5fb6fc073964~ Aberto         Charm     opens objects                NA
##  2 5b74ecfa3228320021a~ Accio          Charm     Summons an object             0
##  3 5b74ed2f3228320021a~ Age Line       Enchantm~ Hides things from younge~     0
##  4 5b74ed453228320021a~ Aguamenti      Charm     shoots water from wand        0
##  5 5b74ed583228320021a~ Alarte Ascend~ Spell     shoots things high in th~     0
##  6 5b74ed6d3228320021a~ Alohomora      Charm     opens locked objects          0
##  7 5b74ed823228320021a~ Anapneo        Spell     clears the target&#39;s airw~     0
##  8 5b74ed933228320021a~ Anteoculatia   Hex       turns head hair into ant~     0
##  9 5b74eda53228320021a~ Anti-Cheating  Spell     prevents cheating on exa~     0
## 10 5b74edb53228320021a~ Aparecium      Spell     reveals invisible ink         0
## # ... with 141 more rows</code></pre>
<p>Of course constructing URLs like this yourself isn’t ideal. Languages like python have many packages to help you contact APIs without reading as much documentation. Unfortunately, R does not have a very mature collection of API packages. The article <a href="https://www.programmableweb.com/news/how-to-access-any-restful-api-using-r-language/how-to/2017/07/21">here</a> discusses accessing APIs generically with R. The same website gives a <a href="https://www.programmableweb.com/category/all/apis">list of APIs</a> that you might consider.</p>
</div>
<div id="recap-of-reading-data-1" class="section level4">
<h4><span class="header-section-number">26.0.1.13</span> Recap of Reading Data</h4>
<p>As you can see it isn’t too difficult to bring well structured raw data into R. You should now have the basics of reading in delimited, Excel, SAS, SPSS, JSON, and XML data as well as how to connect to a database and contact an API.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="notation.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["StatisticalMethods.pdf", "StatisticalMethods.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
